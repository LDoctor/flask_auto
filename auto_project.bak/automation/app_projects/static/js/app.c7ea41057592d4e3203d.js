webpackJsonp([1],{"/mwk":function(e,t){},"1eMj":function(e,t){},"5VXj":function(e,t){},"6PsS":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD4AAAAsCAYAAAA93wvUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3hpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNS1jMDE0IDc5LjE1MTQ4MSwgMjAxMy8wMy8xMy0xMjowOToxNSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyZjlhOWRhZS1hMmNhLTRhYjEtOWFjMy1iYjVkYzE4MTVkOGUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NUZGRjgxQkRFRTYzMTFFOTk2MDI5RTU4QTJFN0I0NkYiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NUZGRjgxQkNFRTYzMTFFOTk2MDI5RTU4QTJFN0I0NkYiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozZDlkMGI3OS1iYmU1LTQ2M2UtOGVkMi1mNGIwNWYxY2RmNDMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MmY5YTlkYWUtYTJjYS00YWIxLTlhYzMtYmI1ZGMxODE1ZDhlIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gVJkewAAB7RJREFUeNrMWglsFFUYfm+PdntR2kJBaKlFoIJKMQJi0ABKq0YMxgQCRgXlEBU8iAGSeiYIghoTRKWaKCgEFcQzEdECEkCIIQEspwJSrgrt9qDQY4/xezN/u6/b2Z1jt8CffJ2dmXf97//ff0358anpTBBnRPRDUein+KOwaNQbGAMUA7cCOYATqAUOAz8DvwLlLGwoLk8cfQ5DUgLNLFDfxHIXbWOJg+4ybO+KYa4M4HXgacCt8z4NyAWK6P474CXgGLsGyGGzn9jSA8BzEZjWo4dEH65pRiRKAPoANwI9LYxtmexIvC+wzeZ8icAvUO8CXI9K6v0E8BRwPZBNB8AHVAOVwH5gA/D91WR8fayTcoWtxmW4KmGFbQKbo3RsiZukLjAEeBw4iXalaLf4yqg6b7sWkQGLlYYBg4HPgFEqw+aMWx7aLcJ1F5B1ZSSuMT81jsdsB5DaYQ5zG3A78Cdwg11/EInxbKxhPK79gCCGFov8SfZ6caDUjj7JEvP5aLsQbrdE68otKE5Hxl3o+S6uM4CkMP8qDExXSxpiRxaKpbbzMI1Yr1dj3bxkXO38Lme70X9ghLaDO42B2I7q/cCaWIzbj8BAXaN2rZIm4hxbVp3U4x7VpShxWsyV6qcdai3I4Q6mBEXo6rck8bd0me6MM8olWJ1Lf3Ma1b8BH3MgPOLJaaYZFyHi0DgpXwtFWi2GG6PY0Ab9PsKns6Dfx5xdMpkrs7dpxkfHgeFPsbhJQB5tpAg9Z+H+sK6U2jNwEFgGPEwx+lD0ES7qXxPasB2vdiiaprNgc42WVppkfFwMZ60CuA2YBnxF0hYx9jmgFLgZi94eoa+PYvSbgOcx77e4HgH2UHQ2CPjGYP5cLHeJykhCKvNfUFjTAXNpBD8xNf0orv1tSPky9rYAE5+mew9JuhJM1LYJSmHJaFNPObpMo9olOxw5vaJqn1jPb8B/9GYvUGiwlq2M8zH+6lqWmJvPcpcfNyXx7jbVe51gmhTrVVLNQ3R9VlKey8C8sL6bwzK8d8D0ZhpHJDBi5Q/QuykmIpPRUPH1rsxU1vj3CdawZZUpiTfgmmIj2poomFc4W4lsa4rO+7FAGS24B8atlI7sBJHl8ZDkt0aq7qDtWa4VL/oartHhHBmo8+4U4sz7sIK5uuVGlbjXpvtaJwoSnIUxHZLMR9JTobanpSb7JQEujTLHPM7bbIn+Gnm7+tNcnoBH4lD5mg1VvdyG72ymKG9Fh4WE7vuj7wgpcyij5wGmnfnW0fOjzH4L9Q2YihsUZG3c5VDQOtjYYMh4mY2ARBivOWR5o/UdKgUtB6VNa6b9SMfzlCgjuKWqjxnKYa6EvsEmMH7JaxDkc7bFRoQmCo0TTLRLlzavrnWzcauQCrvxzmVQqlpuoBVh1Z1gpvDp3Ok2YFxhf5EEjVPOkGERRcFuJtaRLP2+1FpQxDAeKl8LlRc6mRmh/3BC9HRXfsYd1SJmNyoxOyiQ+MBWHG4c7DRLqh6U5szkofe1lhKW6DlFBQu2HHd4zCcppZayePNeoF7KopKk8WU/c9JWwqK/UXsVn19xpqabYFxj+BQme6/jZ46Y6bzER1pIHeHjQ+OvjmOGvkWoOXenmmA85G7mAmfjWEGBbVU/HbXyOEIau0hqtxL3/pjy9NBaP3Z4PMxXecZSBUbQHXTm40FfABek5Y+X3onkJYN+B9Xszupx6pjXf454/bKa/VQxy4yLCGlk1Hza3JlrBOZLiyrCb48kQRFbPSMxsMCWjoW0tUlLgzlrOdPEsp+cY5lxQaJePYSqqnboAmlOjfRshU4B4kXy4+KZaFtsyZi136Z7RSXGX1XDkgcVsKxpy2wxzijLEqngy7SbZs/bD2qYydg+icnFEQKQLNWwhdRVpKJ3q1be/Jn+hzR0GwsGWACKnj2r1HKVVY/epHBxgZoqKhELChto0eOlPLo1pVxgkOFNlq0y5QAlVNSIRHuo+CEqNjs1oXCE6ZDSkT9MFyKsqPEApn3470WacIrswjkdSzwdG/WJyVS3uNUDSOQhxnIoRG6gTT2jrxWcKS2XmK/ax/os2cQ8hUVxZdzMuRMDLgRmWzyrQvJfxrQEp4v5vNVaVrOqijnSsmyrerSsaUDYszww8opaYDTDdEdXtZZcYH5UP97RziS1lrVETd2dmcUCF3FO3p1okKTYI4UCko1UIEzBkzstxXv6R+BROvdiE34HdpNaByhTE1XcweR1xAaJfzDoScdOFDoqwPyhxNy0r+vKNh9IKniNZUx+w60Xm8Sq6u8bStfux8MQCVfnpzNv8muBkwWb6nf5qvxvd5v4woaMxxZxR0KSEu8zPgHMrQVzThZPinXDcN6VphrWUhncmNQv78H0sbP9KWMmMVdWTlyNW6EapMjx+NWm1v8lg5vze2tg7dkjnj6Ja7uOK2Fd7psRR6seisYWhhUg7Ek49iMSZvGdzF/nne87z5Ym9e8ed8YF9WBaXX06cF1MDBozX6kaNc6OoV05hcuJuO+leh1F/ZwljF/vtiCHO9b4L3pndgbjcr1sJtM+URXH6QzvJ5Sjfxn671MtdvhHxfb3TvIAIpQeRijpTMblBRRQcbKQ0NNEbxENHiV3JhjdinEO69fZojKua/f/F2AAIs8ybEdHr70AAAAASUVORK5CYII="},GI30:function(e,t){},HBSQ:function(e,t){},IXVt:function(e,t){},M93x:function(e,t,a){"use strict";var s=a("sEFh"),n=a.n(s),o=a("ZVvc");var i=function(e){a("i2hE")},r=a("C7Lr")(n.a,o.a,!1,i,null,null);t.default=r.exports},MpgJ:function(e,t){e.exports={post_deploy_type:"/deploy_type/",get_usb:"/usb/",get_deploy_status:"/deploy_status/",post_account:"/verify_pw/",get_panacube:"/panacube/",post_panacube:"/panacube/",get_verify_ip:"/verify_ip/",get_nodes:"/node/",get_nic:"/network_card_info/",get_node_info:"/get_system_node/",post_deploy_bigdata:"/get_system_node/",get_separate:"/deploy_separate_bigdata/",post_deploy:"/deploy/",get_deploy_process:"/message_code/",post_deploy_bigdatainfo:"/deploy_bigdata/",post_deploy_storage_image:"/upload_storage_image/",post_deploy_docker:"/deploy_docker/",post_deploy_cloud:"/deploy_cloud/",post_verify_bigdata:"/verify_bigdata/",getJumpIp:"/block/",updateDb:"/update_db/",updateCloud:"/update_cloud/"}},N8z9:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("xd7I"),n=a("M93x"),o=a("7LQH"),i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-header",{staticStyle:{height:"100px"},attrs:{id:"header"}},[t("div",[t("img",{attrs:{src:a("6PsS")}}),this._v(" "),t("span",{staticClass:"slogn"},[this._v(this._s(this.lang.header.slogn))])])])},staticRenderFns:[]};var r=a("C7Lr")({props:{},data:function(){return{}},methods:{}},i,!1,function(e){a("Urip")},"data-v-85417444",null).exports,l={name:"pana-main",components:{"cloud-header":r},data:function(){return{}},mounted:function(){},methods:{}},c={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container-fluid px-0",attrs:{id:"panaMain"}},[t("router-view")],1)},staticRenderFns:[]};var d=a("C7Lr")(l,c,!1,function(e){a("Sssm")},"data-v-8b56ea82",null).exports,p={data:function(){return{time:0}},methods:{countDown:function(){this.time--}},mounted:function(){this.time=5,this.setIntervaltime=setInterval(this.countDown,1e3)},watch:{time:function(e,t){0==e&&(this.$router.push({name:"baseInfo"}),clearInterval(this.setIntervaltime))}}},u={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{attrs:{id:"bg"},on:{click:function(t){return e.$router.push({name:"baseInfo"})}}})},staticRenderFns:[]};var m=a("C7Lr")(p,u,!1,function(e){a("IXVt")},"data-v-d90fea64",null).exports,h=a("a3Yh"),g=a.n(h),f=a("3cXf"),b=a.n(f),v={name:"pana-ip-input",methods:{type:function(e){var t=this.current;3===e.target.value.toString().length&&!1===isNaN(Number(e.key))&&(e.returnValue=!1),isNaN(Number(e.key))&&("."===e.key&&null!=this.res[t]&&(t<3?(this.nextInput(e.target),e.returnValue=!1):e.target.blur()),"Backspace"===e.key&&t>0&&(null==this.res[t]||""===this.res[t])&&e.target.parentNode.parentNode.previousElementSibling.childNodes[0].childNodes[0].focus(),-1===this.ignoreKey.indexOf(e.key)&&(e.returnValue=!1))},nextInput:function(e){var t=e.parentNode.parentNode.nextElementSibling.childNodes[0].childNodes[0],a=new Event("keydown");t.focus(),t.dispatchEvent(a)},combinateIp:function(e){e.target.value=e.target.value.replace(/\D/g,""),parseInt(e.target.value)>255&&(e.target.value=255,this.$message({message:this.lang.common.warningTooLargeIpNum,type:"error",center:!0})),this.resValue=this.res.map(function(e){return(e=e.replace(/\D/g,""))>255?255:e}).join("."),this.$emit("input","..."==this.resValue?"":this.resValue)}},data:function(){return{current:0,resValue:"",ignoreKey:["Backspace","ArrowLeft","ArrowRight","Delete","Tab"]}},computed:{res:function(){return(this.value||"").split(".")}},props:{value:{type:String,default:""},disable:{type:Array,default:function(){return[]}},placeholder:{type:Array,default:function(){return[]}}}},_={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-row",{staticClass:"pana-ip-input"},[a("el-col",{attrs:{span:6}},[a("div",{staticClass:"el-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.res[0],expression:"res[0]"}],staticClass:"el-input__inner",attrs:{disabled:e.disable.indexOf(0)>-1,type:"text",min:"1",max:"255",placeholder:e.placeholder[0]},domProps:{value:e.res[0]},on:{focus:function(t){e.current=0},keydown:e.type,keyup:e.combinateIp,input:function(t){t.target.composing||e.$set(e.res,0,t.target.value)}}}),e._v(".\n        ")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"el-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.res[1],expression:"res[1]"}],staticClass:"el-input__inner",staticStyle:{"ime-mode":"disabled"},attrs:{disabled:e.disable.indexOf(1)>-1,type:"text",min:"1",max:"255",placeholder:e.placeholder[1]},domProps:{value:e.res[1]},on:{focus:function(t){e.current=1},keydown:e.type,keyup:e.combinateIp,input:function(t){t.target.composing||e.$set(e.res,1,t.target.value)}}}),e._v(".\n        ")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"el-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.res[2],expression:"res[2]"}],staticClass:"el-input__inner",staticStyle:{"ime-mode":"disabled"},attrs:{disabled:e.disable.indexOf(2)>-1,type:"text",min:"1",max:"255",placeholder:e.placeholder[2]},domProps:{value:e.res[2]},on:{focus:function(t){e.current=2},keydown:e.type,keyup:e.combinateIp,input:function(t){t.target.composing||e.$set(e.res,2,t.target.value)}}}),e._v(".\n        ")])]),e._v(" "),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"el-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.res[3],expression:"res[3]"}],staticClass:"el-input__inner",staticStyle:{"ime-mode":"disabled"},attrs:{disabled:e.disable.indexOf(3)>-1,type:"text",min:"1",max:"255",placeholder:e.placeholder[3]},domProps:{value:e.res[3]},on:{focus:function(t){e.current=3},keydown:e.type,keyup:e.combinateIp,input:function(t){t.target.composing||e.$set(e.res,3,t.target.value)}}})])])],1)},staticRenderFns:[]};var k=a("C7Lr")(v,_,!1,function(e){a("1eMj"),a("xWyL")},"data-v-5c221468",null).exports,y={components:{"pana-ip-input":k},data:function(){return{form:{username:"",password:"",consoleIp:""},rules:{username:[{required:!0,message:this.lang.common.required,trigger:"blur"}],password:[{required:!0,message:this.lang.common.required,trigger:"blur"}],consoleIp:[{required:!0,message:this.lang.common.required,trigger:"blur"}]},showNetwork:!1,centerDialogVisible:!1,errorDialogVisible:!1,publicNetwork:[],subnetName:[],subnetList:[],pubnetIndex:0,sunetIndex:0,networkId:"",segment:""}},methods:{verifyPw:function(){var e=this,t=this;this.$refs.form.validate(function(a){a&&e.$http({url:e.api.post_account,method:"post",data:{username:e.form.username,password:e.form.password}}).then(function(e){0===e.data.code?t.centerDialogVisible=!0:1===e.data.code&&(t.errorDialogVisible=!0)},function(e){})})},showNetworkClick:function(){this.centerDialogVisible=!1,this.showNetwork=!0,this.getPublicNetwork()},errorClick:function(){this.errorDialogVisible=!1},getPublicNetwork:function(){var e=this;this.$http({url:this.api.get_panacube,method:"get"}).then(function(t){e.publicNetwork=t.data.data,e.publicNetwork.length>0&&(e.pubnetIndex=0,e.changePub())},function(e){})},changePub:function(){var e=this.publicNetwork[this.pubnetIndex];this.subnetName=e.subnets,this.subnetName.length>0&&(this.sunetIndex=0,this.changeSubnet())},changeSubnet:function(){var e=this.subnetName[this.sunetIndex];this.networkId=e.id;e.name;for(var t=e.allocationPools,a=0;a<t.length;a++)t[a].name=t[a].start+" ~ "+t[a].end;this.subnetList=t,this.subnetList.length>0&&(this.segment=0)},checkIp:function(){var e=this,t=this;this.$refs.form.validate(function(a){a&&e.$http({url:e.api.get_verify_ip+e.common.formatGetUrl({ip:e.form.consoleIp}),method:"get"}).then(function(e){0===e.data.code&&(sessionStorage.setItem("cloudInfo",b()(t.form)),"null"===e.data.data?t.$notify({title:t.lang.common.error,message:t.lang.common.ipOccupancy,type:"error"}):t.$notify({title:t.lang.common.success,message:t.lang.common.ipSuccess,type:"success"}))},function(e){})})}},mounted:function(){}},w={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cloudDiv"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.account,prop:"username"}},[a("el-input",{attrs:{placeholder:e.lang.base.accountPlaceholder},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.password,prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:e.lang.base.passwordPlaceholder},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",size:"small"},on:{click:e.verifyPw}},[e._v(e._s(e.lang.base.check))])],1),e._v(" "),!0===e.showNetwork?a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.publicNetwork}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changePub},model:{value:e.pubnetIndex,callback:function(t){e.pubnetIndex=t},expression:"pubnetIndex"}},e._l(e.publicNetwork,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e.name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.selectSubnet}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changeSubnet},model:{value:e.sunetIndex,callback:function(t){e.sunetIndex=t},expression:"sunetIndex"}},e._l(e.subnetName,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e.name}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.subnetSegment}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},model:{value:e.segment,callback:function(t){e.segment=t},expression:"segment"}},e._l(e.subnetList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e.name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"consoleIp",label:e.lang.base.consoleIp}},[a("pana-ip-input",{model:{value:e.form.consoleIp,callback:function(t){e.$set(e.form,"consoleIp",t)},expression:"form.consoleIp"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary",round:"",size:"small"},on:{click:e.checkIp}},[e._v(e._s(e.lang.base.checkOccupancyGateway))])],1)],1)],1):e._e()],1),e._v(" "),a("el-dialog",{attrs:{title:e.lang.common.alert,visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[a("div",{staticClass:"alert-content"},[a("p",[e._v(e._s(e.lang.base.connectSuccess))]),e._v(" "),a("span",[a("i",{staticClass:"el-icon-circle-check"})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.showNetworkClick}},[e._v(e._s(e.lang.common.confirm))])],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.lang.common.alert,visible:e.errorDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.errorDialogVisible=t}}},[a("div",{staticClass:"alert-content"},[a("p",[e._v(e._s(e.lang.base.errorAlert))]),e._v(" "),a("span",[a("i",{staticClass:"el-icon-warning"})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.errorClick}},[e._v(e._s(e.lang.common.confirm))])],1)])],1)},staticRenderFns:[]};var x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"cloudDiv"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.lang.base.account,prop:"account"}},[a("el-input",{attrs:{placeholder:e.lang.base.accountPlaceholder},model:{value:e.form.account,callback:function(t){e.$set(e.form,"account",t)},expression:"form.account"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.password,prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:e.lang.base.passwordPlaceholder},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",size:"small"}},[e._v(e._s(e.lang.base.check))])],1),e._v(" "),a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.lang.base.consoleIp}},[a("el-input")],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var I={components:{"pana-ip-input":k},data:function(){return{deployMethod:1,nodesList:[],checkAll:!1,checkedList:[],diskList:[],diskIdList:[],isIndeterminate:!0,nicList:[],selectNic:"",ip:"",cpu:"",disk:"",mem:"",activeName:"",storageTotal:0,storageUsed:0,storagePrecent:0,cpuPrecent:0,memPrecent:0,diskPrecent:0,bigdataForm:{nodeData:[]},rules:{}}},methods:{getNodes:function(){var e=this;this.$http({url:this.api.get_nodes,method:"get"}).then(function(t){t.data.data.forEach(function(t){e.bigdataForm.nodeData.push({cpu:"",mem:"",bigdata:"",network_ip:"",network_name:"",netmask:"",nodeName:t.hostName,ip:t.hostInfoMap.ip,dev_list:[]})}),e.nodesList=t.data.data,e.ip=t.data.data[0].hostInfoMap.ip,e.nodesList.forEach(function(t){e.getOneNodeInfo(t.hostInfoMap.ip)}),e.activeName=t.data.data[0].hostName},function(e){})},getNicInfo:function(){var e=this;this.$http({url:this.api.get_nic,method:"get"}).then(function(t){e.nicList=t.data.exits_network_name},function(e){})},getOneNodeInfo:function(e){var t=this;this.$http({url:this.api.get_node_info+this.common.formatGetUrl({ip:e}),method:"get"}).then(function(a){t.bigdataForm.nodeData.forEach(function(t){t.ip===e&&(t.cpuUsed=parseInt(a.data.data.cpu.split("/")[0]),t.cpuTotal=parseInt(a.data.data.cpu.split("/")[1]),t.memUsed=parseInt(a.data.data.mem.split("/")[0]),t.memTotal=parseInt(a.data.data.mem.split("/")[1]),t.diskUsed=parseInt(a.data.data.disk.split("/")[0]),t.diskTotal=parseInt(a.data.data.disk.split("/")[1]))}),t.storageTotal+=parseInt(a.data.data.disk.split("/")[1]),t.storageUsed+=parseInt(a.data.data.disk.split("/")[0]),t.storagePrecent=t.storageUsed/t.storageTotal*100,t.cpu=a.data.data.cpu,t.mem=a.data.data.mem,t.disk=a.data.data.disk,t.cpuPrecent=parseInt(a.data.data.cpu.split("/")[0])/parseInt(a.data.data.cpu.split("/")[1])*100,t.memPrecent=parseInt(a.data.data.mem.split("/")[0])/parseInt(a.data.data.mem.split("/")[1])*100,t.diskPrecent=parseInt(a.data.data.disk.split("/")[0])/parseInt(a.data.data.disk.split("/")[1])*100},function(e){})},handleClick:function(){},getSeparate:function(){var e=this;this.$http({url:this.api.get_separate,method:"get"}).then(function(t){t.data.forEach(function(t){e.diskIdList.push(t.file_id)}),e.diskList=t.data},function(e){})},handleCheckAllChange:function(e){this.checkedList=e?this.diskIdList:[],this.isIndeterminate=!1},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.diskIdList.length,this.isIndeterminate=t>0&&t<this.diskList.length},confirm:function(){var e=[],t=this;this.bigdataForm.nodeData.forEach(function(t){e.push({bigdata:t.bigdata,cpu:t.cpu,ip:t.ip,mem:t.mem,netmask:t.netmask,network_ip:t.network_ip,network_name:t.network_name,"node-name":t.nodeName})}),this.$http({url:this.api.post_deploy_bigdata,method:"post",data:{node:e}}).then(function(e){0===e.data.code&&sessionStorage.setItem("bigdata",b()(t.bigdataForm.nodeData))},function(e){})},changeNetworkName:function(){this.$refs.bigdataForm.validateField("nodeData.0.network_name"),this.$refs.bigdataForm.validateField("nodeData.1.network_name"),this.$refs.bigdataForm.validateField("nodeData.2.network_name")},getVal:function(){return this.$refs.bigdataForm},returnJmp:function(){return!0}},mounted:function(){this.getNodes(),this.getNicInfo(),this.getSeparate()}},N={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bigData"},[a("div",{staticClass:"bigData-top"},[a("span",[e._v(e._s(e.lang.base.totalStorageSpace))]),e._v(" "),a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:e.storagePrecent}}),e._v(" "),a("span",{staticClass:"used"},[e._v(e._s(e.lang.base.used)+"："+e._s(e.storageUsed)+"/"+e._s(e.storageTotal)+"GB")])],1),e._v(" "),a("div",{staticClass:"deploy-method"},[a("span",[e._v(e._s(e.lang.base.deployMethod))]),e._v(" "),a("el-radio-group",{staticClass:"radio-group",model:{value:e.deployMethod,callback:function(t){e.deployMethod=t},expression:"deployMethod"}},[a("el-radio",{attrs:{label:1}},[e._v(e._s(e.lang.base.ceph))]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v(e._s(e.lang.base.bareDisk))])],1)],1),e._v(" "),a("div",{staticClass:"bigdata-content"},[a("el-form",{ref:"bigdataForm",attrs:{model:e.bigdataForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"",prop:""}},[e.bigdataForm.nodeData.length>0?a("el-tabs",{staticStyle:{height:"600px"},attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.bigdataForm.nodeData,function(t,s){return a("el-tab-pane",{key:s,attrs:{label:t.nodeName,name:t.nodeName}},[a("el-row",[a("el-col",[a("span",{staticStyle:{"padding-left":"60px"}},[e._v(e._s(t.nodeName))])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"nodeData."+s+".network_name",rules:[{required:!0,message:e.lang.common.required,trigger:"blur"}],label:e.lang.base.nic,"label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:e.changeNetworkName},model:{value:t.network_name,callback:function(a){e.$set(t,"network_name",a)},expression:"item.network_name"}},e._l(e.nicList,function(e){return a("el-option",{key:e.network_name,attrs:{value:e.network_name,label:e.network_name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{validator:e.common.validateIpAddress,message:e.lang.common.ipAddressAlert,trigger:"blur"}],prop:"nodeData."+s+".network_ip",label:e.lang.base.ipAddress,"label-width":"120px"}},[a("pana-ip-input",{model:{value:t.network_ip,callback:function(a){e.$set(t,"network_ip",a)},expression:"item.network_ip"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px","border-bottom":"1px solid #e0e0e0","padding-bottom":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{validator:e.common.validateNetMask,message:e.lang.base.netMaskAlert,trigger:"blur"}],prop:"nodeData."+s+".netmask",label:e.lang.base.subnetMask,"label-width":"120px"}},[a("pana-ip-input",{model:{value:t.netmask,callback:function(a){e.$set(t,"netmask",a)},expression:"item.netmask"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("div",{staticStyle:{"margin-left":"60px","margin-top":"20px"}},[e._v(e._s(e.lang.base.distributionNode))])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{type:"integer",min:1,max:t.cpuTotal-t.cpuUsed,message:t.cpuTotal-t.cpuUsed==0?e.common.formatMsg(e.lang.base.noResource,{item:"cpu"}):e.common.formatMsg(e.lang.base.maxInter,{max:t.cpuTotal-t.cpuUsed})}],prop:"nodeData."+s+".cpu",label:e.lang.base.cpu,"label-width":"120px"}},[a("el-input",{attrs:{type:"number"},model:{value:t.cpu,callback:function(a){e.$set(t,"cpu",e._n(a))},expression:"item.cpu"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:Math.ceil(t.cpuUsed/t.cpuTotal*100)}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v(e._s(e.lang.base.used)+":"+e._s(t.cpuUsed)+"/"+e._s(t.cpuTotal)+e._s(e.lang.base.nucleus))])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{type:"integer",min:1,max:t.memTotal-t.memUsed,message:t.memTotal-t.memUsed==0?e.common.formatMsg(e.lang.base.noResource,{item:"内存"}):e.common.formatMsg(e.lang.base.maxInter,{max:t.memTotal-t.memUsed})}],prop:"nodeData."+s+".mem",label:e.lang.base.memory,"label-width":"120px"}},[a("el-input",{attrs:{type:"number"},model:{value:t.mem,callback:function(a){e.$set(t,"mem",e._n(a))},expression:"item.mem"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:Math.ceil(t.memUsed/t.memTotal*100)}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v(e._s(e.lang.base.used)+":"+e._s(t.memUsed)+"/"+e._s(t.memTotal)+"GB")])])],1),e._v(" "),1===e.deployMethod?a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{type:"integer",min:1,max:t.diskTotal-t.diskUsed,message:t.diskTotal-t.diskUsed==0?e.common.formatMsg(e.lang.base.noResource,{item:"存储"}):e.common.formatMsg(e.lang.base.maxInter,{max:t.diskTotal-t.diskUsed})}],prop:"nodeData."+s+".bigdata",label:e.lang.base.storage,"label-width":"120px"}},[a("el-input",{attrs:{type:"number"},model:{value:t.bigdata,callback:function(a){e.$set(t,"bigdata",e._n(a))},expression:"item.bigdata"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:Math.ceil(t.diskUsed/t.diskTotal*100)}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v(e._s(e.lang.base.used)+":"+e._s(t.diskUsed)+"/"+e._s(t.diskTotal)+"GB")])])],1):e._e(),e._v(" "),2===e.deployMethod?a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-form-item",{attrs:{label:e.lang.base.storage,"label-width":"120px"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.diskList,function(t){return a("el-checkbox",{key:t.file_id,attrs:{label:t.file_id}},[e._v(e._s(t.dev))])}),1)],1)],1):e._e()],1)}),1):e._e()],1)],1)],1)])},staticRenderFns:[]};var S={data:function(){return{tableData:[],cloudInfo:""}},methods:{},mounted:function(){this.tableData=JSON.parse(sessionStorage.getItem("bigdata")),this.cloudInfo=JSON.parse(sessionStorage.getItem("cloudInfo"))}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"confirm-info"},[a("h5",[e._v(e._s(e.lang.base.cloud))]),e._v(" "),a("ul",{staticClass:"cloud-info"},[a("li",[e._v(e._s(e.lang.base.account)+":"+e._s(e.cloudInfo.username))]),e._v(" "),a("li",[e._v(e._s(e.lang.base.password)+":"+e._s(e.cloudInfo.password))]),e._v(" "),a("li",[e._v(e._s(e.lang.base.consoleIp)+":"+e._s(e.cloudInfo.consoleIp))])]),e._v(" "),a("h5",[e._v(e._s(e.lang.base.bigData))]),e._v(" "),a("el-table",{staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"nodeName",label:e.lang.base.node}}),e._v(" "),a("el-table-column",{attrs:{prop:"network_name",label:e.lang.base.nic}}),e._v(" "),a("el-table-column",{attrs:{prop:"network_ip",label:e.lang.base.ipAddress}}),e._v(" "),a("el-table-column",{attrs:{prop:"netmask",label:e.lang.base.subnetMask}}),e._v(" "),a("el-table-column",{attrs:{prop:"cpu",label:e.lang.base.cpu}}),e._v(" "),a("el-table-column",{attrs:{prop:"mem",label:e.lang.base.memory}}),e._v(" "),a("el-table-column",{attrs:{prop:"bigdata",label:e.lang.base.storage}})],1)],1)},staticRenderFns:[]};var D={data:function(){return{list:["/static/image/cloud-bg.png","/static/image/storage-bg.png","/static/image/bigdata-bg.png"],cloudUp:!0,bigdataUp:!1,mirroringUp:!1}},methods:{getDeployProcess:function(){var e=this;this.$http({url:this.api.get_deploy_process,method:"get"}).then(function(t){0===t.data.code&&e.initChart(t.data.data.percentage)},function(e){})},initChart:function(e){var t=this.$echarts.init(document.getElementById("deploy")),a=e,s={title:g()({text:a+"%",subtext:"已完成",textAlign:"center",textStyle:{fontWeight:"normal",color:"#757A97",fontSize:20},subtextStyle:{fontWeight:"bold",fontSize:16,color:"#757A97"},top:"90",x:"50%",y:"45%"},"textAlign","center"),xAxis:{show:!1},yAxis:{show:!1},series:[{name:"",bottom:100,type:"pie",radius:["50%","60%"],avoidLabelOverlap:!1,startAngle:225,color:[{type:"linear",x:0,y:0,x2:.4,y2:1,colorStops:[{offset:0,color:"#30C9AE"},{offset:1,color:"#30C9AE"}],globalCoord:!1},"none"],hoverAnimation:!1,legendHoverLink:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:75,name:"1"},{value:25,name:"2"}]},{name:"",type:"pie",radius:["50%","60%"],avoidLabelOverlap:!1,startAngle:315,color:["#e7e7e7","#fff","transparent"],hoverAnimation:!1,legendHoverLink:!1,clockwise:!1,z:10,labelLine:{normal:{show:!1}},data:[{value:270*(100-a)/360,name:""},{value:1,name:""},{value:100-270*(100-a)/360,name:""}]}]};t.setOption(s,!0)}},mounted:function(){this.getDeployProcess()}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"deploy-info"},[a("div",{staticClass:"wheel-planting"},[a("el-carousel",{attrs:{"indicator-position":"outside"}},e._l(e.list,function(e,t){return a("el-carousel-item",{key:t},[a("img",{attrs:{src:e,alt:""}})])}),1)],1),e._v(" "),a("div",{staticClass:"deploy-content"},[a("div",{ref:"deploy",attrs:{id:"deploy"}}),e._v(" "),a("div",{staticStyle:{position:"absolute",top:"600px",left:"330px"}},[a("span",{staticStyle:{width:"10px",height:"10px","border-radius":"50%",display:"inline-block",background:"#30C9AE"}}),e._v(" "),a("span",{staticStyle:{color:"#757A97"},attrs:{id:"deploys"}},[e._v(e._s(e.lang.base.deploying))])]),e._v(" "),a("div",{staticClass:"duration"},[a("div",{attrs:{id:"txt"}},[e._v(e._s(e.lang.base.duration)+":"),a("span",[e._v("15分钟38秒")])])]),e._v(" "),a("div",{staticClass:"deploy-status"},[a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.cloudPlatform,disabled:""},model:{value:e.cloudUp,callback:function(t){e.cloudUp=t},expression:"cloudUp"}}),e._v(" "),a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.bigData,disabled:""},model:{value:e.bigdataUp,callback:function(t){e.bigdataUp=t},expression:"bigdataUp"}}),e._v(" "),a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.uploadMirroring,disabled:""},model:{value:e.mirroringUp,callback:function(t){e.mirroringUp=t},expression:"mirroringUp"}})],1)])])},staticRenderFns:[]};var U={data:function(){return{checkUpdateList:[],selectIndex:1}},methods:{upgradBtn:function(e){this.selectIndex=e},changeCheckBox:function(){console.log(this.checkUpdateList)}}},L={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upgrade-div"},[a("div",{staticClass:"left"},[a("ul",{staticClass:"upgrad-btn"},[a("li",{class:1===e.selectIndex?"active":"",on:{click:function(t){return e.upgradBtn(1)}}}),e._v(" "),a("li",{class:2===e.selectIndex?"active":"",on:{click:function(t){return e.upgradBtn(2)}}})])]),e._v(" "),a("div",{staticClass:"right"},[a("h5",[e._v(e._s(e.lang.base.upgradeSelect))]),e._v(" "),a("div",{staticClass:"checkbox-div"},[a("el-checkbox-group",{on:{change:e.changeCheckBox},model:{value:e.checkUpdateList,callback:function(t){e.checkUpdateList=t},expression:"checkUpdateList"}},e._l(e.lang.base.upgradList,function(t,s){return a("el-checkbox",{staticStyle:{"line-height":"50px"},attrs:{label:s}},[a("div",{staticClass:"checkbox-desc"},[a("div",{staticClass:"lefts"},[a("img",{attrs:{src:t.imgurl}})]),e._v(" "),a("div",{staticClass:"rights"},[a("h6",[e._v(e._s(t.name))]),e._v(" "),a("span",[e._v(e._s(t.desc))])])])])}),1)],1)])])},staticRenderFns:[]};var E={components:{headers:r,kvmcloud:a("C7Lr")(y,w,!1,function(e){a("5VXj")},"data-v-46e8a525",null).exports,dockercloud:a("C7Lr")({data:function(){return{form:{account:"",password:""},rules:{account:[{required:!0,message:this.lang.common.required,trigger:"blur"}],password:[{required:!0,message:this.lang.common.required,trigger:"blur"}]},showNetwork:!1}},methods:{},mounted:function(){}},x,!1,function(e){a("l42E")},"data-v-212a6ba2",null).exports,"bigdata-setting":a("C7Lr")(I,N,!1,function(e){a("/mwk")},"data-v-4806d0d8",null).exports,"confirm-info":a("C7Lr")(S,C,!1,function(e){a("Xvun")},"data-v-e59cc020",null).exports,deploy:a("C7Lr")(D,A,!1,function(e){a("Vgrq")},"data-v-50b8fb99",null).exports,upgrade:a("C7Lr")(U,L,!1,function(e){a("PvZD"),a("XrrZ")},"data-v-7337f14e",null).exports,"pana-ip-input":k},data:function(){return{showInstallationSource:!1,showMode:!0,showInstallUpgrading:!1,installSource:"",showInstallationSources:[{value:"1",label:"u1"},{value:"2",label:"u2"}],checked:!1,stepIndex:0,activeIndex:"",checkedIndex:"",deployType:"",isInstalled:!1,showUpgrade:!1,form:{username:"",password:"",consoleIp:""},cloudrules:{username:[{required:!0,message:this.lang.common.required,trigger:"blur"}],password:[{required:!0,message:this.lang.common.required,trigger:"blur"}]},showNetwork:!1,centerDialogVisible:!1,errorDialogVisible:!1,publicNetwork:[],subnetName:[],subnetList:[],pubnetIndex:0,sunetIndex:0,networkId:"",pubnetworkId:"",segment:"",disabledArr:[],ipRange:{},placeholderArr:[],checkBtnDisable:!1,checkConsoleIp:!1,deployedData:!1,alreadyExist:[],deployMethod:1,nodesList:[],checkAll:!1,checkedList:[],diskList:[],diskIdList:[],isIndeterminate:!0,nicList:[],selectNic:"",ip:"",cpu:"",disk:"",mem:"",activeName:"",storageTotal:0,storageUsed:0,storagePrecent:0,cpuPrecent:0,memPrecent:0,diskPrecent:0,bigdataForm:{nodeData:[]},bigdataRules:{},tableData:[],cloudInfo:"",list:["/static/image/cloud-bg.png","/static/image/storage-bg.png","/static/image/bigdata-bg.png"],cloudUp:!1,bigdataUp:!1,mirroringUp:!1,diachronicTime:"",checkUpdateList:[],selectIndex:1,isShowNetwork:!0,showDeployType:"",finishBtn:!0,jumpIp:"",dockerUpgrade:!1,ciphertextPassword:"",disableCheck:!1,ipValidMessage:"",ipIsOccupied:!1}},methods:{checkStep:function(e){var t=this,a=[];e>0?2===t.stepIndex?(this.bigdataForm.nodeData.forEach(function(e){""!==e.cpu&&a.push(e)}),t.$refs.bigdataForm.validate(function(s){!1===s&&a.length>=3?(t.confirm(),t.stepIndex+=e):!1===s&&a.length<3&&t.$notify({title:t.lang.base.warning,message:t.lang.base.errorNodeInfo,type:"warning"}),s&&(t.confirm(),t.stepIndex+=e)})):1===t.stepIndex?t.$refs.form.validate(function(a){if(a)if("kvm"==t.deployType&&!0===t.isShowNetwork){if(!1===t.checkBtnDisable)return t.$notify({title:"警告",message:"请点击检测账号信息",type:"warning"}),!1;1===t.checkedIndex?t.checkIp(e):t.checkUpdateList.indexOf("update_bigdata")>-1?(t.stepIndex+=e,t.verifyBigdata(),t.getNicInfo(),t.getSeparate()):(sessionStorage.setItem("cloudInfo",b()(t.form)),t.stepIndex=3,setTimeout(function(){t.cloudInfo=JSON.parse(sessionStorage.getItem("cloudInfo")),t.ciphertextPassword="";for(var e=0;e<t.cloudInfo.password.length;e++)t.ciphertextPassword+="*"},500))}else{if(!1===t.checkBtnDisable)return t.$notify({title:"警告",message:"请点击检测账号信息",type:"warning"}),!1;!0===t.checkBtnDisable&&(t.postPanacube(),1===t.checkedIndex?t.stepIndex+=e:t.checkUpdateList.indexOf("update_bigdata")>-1?t.stepIndex+=e:(t.stepIndex=3,setTimeout(function(){t.cloudInfo=JSON.parse(sessionStorage.getItem("cloudInfo")),t.ciphertextPassword="";for(var e=0;e<t.cloudInfo.password.length;e++)t.ciphertextPassword+="*"},500)),t.verifyBigdata(),t.getNicInfo(),t.getSeparate())}}):0===t.stepIndex?1===t.checkedIndex?t.stepIndex+=e:"kvm"===t.deployType?t.checkUpdateList.indexOf("deploy_kvm")>-1?t.stepIndex+=e:t.checkUpdateList.indexOf("update_bigdata")>-1?(t.stepIndex+=e,t.isShowNetwork=!1):t.checkUpdateList.indexOf("update_storage_image")>-1&&(t.stepIndex+=e,t.isShowNetwork=!1):t.stepIndex+=e:t.stepIndex+=e:0===t.stepIndex?(t.showInstallUpgrading=!1,t.showUpgrade=!1,t.showInstallationSource=!0):3===t.stepIndex?1===t.checkedIndex?t.stepIndex+=e:t.checkUpdateList.indexOf("update_bigdata")>-1?t.stepIndex+=e:t.stepIndex=1:1===t.stepIndex&&1===t.checkedIndex?(t.stepIndex+=e,t.showInstallationSource=!0):t.stepIndex+=e},skip:function(){this.stepIndex=3,sessionStorage.setItem("cloudInfo",b()(this.form))},choseMode:function(e,t){this.activeIndex=e,this.showInstallationSource=!0,this.showMode=!1,this.deployType=t.toLowerCase(),this.choseModes(t.toLowerCase()),this.getUsbList()},choseModes:function(e){this.$http({url:this.api.post_deploy_type,method:"post",data:{type:e}}).then(function(e){},function(e){})},getDeployStatus:function(){var e=this;this.$http({url:this.api.get_deploy_status,method:"get"}).then(function(t){if(""!=t.data.data){JSON.parse(t.data.data);e.isInstalled=!0,e.checkedIndex=2}else e.checkedIndex=1},function(e){})},getUsbList:function(){var e=this;this.$http({url:this.api.get_usb,method:"get"}).then(function(t){e.showInstallationSources=t.data},function(e){})},installPrev:function(){this.showInstallationSource=!1,this.showMode=!0},installNext:function(){this.showInstallationSource=!1,!0===this.isInstalled?this.showUpgrade=!0:this.stepIndex=1},verifyPw:function(){var e=this,t=this,s=a("BvhE").Base64;this.$refs.form.validate(function(a){a&&e.$http({url:e.api.post_account,method:"post",data:{username:e.form.username,password:s.encode(e.form.password)}}).then(function(e){0===e.data.code?(t.checkBtnDisable=!0,t.errorDialogVisible=!1,t.disableCheck=!0,t.showNetworkClick()):1===e.data.code&&(t.disableCheck=!1,t.errorDialogVisible=!0)},function(e){})})},showNetworkClick:function(){this.showNetwork=!0,this.getPublicNetwork()},errorClick:function(){this.errorDialogVisible=!1},getPublicNetwork:function(){var e=this;this.$http({url:this.api.get_panacube,method:"get"}).then(function(t){e.publicNetwork=t.data.data,e.publicNetwork.length>0&&(e.pubnetIndex=0,e.changePub()),e.getJumpLink()},function(e){})},changePub:function(){var e=this.publicNetwork[this.pubnetIndex];this.subnetName=e.subnets,this.pubnetworkId=e.id,this.subnetName.length>0&&(this.sunetIndex=0,this.changeSubnet())},changeSubnet:function(){var e=this.subnetName[this.sunetIndex];this.networkId=e.id;e.name;for(var t=e.allocationPools,a=0;a<t.length;a++)t[a].name=t[a].start+" ~ "+t[a].end;this.subnetList=t,this.subnetList.length>0&&(this.segment=0,this.changeSegment())},changeSegment:function(){var e=this.subnetList[this.segment],t=e.start,a=e.end;this.setConsoleIp(t,a)},setConsoleIp:function(e,t){var a=e.split("."),s=t.split("."),n={},o="",i=[],r=[],l=!0;a.map(function(e,t){e===s[t]?(n[t]=e,o=o+e+".",i.push(parseInt(t)),r.push("")):(n[t]={start:e,end:s[t]},!0===l?(l=!1,r.push(a[t]+"~"+s[t])):r.push("0~255"))}),this.form.consoleIp=o,this.ipRange=n,"kvm"===this.deployType&&2===this.checkedIndex?this.disabledArr=[0,1,2,3]:this.disabledArr=i,this.placeholderArr=r,this.ipValidMessage=this.common.formatMsg(this.lang.base.consoleIpRange,{start:e,end:t})},validateGateway:function(e,t,a){if(null==t||""===t)a();else{var s=t.split("."),n=!0,o=!0;for(var i in this.ipRange)if(this.ipRange.hasOwnProperty(i)){var r=parseInt(s[parseInt(i)]);if("[object Object]"===this.ipRange[i].toString())if(!0===n){if(n=!1,r<this.ipRange[i].start||r>this.ipRange[i].end){o=!1;break}}else if(3===parseInt(i)){if(r<0||r>this.ipRange[i].end){o=!1;break}}else if(r<0||r>255){o=!1;break}}!0===o?a():a(new Error(e.message))}},checkIp:function(e){var t=this,a=this;this.$refs.form.validate(function(s){s&&t.$http({url:t.api.get_verify_ip+t.common.formatGetUrl({ip:t.form.consoleIp,network_id:t.pubnetworkId}),method:"get"}).then(function(t){0===t.data.code&&(a.checkConsoleIp=!0,"null"===t.data.data?a.ipIsOccupied=!0:(a.ipIsOccupied=!1,!0===a.checkBtnDisable&&!0===a.checkConsoleIp&&(a.postPanacube(),1===a.checkedIndex?a.stepIndex+=e:a.checkUpdateList.indexOf("update_bigdata")>-1?a.stepIndex+=e:(a.stepIndex=3,setTimeout(function(){a.cloudInfo=JSON.parse(sessionStorage.getItem("cloudInfo")),a.ciphertextPassword="";for(var e=0;e<a.cloudInfo.password.length;e++)a.ciphertextPassword+="*"},500)),a.verifyBigdata(),a.getNicInfo(),a.getSeparate())))},function(e){})})},changeConsole:function(){this.checkConsoleIp=!1,this.ipIsOccupied=!1,this.$refs.form.validateField("consoleIp")},postPanacube:function(){var e={},t=this;e="kvm"===this.deployType?{username:this.form.username,password:this.form.password,panacube_ip:this.form.consoleIp,network_id:this.pubnetworkId}:{username:this.form.username,password:this.form.password},this.$http({url:this.api.post_panacube,method:"post",data:e}).then(function(e){0===e.data.code&&sessionStorage.setItem("cloudInfo",b()(t.form))},function(e){})},verifyBigdata:function(){var e=this;this.$http({url:this.api.post_verify_bigdata,method:"post",data:{inspect:"bigdata"}}).then(function(t){e.bigdataForm.nodeData=[],0==t.data.code&&(t.data.data.length>0?(e.deployedData=!0,e.alreadyExist=t.data.data):e.getNodes())},function(e){})},cancleDeployedData:function(){this.deployedData=!1,this.getNodes()},ensureDeployedData:function(){var e=this;e.deployedData=!1,e.bigdataForm.nodeData=[],this.alreadyExist.forEach(function(t){t.dev_path.length>0&&(e.deployMethod=2),e.bigdataForm.nodeData.push({cpu:t.cpu,mem:t.mem,bigdata:t.bigdata,netmask:t.netmask,network_ip:t.network_ip,network_name:t.network_name,nodeName:t["node-name"],ip:t.ip,dev_path:t.dev_path,diskList:[],diskIdList:[]})}),e.bigdataForm.nodeData.sort(e.objSort("nodeName")),e.activeName=e.bigdataForm.nodeData[0].nodeName,e.bigdataForm.nodeData.forEach(function(t){e.getOneNodeInfo(t.ip)})},getNodes:function(){var e=this;this.$http({url:this.api.get_nodes,method:"get"}).then(function(t){e.bigdataForm.nodeData=[],t.data.data.forEach(function(t){e.bigdataForm.nodeData.push({cpu:"",mem:"",bigdata:"",network_ip:"",network_name:"",netmask:"",nodeName:"docker"===e.deployType?t["node-name"]:t.hostName,ip:"docker"===e.deployType?t.ip:t.hostInfoMap.ip,dev_path:[],diskList:[],diskIdList:[]})}),e.nodesList=t.data.data,e.ip="docker"===e.deployType?t.data.data[0].ip:t.data.data[0].hostInfoMap.ip,"docker"===e.deployType?(e.nodesList.forEach(function(t){e.getOneNodeInfo(t.ip)}),e.bigdataForm.nodeData.sort(e.objSort("nodeName"))):(e.nodesList.forEach(function(t){e.getOneNodeInfo(t.hostInfoMap.ip)}),e.bigdataForm.nodeData.sort(e.objSort("nodeName"))),e.activeName=e.bigdataForm.nodeData[0].nodeName},function(e){})},getNicInfo:function(){var e=this;this.$http({url:this.api.get_nic,method:"get"}).then(function(t){e.nicList=t.data.exits_network_name},function(e){})},getOneNodeInfo:function(e){var t=this;this.$http({url:this.api.get_node_info+this.common.formatGetUrl({ip:e}),method:"get"}).then(function(a){t.bigdataForm.nodeData.forEach(function(t){t.ip===e&&(t.cpuUsed=parseInt(a.data.data.cpu.split("/")[0]),t.cpuTotal=parseInt(a.data.data.cpu.split("/")[1]),t.memUsed=parseInt(a.data.data.mem.split("/")[0]),t.memTotal=parseInt(a.data.data.mem.split("/")[1]),t.diskUsed=parseInt(a.data.data.disk.split("/")[0]),t.diskTotal=parseInt(a.data.data.disk.split("/")[1]))}),t.storageTotal=parseInt(a.data.data.disk.split("/")[1]),t.storageUsed+=parseInt(a.data.data.disk.split("/")[0]),t.storagePrecent=t.storageUsed/t.storageTotal*100,t.cpu=a.data.data.cpu,t.mem=a.data.data.mem,t.disk=a.data.data.disk,t.cpuPrecent=parseInt(a.data.data.cpu.split("/")[0])/parseInt(a.data.data.cpu.split("/")[1])*100,t.memPrecent=parseInt(a.data.data.mem.split("/")[0])/parseInt(a.data.data.mem.split("/")[1])*100,t.diskPrecent=parseInt(a.data.data.disk.split("/")[0])/parseInt(a.data.data.disk.split("/")[1])*100},function(e){})},handleClick:function(){},getSeparate:function(){var e=this;this.$http({url:this.api.get_separate,method:"get"}).then(function(t){0===t.data.code&&t.data.data.length>0&&t.data.data.forEach(function(t){e.bigdataForm.nodeData.forEach(function(e){if(t.nodeName===e.nodeName)for(var a=0;a<t.diskInfos.length;a++)"available"===t.diskInfos[a].attribute&&(e.diskList.push({byId:t.diskInfos[a].byId,name:t.diskInfos[a].name}),e.diskIdList.push(t.diskInfos[a].byId))})})})},handleCheckAllChange:function(e){this.bigdataForm.nodeData[e].dev_path===this.bigdataForm.nodeData[e].diskIdList?this.bigdataForm.nodeData[e].dev_path=[]:this.bigdataForm.nodeData[e].dev_path=this.bigdataForm.nodeData[e].diskIdList,this.isIndeterminate=!1},handleCheckedCitiesChange:function(e,t){var a=e.length;this.checkAll=a===this.bigdataForm.nodeData[t].diskIdList.length,this.isIndeterminate=a>0&&a<this.bigdataForm.nodeData[t].diskList.length},confirm:function(){var e=[],t=this;this.bigdataForm.nodeData.forEach(function(t){""!==t.cpu&&e.push({bigdata:t.bigdata,cpu:t.cpu,ip:t.ip,mem:t.mem,netmask:t.netmask,network_ip:t.network_ip,network_name:t.network_name,"node-name":t.nodeName,dev_path:t.dev_path})}),this.$http({url:this.api.post_deploy_bigdata,method:"post",data:{node:e}}).then(function(e){if(0===e.data.code){sessionStorage.setItem("bigdata",b()(t.bigdataForm.nodeData)),t.stepIndex,t.tableData=JSON.parse(sessionStorage.getItem("bigdata")),t.cloudInfo=JSON.parse(sessionStorage.getItem("cloudInfo")),t.ciphertextPassword="";for(var a=0;a<t.cloudInfo.password.length;a++)t.ciphertextPassword+="*"}},function(e){})},changeNetworkName:function(e){this.$refs.bigdataForm.validateField("nodeData."+e+".network_name")},changeIp:function(e){this.$refs.bigdataForm.validateField("nodeData."+e+".network_ip")},changeMask:function(e){this.$refs.bigdataForm.validateField("nodeData."+e+".netmask")},initWebSocket:function(){var e="ws://"+window.location.host+"/message_code/";this.websock=new WebSocket(e),this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onmessage=this.websocketonmessage,this.websock.onclose=this.websocketclose},websocketonopen:function(e){this.websock.send(4)},websocketonerror:function(e){console.log("WebSocket连接发生错误")},websocketonmessage:function(e){var t=JSON.parse(e.data);1===t.code?this.$notify.error({title:"错误",message:t.message}):(this.initChart(t.data.percentage),this.showDeployType=t.data.type)},websocketclose:function(e){this.websock.close()},getDeployProcess:function(){this.initWebSocket()},initChart:function(e){var t=this.$echarts.init(document.getElementById("deploy")),a=e;console.log(a);var s={title:g()({text:a+"%",subtext:"已完成",textAlign:"center",textStyle:{fontWeight:"normal",color:"#757A97",fontSize:20},subtextStyle:{fontWeight:"bold",fontSize:16,color:"#757A97"},top:"90",x:"50%",y:"45%"},"textAlign","center"),xAxis:{show:!1},yAxis:{show:!1},series:[{name:"",bottom:100,type:"pie",radius:["50%","60%"],avoidLabelOverlap:!1,startAngle:225,color:[{type:"linear",x:0,y:0,x2:.4,y2:1,colorStops:[{offset:0,color:"#30C9AE"},{offset:1,color:"#30C9AE"}],globalCoord:!1},"none"],hoverAnimation:!1,legendHoverLink:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:75,name:"1"},{value:25,name:"2"}]},{name:"",type:"pie",radius:["50%","60%"],avoidLabelOverlap:!1,startAngle:315,color:["#e7e7e7","#fff","transparent"],hoverAnimation:!1,legendHoverLink:!1,clockwise:!1,z:10,labelLine:{normal:{show:!1}},data:[{value:270*(100-a)/360,name:""},{value:1,name:""},{value:100-270*(100-a)/360,name:""}]}]};t.setOption(s,!0)},deployBigData:function(){var e=this;this.$http({url:this.api.post_deploy_bigdatainfo,method:"post"}).then(function(t){0===t.data.code&&(e.bigdataUp=!0,1===e.checkedIndex?"kvm"===e.deployType?e.deployCloud():e.updateDb():"kvm"===e.deployType?e.checkUpdateList.indexOf("deploy_kvm")>-1&&e.updateCloud():(e.updateDb(),clearInterval(e.timer),clearInterval(e.interval)))},function(t){clearInterval(e.timer),clearInterval(e.interval)})},deployStorageImage:function(){var e=this;this.$http({url:this.api.post_deploy_storage_image,method:"post"}).then(function(t){0===t.data.code&&(e.mirroringUp=!0,1===e.checkedIndex?e.deployBigData():"kvm"===e.deployType?e.checkUpdateList.indexOf("update_bigdata")>-1?e.deployBigData():e.checkUpdateList.indexOf("deploy_kvm")>-1?e.updateCloud():(e.finishBtn=!1,clearInterval(e.timer),clearInterval(e.interval)):e.checkUpdateList.indexOf("update_bigdata")>-1&&e.deployBigData())},function(t){clearInterval(e.timer),clearInterval(e.interval)})},updateCloud:function(){var e=this;this.$http({url:this.api.updateCloud,method:"post"}).then(function(t){0===t.data.code&&(e.finishBtn=!1)},function(e){})},deployCloud:function(){var e=this;this.$http({url:this.api.post_deploy_cloud,method:"post"}).then(function(t){0===t.data.code&&(e.cloudUp=!0,e.finishBtn=!1,clearInterval(e.timer),clearInterval(e.interval),e.initChart(100))},function(t){clearInterval(e.timer),clearInterval(e.interval)})},deployDocker:function(){var e=this;this.$http({url:this.api.post_deploy_docker,method:"post"}).then(function(t){0===t.data.code&&(e.dockerUpgrade=!0,1===e.checkedIndex?"docker"===e.deployType&&e.deployStorageImage():e.checkUpdateList.indexOf("update_storage_image")>-1?e.deployStorageImage():e.checkUpdateList.indexOf("update_bigdata")>-1?e.deployBigData():(e.finishBtn=!1,clearInterval(e.timer),clearInterval(e.interval)))},function(t){clearInterval(e.timer),clearInterval(e.interval)})},startDeploy:function(){if(this.stepIndex=4,this.getJumpLink(),"kvm"===this.deployType)if(1===this.checkedIndex){this.deployStorageImage();var e=0,t=0,a=0,s="";this.timer=setInterval(function(){s="",60==++a&&(60==++t&&(e++,t=0),a=0),s+=e<10?"0"+e:e,s+=":",s+=t<10?"0"+t:t,s+=":",s+=a<10?"0"+a:a,document.getElementById("timetext").innerHTML=s},1e3),this.getDeployProcess()}else{this.checkUpdateList.indexOf("update_storage_image")>-1?this.deployStorageImage():this.checkUpdateList.indexOf("update_bigdata")>-1?this.deployBigData():this.updateCloud();var n=0,o=0,i=0,r="";this.timer=setInterval(function(){r="",60==++i&&(60==++o&&(n++,o=0),i=0),r+=n<10?"0"+n:n,r+=":",r+=o<10?"0"+o:o,r+=":",r+=i<10?"0"+i:i,document.getElementById("timetext").innerHTML=r},1e3),this.getDeployProcess()}else if(1===this.checkedIndex){this.deployDocker();var l=0,c=0,d=0,p="";this.timer=setInterval(function(){p="",60==++d&&(60==++c&&(l++,c=0),d=0),p+=l<10?"0"+l:l,p+=":",p+=c<10?"0"+c:c,p+=":",p+=d<10?"0"+d:d,document.getElementById("timetext").innerHTML=p},1e3),this.getDeployProcess()}else{this.checkUpdateList.indexOf("update_docker")>-1?this.deployDocker():this.checkUpdateList.indexOf("update_storage_image")>-1?this.deployStorageImage():this.checkUpdateList.indexOf("update_bigdata")>-1&&this.deployBigData();var u=0,m=0,h=0,g="";this.timer=setInterval(function(){g="",60==++h&&(60==++m&&(u++,m=0),h=0),g+=u<10?"0"+u:u,g+=":",g+=m<10?"0"+m:m,g+=":",g+=h<10?"0"+h:h,document.getElementById("timetext").innerHTML=g},1e3),this.getDeployProcess()}},updateDb:function(){var e=this;this.$http({url:this.api.updateDb,method:"post"}).then(function(t){0===t.data.code&&(e.finishBtn=!1,clearInterval(e.timer),clearInterval(e.interval))},function(e){})},getJumpLink:function(){var e=this;this.$http({url:this.api.getJumpIp,method:"post"}).then(function(t){2===e.checkedIndex&&"kvm"===e.deployType&&(e.form.consoleIp=t.data.ip),e.jumpIp="http://"+t.data.ip+"/#/login"},function(e){})},upgradBtn:function(e){this.selectIndex=e,2===e?"kvm"===this.deployType?this.checkUpdateList=["update_storage_image","update_bigdata","deploy_kvm"]:this.checkUpdateList=["update_storage_image","update_bigdata","update_docker"]:this.checkUpdateList=[]},jumpCloud:function(){window.open(this.jumpIp)},objSort:function(e){return function(t,a){var s=t[e],n=a[e];return isNaN(Number(s))||isNaN(Number(n))||(s=Number(s),n=Number(n)),s<n?-1:s>n?1:0}}},mounted:function(){this.getDeployStatus()}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("headers"),e._v(" "),a("el-main",{staticClass:"auto-main"},[a("div",{staticClass:"steps"},[a("el-steps",{attrs:{active:e.stepIndex,simple:""}},[a("el-step",[a("i",{staticClass:"step01",attrs:{slot:"icon"},slot:"icon"})]),e._v(" "),a("el-step",[a("i",{staticClass:"step02",attrs:{slot:"icon"},slot:"icon"})]),e._v(" "),a("el-step",[a("i",{staticClass:"step03",attrs:{slot:"icon"},slot:"icon"})]),e._v(" "),a("el-step",[a("i",{staticClass:"step04",attrs:{slot:"icon"},slot:"icon"})]),e._v(" "),a("el-step",[a("i",{staticClass:"step05",attrs:{slot:"icon"},slot:"icon"})])],1)],1),e._v(" "),a("div",{staticClass:"content"},[0===e.stepIndex?a("div",[e.showMode?a("div",{staticClass:"choice-mode"},e._l(e.lang.base.deploymentMode,function(t,s){return a("div",{class:["mode-box",e.activeIndex===s?"active":""]},[a("div",{staticClass:"mode-title"},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.title)+"\n\t\t\t\t\t\t\t")]),e._v(" "),a("div",{staticClass:"mode-desc"},[a("p",[e._v(e._s(t.desc))])]),e._v(" "),a("div",{class:["checkbox",e.activeIndex===s?"checked":"nocheck"],on:{click:function(a){return e.choseMode(s,t.title)}}})])}),0):e._e(),e._v(" "),e.showInstallationSource?a("div",{staticClass:"installation-source"},[a("span",[e._v(e._s(e.lang.base.selcetInstallSource))]),e._v(" "),a("el-select",{staticStyle:{width:"300px"},attrs:{placeholder:e.lang.base.selcetInstallSource},model:{value:e.installSource,callback:function(t){e.installSource=t},expression:"installSource"}},e._l(e.showInstallationSources,function(e){return a("el-option",{key:e.id,attrs:{label:e.SerialNumber,value:e.id}})}),1),e._v(" "),a("div",[a("el-checkbox",{staticStyle:{"margin-top":"40px"},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v(e._s(e.lang.base.joinUs))])],1),e._v(" "),a("span",{staticClass:"btnstyle",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{round:""},on:{click:e.installPrev}},[e._v(e._s(e.lang.common.prevStep))]),e._v(" "),a("el-button",{attrs:{type:"primary",round:"",disabled:""===e.installSource},on:{click:e.installNext}},[e._v(e._s(e.lang.common.nextStep))])],1)],1):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showUpgrade,expression:"showUpgrade"}]},[a("div",{staticClass:"upgrade-div"},[a("div",{staticClass:"left"},[a("ul",{staticClass:"upgrad-btn"},[a("li",{class:1===e.selectIndex?"active":"",on:{click:function(t){return e.upgradBtn(1)}}})])]),e._v(" "),a("div",{staticClass:"right"},[a("h5",[e._v(e._s(e.lang.base.upgradeSelect))]),e._v(" "),a("div",{staticClass:"checkbox-div"},[a("el-checkbox-group",{model:{value:e.checkUpdateList,callback:function(t){e.checkUpdateList=t},expression:"checkUpdateList"}},e._l("kvm"===e.deployType?e.lang.base.kvmupgradList:e.lang.base.dockerupgradList,function(t,s){return a("el-checkbox",{staticStyle:{"line-height":"50px"},attrs:{label:t.key}},[a("div",{staticClass:"checkbox-desc"},[a("div",{staticClass:"lefts"},[a("img",{attrs:{src:t.imgurl}})]),e._v(" "),a("div",{staticClass:"rights"},[a("h6",[e._v(e._s(t.name))]),e._v(" "),a("span",[e._v(e._s(t.desc))])])])])}),1)],1)])])])]):e._e(),e._v(" "),1===e.stepIndex?a("div",["kvm"===e.deployType&&!0===e.isShowNetwork?a("div",{staticClass:"cloudDiv"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.cloudrules}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.account,prop:"username"}},[a("el-input",{attrs:{disabled:e.disableCheck,placeholder:e.lang.base.accountPlaceholder},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.password,prop:"password"}},[a("el-input",{attrs:{type:"password",disabled:e.disableCheck,placeholder:e.lang.base.passwordPlaceholder},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),e.disableCheck?e._e():a("el-button",{staticStyle:{"margin-left":"10px","margin-top":"4px"},attrs:{type:"primary",round:"",size:"small"},on:{click:e.verifyPw}},[e._v(e._s(e.lang.base.check))])],1),e._v(" "),e.errorDialogVisible?a("el-row",[a("el-col",{attrs:{offset:3}},[a("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.lang.base.errorAlert))])])],1):e._e(),e._v(" "),!0===e.showNetwork?a("div",[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.publicNetwork}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changePub},model:{value:e.pubnetIndex,callback:function(t){e.pubnetIndex=t},expression:"pubnetIndex"}},e._l(e.publicNetwork,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e.name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.selectSubnet}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changeSubnet},model:{value:e.sunetIndex,callback:function(t){e.sunetIndex=t},expression:"sunetIndex"}},e._l(e.subnetName,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e.name}})}),1)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.subnetSegment}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择"},on:{change:e.changeSegment},model:{value:e.segment,callback:function(t){e.segment=t},expression:"segment"}},e._l(e.subnetList,function(e,t){return a("el-option",{key:t,attrs:{value:t,label:e.name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"consoleIp",label:e.lang.base.consoleIp,rules:[{required:!0,message:this.lang.common.required,trigger:"blur"},{validator:this.validateGateway,message:this.ipValidMessage,trigger:"change"},{validator:this.common.validateIpAddress,message:this.lang.base.ipAddressAlert,trigger:"change"}]}},[a("pana-ip-input",{attrs:{disable:e.disabledArr,placeholder:e.placeholderArr},nativeOn:{"!blur":function(t){return e.changeConsole(t)}},model:{value:e.form.consoleIp,callback:function(t){e.$set(e.form,"consoleIp",t)},expression:"form.consoleIp"}})],1)],1)],1),e._v(" "),e.ipIsOccupied?a("el-row",[a("el-col",{attrs:{span:10,offset:12}},[a("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.lang.base.ipIsOccupied))])])],1):e._e()],1):e._e()],1)],1):e._e(),e._v(" "),"docker"===e.deployType||"kvm"===e.deployType&&!1===e.isShowNetwork?a("div",{staticClass:"cloudDiv"},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px",rules:e.cloudrules}},[a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.account,prop:"username"}},[a("el-input",{attrs:{disabled:e.disableCheck,placeholder:e.lang.base.accountPlaceholder},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{label:e.lang.base.password,prop:"password"}},[a("el-input",{attrs:{type:"password",disabled:e.disableCheck,placeholder:e.lang.base.passwordPlaceholder},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1),e._v(" "),e.disableCheck?e._e():a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",round:"",size:"small"},on:{click:e.verifyPw}},[e._v(e._s(e.lang.base.check))]),e._v(" "),e.disableCheck?a("span",{staticStyle:{"line-height":"40px","padding-left":"10px",color:"#47ab9c"}},[e._v(e._s(e.lang.base.connectivitySuccess))]):e._e()],1),e._v(" "),e.errorDialogVisible?a("el-row",[a("el-col",{attrs:{offset:3}},[a("span",{staticStyle:{color:"#F56C6C"}},[e._v(e._s(e.lang.base.errorAlert))])])],1):e._e()],1)],1):e._e()]):e._e(),e._v(" "),2===e.stepIndex?a("div",[a("div",{staticClass:"bigData"},[1===e.deployMethod?a("div",{staticClass:"bigData-top"},[a("span",[e._v(e._s(e.lang.base.totalStorageSpace))]),e._v(" "),a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:e.storagePrecent}}),e._v(" "),a("span",{staticClass:"used"},[e._v(e._s(e.lang.base.used)+"："+e._s(e.storageUsed)+"/"+e._s(e.storageTotal)+"GB")])],1):e._e(),e._v(" "),a("div",{staticClass:"deploy-method"},[a("span",[e._v(e._s(e.lang.base.deployMethod))]),e._v(" "),a("el-radio-group",{staticClass:"radio-group",model:{value:e.deployMethod,callback:function(t){e.deployMethod=t},expression:"deployMethod"}},[a("el-radio",{attrs:{label:1}},[e._v(e._s(e.lang.base.ceph))]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v(e._s(e.lang.base.bareDisk))])],1)],1),e._v(" "),a("div",{staticClass:"bigdata-content"},[a("el-form",{ref:"bigdataForm",attrs:{model:e.bigdataForm,rules:e.bigdataRules}},[a("el-form-item",{attrs:{label:"",prop:""}},[e.bigdataForm.nodeData.length>0?a("el-tabs",{staticClass:"bigdata-tab",staticStyle:{height:"600px"},attrs:{"tab-position":"left"},on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},e._l(e.bigdataForm.nodeData,function(t,s){return a("el-tab-pane",{key:s,staticStyle:{height:"510px"},attrs:{label:t.nodeName,name:t.nodeName}},[a("el-row",[a("el-col",[a("span",{staticStyle:{"padding-left":"60px"}},[e._v(e._s(t.nodeName))])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"nodeData."+s+".network_name",rules:[{required:!0,message:e.lang.common.required,trigger:"blur"}],label:e.lang.base.nic,"label-width":"120px"}},[a("el-select",{staticStyle:{width:"100%"},on:{change:function(t){return e.changeNetworkName(s)}},model:{value:t.network_name,callback:function(a){e.$set(t,"network_name",a)},expression:"item.network_name"}},e._l(e.nicList,function(e){return a("el-option",{key:e.network_name,attrs:{value:e.network_name,label:e.network_name}})}),1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{validator:e.common.validateIpAddress,message:e.lang.base.ipAddressAlert,trigger:"blur"}],prop:"nodeData."+s+".network_ip",label:e.lang.base.ipAddress,"label-width":"120px"}},[a("pana-ip-input",{nativeOn:{"!blur":function(t){return e.changeIp(s)}},model:{value:t.network_ip,callback:function(a){e.$set(t,"network_ip",a)},expression:"item.network_ip"}})],1)],1)],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px","border-bottom":"1px solid #e0e0e0","padding-bottom":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{validator:e.common.validateNetMask,message:e.lang.base.netMaskAlert,trigger:"blur"}],prop:"nodeData."+s+".netmask",label:e.lang.base.subnetMask,"label-width":"120px"}},[a("pana-ip-input",{nativeOn:{"!blur":function(t){return e.changeMask(s)}},model:{value:t.netmask,callback:function(a){e.$set(t,"netmask",a)},expression:"item.netmask"}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",[a("div",{staticStyle:{"margin-left":"60px","margin-top":"20px"}},[e._v(e._s(e.lang.base.distributionNode))])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{type:"integer",min:1,max:t.cpuTotal-t.cpuUsed-1,message:t.cpuTotal-t.cpuUsed==0?e.common.formatMsg(e.lang.base.noResource,{item:"cpu"}):e.common.formatMsg(e.lang.base.maxInter,{max:t.cpuTotal-t.cpuUsed-1})}],prop:"nodeData."+s+".cpu",label:e.lang.base.cpu,"label-width":"120px"}},[a("el-input",{attrs:{type:"number"},model:{value:t.cpu,callback:function(a){e.$set(t,"cpu",e._n(a))},expression:"item.cpu"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:Math.ceil(t.cpuUsed/t.cpuTotal*100)}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v(e._s(e.lang.base.used)+":"+e._s(t.cpuUsed)+"/"+e._s(t.cpuTotal)+e._s(e.lang.base.nucleus))])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{type:"integer",min:1,max:t.memTotal-t.memUsed-1,message:t.memTotal-t.memUsed==0?e.common.formatMsg(e.lang.base.noResource,{item:"内存"}):e.common.formatMsg(e.lang.base.maxInter,{max:t.memTotal-t.memUsed-1})}],prop:"nodeData."+s+".mem",label:e.lang.base.memory,"label-width":"120px"}},[a("el-input",{attrs:{type:"number"},model:{value:t.mem,callback:function(a){e.$set(t,"mem",e._n(a))},expression:"item.mem"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:Math.ceil(t.memUsed/t.memTotal*100)}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v(e._s(e.lang.base.used)+":"+e._s(t.memUsed)+"/"+e._s(t.memTotal)+"GB")])])],1),e._v(" "),1===e.deployMethod?a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{rules:[{required:!0,message:e.lang.common.required,trigger:"blur"},{type:"integer",min:1,max:t.diskTotal-t.diskUsed-1,message:t.diskTotal-t.diskUsed==0?e.common.formatMsg(e.lang.base.noResource,{item:"存储"}):e.common.formatMsg(e.lang.base.maxInter,{max:t.diskTotal-t.diskUsed-1})}],prop:"nodeData."+s+".bigdata",label:e.lang.base.storage,"label-width":"120px"}},[a("el-input",{attrs:{type:"number"},model:{value:t.bigdata,callback:function(a){e.$set(t,"bigdata",e._n(a))},expression:"item.bigdata"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:7}},[a("el-progress",{staticClass:"progress",attrs:{"stroke-width":10,"show-text":!1,percentage:Math.ceil(t.diskUsed/t.diskTotal*100)}})],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("span",[e._v(e._s(e.lang.base.used)+":"+e._s(t.diskUsed)+"/"+e._s(t.diskTotal)+"GB")])])],1):e._e(),e._v(" "),2===e.deployMethod?a("el-row",{staticStyle:{"margin-top":"30px"}},[a("el-form-item",{attrs:{prop:"nodeData."+s+".dev_path",label:e.lang.base.bareDiskStorage,"label-width":"120px"}},[a("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:function(t){return e.handleCheckAllChange(s)}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),e._v(" "),a("div",{staticStyle:{margin:"15px 0"}}),e._v(" "),a("el-checkbox-group",{on:{change:function(t){return e.handleCheckedCitiesChange(s)}},model:{value:t.dev_path,callback:function(a){e.$set(t,"dev_path",a)},expression:"item.dev_path"}},e._l(t.diskList,function(t){return a("el-checkbox",{key:t.byId,attrs:{label:t.byId}},[e._v(e._s(t.name))])}),1)],1)],1):e._e()],1)}),1):e._e()],1)],1)],1)]),e._v(" "),a("el-dialog",{attrs:{title:e.lang.common.alert,visible:e.deployedData,width:"30%",center:""},on:{"update:visible":function(t){e.deployedData=t}}},[a("div",{staticClass:"alert-content"},[a("p",[e._v(e._s(e.lang.base.bigdataDeployed))]),e._v(" "),a("span",[a("i",{staticClass:"el-icon-circle-check"})])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancleDeployedData}},[e._v(e._s(e.lang.common.cancle))]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.ensureDeployedData}},[e._v(e._s(e.lang.common.confirm))])],1)])],1):e._e(),e._v(" "),3===e.stepIndex?a("div",[a("div",{staticClass:"confirm-info"},[a("h5",[e._v(e._s(e.lang.base.cloud))]),e._v(" "),a("ul",{staticClass:"cloud-info"},[a("li",[e._v(e._s(e.lang.base.account)+": "),a("span",[e._v(e._s(e.cloudInfo.username))])]),e._v(" "),a("li",[e._v(e._s(e.lang.base.password)+": "),a("span",[e._v(e._s(e.ciphertextPassword))])]),e._v(" "),"kvm"===e.deployType&&!0===e.isShowNetwork?a("li",[e._v(e._s(e.lang.base.consoleIp)+": "),a("span",[e._v(e._s(e.cloudInfo.consoleIp))])]):e._e()]),e._v(" "),a("h5",[e._v(e._s(e.lang.base.bigData))]),e._v(" "),a("el-table",{staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"nodeName",label:e.lang.base.node}}),e._v(" "),a("el-table-column",{attrs:{prop:"network_name",label:e.lang.base.nic}}),e._v(" "),a("el-table-column",{attrs:{prop:"network_ip",label:e.lang.base.ipAddress}}),e._v(" "),a("el-table-column",{attrs:{prop:"netmask",label:e.lang.base.subnetMask}}),e._v(" "),a("el-table-column",{attrs:{prop:"cpu",label:e.lang.base.cpu}}),e._v(" "),a("el-table-column",{attrs:{prop:"mem",label:e.lang.base.memory}}),e._v(" "),a("el-table-column",{attrs:{prop:"bigdata",label:e.lang.base.storage}})],1)],1)]):e._e(),e._v(" "),4===e.stepIndex?a("div",[a("div",{staticClass:"deploy-info"},[a("div",{staticClass:"wheel-planting"},[a("el-carousel",{attrs:{"indicator-position":"outside"}},e._l(e.list,function(e,t){return a("el-carousel-item",{key:t},[a("img",{attrs:{src:e,alt:""}})])}),1)],1),e._v(" "),a("div",{staticClass:"deploy-content"},[a("div",{ref:"deploy",attrs:{id:"deploy"}}),e._v(" "),a("div",{staticStyle:{position:"absolute",top:"600px",left:"330px"}},[a("span",{staticStyle:{width:"10px",height:"10px","border-radius":"50%",display:"inline-block",background:"#30C9AE"}}),e._v(" "),a("span",{staticStyle:{color:"#757A97"},attrs:{id:"deploys"}},[e._v(e._s(e.showDeployType))])]),e._v(" "),a("div",{staticClass:"duration"},[a("div",{attrs:{id:"txt"}},[e._v(e._s(e.lang.base.duration)+":"),a("span",{attrs:{id:"timetext"}})])]),e._v(" "),a("div",{staticClass:"deploy-status"},[1===e.checkedIndex&&"docker"===e.deployType||e.checkUpdateList.indexOf("update_docker")>-1?a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.dockerUpgrade,disabled:""},model:{value:e.dockerUpgrade,callback:function(t){e.dockerUpgrade=t},expression:"dockerUpgrade"}}):e._e(),e._v(" "),1===e.checkedIndex||e.checkUpdateList.indexOf("update_storage_image")>-1?a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.uploadMirroring,disabled:""},model:{value:e.mirroringUp,callback:function(t){e.mirroringUp=t},expression:"mirroringUp"}}):e._e(),e._v(" "),1===e.checkedIndex||e.checkUpdateList.indexOf("update_bigdata")>-1?a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.bigData,disabled:""},model:{value:e.bigdataUp,callback:function(t){e.bigdataUp=t},expression:"bigdataUp"}}):e._e(),e._v(" "),1===e.checkedIndex&&"kvm"===e.deployType||e.checkUpdateList.indexOf("deploy_kvm")>-1?a("el-switch",{staticClass:"switch-btn",attrs:{"inactive-text":e.lang.base.cloudPlatform,disabled:""},model:{value:e.cloudUp,callback:function(t){e.cloudUp=t},expression:"cloudUp"}}):e._e()],1)])])]):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer footerright",attrs:{slot:"footer"},slot:"footer"},[0===e.stepIndex&&e.showInstallUpgrading||0===e.stepIndex&&e.showUpgrade||e.stepIndex<4&&e.stepIndex>0?a("el-button",{attrs:{round:""},on:{click:function(t){return e.checkStep(-1)}}},[e._v(e._s(e.lang.common.prevStep))]):e._e(),e._v(" "),0===e.stepIndex&&e.showInstallUpgrading||0===e.stepIndex&&e.showUpgrade||e.stepIndex<3&&e.stepIndex>0?a("el-button",{attrs:{round:"",type:"primary"},on:{click:function(t){return e.checkStep(1)}}},[e._v(e._s(e.lang.common.nextStep))]):e._e(),e._v(" "),2===e.stepIndex?a("el-button",{attrs:{round:""},on:{click:e.skip}},[e._v(e._s(e.lang.common.skip))]):e._e(),e._v(" "),3===e.stepIndex?a("el-button",{attrs:{round:"",type:"primary"},on:{click:e.startDeploy}},[e._v(e._s(e.lang.common.startDeployment))]):e._e(),e._v(" "),4===e.stepIndex?a("el-button",{attrs:{round:"",type:"primary",disabled:e.finishBtn},on:{click:e.jumpCloud}},[e._v(e._s(e.lang.common.finishDeploy))]):e._e()],1)])])],1)},staticRenderFns:[]};var O=a("C7Lr")(E,M,!1,function(e){a("PYwY"),a("Pt1F")},"data-v-03adb4ea",null).exports;s.default.use(o.a);var F=new o.a({routes:[{path:"/",name:"main",component:d,redirect:"index",children:[{path:"index",name:"index",component:m},{path:"baseInfo",name:"baseInfo",component:O}]}]}),P=a("NxjZ"),T=a.n(P),B=(a("zlkP"),a("t+Gu"),a("N8z9"),a("GI30"),a("HBSQ"),{header:{slogn:"筋斗云自动部署"},common:{prevStep:"上一步",nextStep:"下一步",skip:"跳过",startDeployment:"开始部署",finishDeploy:"完成部署",required:"必填项",alert:"提示",cancle:"取消",confirm:"确认",success:"成功",error:"错误",ipOccupancy:"ip被占用",ipSuccess:"ip没被占用",warningTooLargeIpNum:"输入数字不合法，已重置为最大值"},base:{baseInfo:"基础配置",domeCloudConfiguration:"筋斗云3.2配置",bigDataConfiguration:"大数据配置",confirmationInformation:"确认信息",startDeployment:"开始部署",finishDeploy:"完成部署",deploymentMode:[{title:"Docker",desc:"筋斗云平台的默认部署方式，平台构建在Docker容器之上，轻量级，启动速度快且资源利用率高，自动任务调度，实现高可用功能。"},{title:"KVM",desc:"筋斗云平台构建在KVM虚拟机中，通过软件的方式实现筋斗云平台和数据库的高可用，资源占用较高且消耗一定的网络资源，大规模部署时推荐使用。"}],selcetInstallSource:"选择安装源：",joinUs:"加入我们的用户体验计划",account:"账户名",password:"密码",publicNetwork:"公有网络",selectSubnet:"选择子网",subnetSegment:"子网网段",consoleIp:"控制台IP",check:"检测连通性",accountPlaceholder:"请输入账号",passwordPlaceholder:"请输入密码",connectSuccess:"链接成功",errorAlert:"用户名或密码错误",checkOccupancyGateway:"检测ip是否被占用",totalStorageSpace:"总存储空间:",ceph:"ceph",bareDisk:"裸盘",deployMethod:"部署方式:",bigDataPool:"大数据池",ipAddress:"IP地址",subnetMask:"子网掩码",cpu:"cpu(核)",memory:"内存(GB)",storage:"存储(GB)",bareDiskStorage:"存储",nodes:[{hostName:"节点1"},{hostName:"节点2"},{hostName:"节点3"},{hostName:"节点4"}],cloud:"筋斗云",bigData:"大数据",node:"节点",nic:"网卡",upgradeSelect:"升级功能选择",kvmupgradList:[{key:"deploy_kvm",name:"筋斗云",imgurl:"/static/image/cloud-icon.png",desc:'基于业务整体环境资源组成"业务池"'},{key:"update_bigdata",name:"大数据",imgurl:"/static/image/bigdata-icon.png",desc:"让大数据以云的便捷性享受物理机的性能"},{key:"update_storage_image",name:"智能存储",imgurl:"/static/image/storage-icon.png",desc:"提供文件、对象、块三种不同类型的存储"}],dockerupgradList:[{key:"update_docker",name:"筋斗云",imgurl:"/static/image/cloud-icon.png",desc:'基于业务整体环境资源组成"业务池"'},{key:"update_bigdata",name:"大数据",imgurl:"/static/image/bigdata-icon.png",desc:"让大数据以云的便捷性享受物理机的性能"},{key:"update_storage_image",name:"智能存储",imgurl:"/static/image/storage-icon.png",desc:"提供文件、对象、块三种不同类型的存储"}],noResource:"没有可用的{{item}}资源",maxInter:"请输入1-{{max}}的整数",used:"已使用",ipAddressAlert:"请输入合法的ip地址",netMaskAlert:"请输入合法的子网掩码",distributionNode:"分配节点资源",nucleus:"核",consoleIpRange:"控制台IP范围在{{start}}~{{end}}之间",deploying:"正在部署",duration:"历时",cloudPlatform:"云平台",uploadMirroring:"智能存储",bigdataDeployed:"已存在数据，是否接着部署",dockerUpgrade:"筋斗云",errorNodeInfo:"节点信息未填写完整, 至少需要配置3个节点",warning:"警告",ipIsOccupied:"该IP已被占用，请重新输入",connectivitySuccess:"连通性检测成功"}}),R=a("hRKE"),$=a.n(R),Z=a("ZLEe"),j=a.n(Z),z={statusClass:function(e){switch(e){case"ACTIVE":return"cloud-success";case"ERROR":return"cloud-error";case"SUSPENDED":return"cloud-fault";case"SHUTOFF":return"cloud-info";case"PAUSED":case"RESIZE":case"REVERT_RESIZE":case"UNKNOWN":return"cloud-warning";default:return"cloud-default"}},cloudFilter:function(e,t){return t?e.filter(function(e){return j()(e).some(function(a){var s=e[a];if(s)return-1!==(s+="").indexOf(t)})}):e},pagination:function(e,t,a){if(t=t||10,a=a||1,e.length<=t)return e;var s=Math.ceil(e.length/t);s<a&&(a=s);var n=t*(a-1),o=t*a;return e.slice(n,o)},formatGetUrl:function(e){var t=this,a=[];try{var s=function(s){if(e.hasOwnProperty(s)&&t.isArray(e[s]))e[s].forEach(function(e){a.push(s+"="+e)});else if("object"===$()(e[s]))for(var n in e[s])e[s].hasOwnProperty(n)&&a.push(s+"["+n+"]="+e[s][n]);else a.push(s+"="+e[s])};for(var n in e)s(n);return"?"+a.join("&")}catch(e){throw new Error(e)}},isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},sortNumber:function(e,t){return e-t},formatCapacity:function(e,t,a,s){var n=["B","KB","MB","GB","TB","PB","EB"];if(t=(t=t||"MB").toUpperCase(),0!==a&&(a=a||2),!1!==s&&(s=!0),isNaN(e)||""===e)return{value:e,unit:t};if(-1===n.indexOf(t))return{value:e,unit:t};parseInt(a)!==a&&(a=2);for(var o=n.indexOf(t),i=e;o<n.length-1&&i/1024>=1&&(s||i%1024==0);)i/=1024,o++;return{value:i=Math.round(i*Math.pow(10,a))/Math.pow(10,a),unit:n[o]}},switchCapacity:function(e,t,a,s){var n=["B","KB","MB","GB","TB","PB","EB"];if(isNaN(e)||""===e)return e;if(0!==s&&(s=s||2),t=t.toUpperCase(),a=a.toUpperCase(),-1===n.indexOf(t)||-1===n.indexOf(a))return e;s=parseInt(s);var o=n.indexOf(t)-n.indexOf(a);return o>=0?e*=Math.pow(1024,o):(o=-o,e/=Math.pow(1024,o)),Math.round(e*Math.pow(10,s))/Math.pow(10,s)},dropEmptyParameter:function(e,t){for(var a in t=null==t?[]:t,e){if(e.hasOwnProperty(a)&&("[object Array]"===Object.prototype.toString.call(e[a])||"[object Object]"===Object.prototype.toString.call(e[a]))){e[a]=this.dropEmptyParameter(e[a],t);var s=b()(e[a]);"{}"!==s&&"[]"!==s&&"[null]"!==s||delete e[a]}e.hasOwnProperty(a)&&t.indexOf(e[a])<0&&(null==e[a]||""===e[a]||"NaN"===e[a].toString())&&delete e[a]}return e},formatMsg:function(e,t){var a=e.match(/{{[A-Za-z0-9\-_]+}}/g);if(null!=a)for(var s=0;s<a.length;s++){var n=a[s].replace("{{","");n=n.replace("}}",""),e=e.replace(a[s],t[n])}return e},forceBoolean:function(e){return null!=e&&("number"!=typeof e||isNaN(e)?"string"==typeof e?isNaN(Number(e))?"true"===e:e>0:e:e>0)},switchToDotDecimal:function(e){for(var t=parseInt(e/8),a=e%8,s=[128,64,32,16,8,4,2,1],n=[],o=0,i=0;i<t;i++)n.push(255);for(var r=0;r<a;r++)o+=s[r];for(n.push(o);n.length<4;)n.push(0);return n.join(".")},switchToNumberCount:function(e){for(var t={255:8,254:7,252:6,248:5,240:4,224:3,192:2,128:1,0:0},a=0,s=e.split("."),n=0;n<s.length;n++)a+=t[s[n]];return a},messageTip:function(e,t,a){e.$notify({type:t,message:a})},validateName:function(e,t,a){!1===/^[A-Za-z_\u4E00-\u9FA5]+$/.test(t)?a(new Error("只能由英文、汉字或下划线组成")):a()},validateName2:function(e,t,a){!1===/^[A-Za-z0-9_\u4E00-\u9FA5]+$/.test(t)?a(new Error("只能由中文字符、英文字母（a-zA-Z）、数字（0-9）、下划线（_）组成")):a()},validateName3:function(e,t,a){!1===/^[A-Za-z0-9_\-.\u4E00-\u9FA5]+$/.test(t)?a(new Error("只能输入字母、数字、汉字、横线、下划线以及点")):a()},validateName4:function(e,t,a){t&&!1===/^[A-Za-z][A-Za-z0-9_]*$/.test(t)?a(new Error("只能输入数字、字母或下划线，且只能以字母开头")):a()},validateName6:function(e,t,a){!1===/^(\w|[\u4E00-\u9FA5]|-)*$/.test(t)?a(new Error("只能输入字母、数字、汉字、横线以及下划线")):a()},validatedestinationIp:function(e,t,a){""===t||null==t||/^((?:(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))))$/.test(t)?a():a(new Error("请输入目的IP地址，例如：192.168.0.1"))},validatedestinationNet:function(e,t,a){""===t||null==t||/^((?:(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(?:25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))))[\/]([1-9]|[1-2][0-9]|[3][0]|[3][1])$/.test(t)?a():a(new Error("请输入子网地址，例如：192.168.0.1/24"))},validateName7:function(e,t,a){!1===/^[A-Za-z0-9_-]+$/.test(t)?a(new Error("只能输入字母、数字、横线以及下划线")):a()},validateWorkGroup:function(e,t,a){t&&!1===/^[A-Za-z0-9][A-Za-z0-9_]*$/.test(t)?a(new Error("只能输入数字、字母或下划线，且只能以数字或字母开头")):a()},validatePassword:function(e,t,a){t&&!1===/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[!-@.^_%,:/])[A-Za-z\d!-@.^_%,:/]{8,16}/.test(t)?a(new Error("密码长度为8-16个字符，且至少包含一个大写字母，一个小写字母，一个数字和一个特殊字符。特殊字符包括! - @ . ^ _ % , : /")):a()},validateCpu:function(e,t,a){1===t||t>1&&t%2==0?a():a(new Error("请输入1或大于1的偶数"))},validateNumberRange:function(e,t,a){var s=null==e.min||""===e.min||isNaN(e.min)?-1/0:e.min,n=null==e.max||""===e.max||isNaN(e.max)?1/0:e.max;(""===t||null==t||isNaN(t))&&a(),t>=s&&t<=n?a():a(Error(e.message))},validateName5:function(e,t,a){t&&!1===/^[A-Za-z0-9_]*$/.test(t)?a(new Error("只能输入数字、字母或下划线")):a()},validateHostname:function(e,t,a){t&&!1===/^[A-Za-z][A-Za-z0-9-]*$/.test(t)?a(new Error("只能输入数字、字母或横线，且只能以字母开头")):a()},validateNumberType:function(e,t,a){""!==t&&null!=t&&isNaN(t)?a(new Error(e.message)):(e.type="number",a())},validateIntegerType:function(e,t,a){var s=/^[+-]?0$|^([+-]?[1-9])[0-9]*$/;null!=e.startWithZero&&!0===e.startWithZero&&(s=/^[0-9]*$/),""===t||null==t||s.test(t)?(e.type="number",a()):a(new Error(e.message))},validateIpAddress:function(e,t,a){""===t||null==t||/^(?=(\b|\D))((([1-9]|\d{2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.)(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){2}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))$/.test(t)?a():a(new Error(e.message))},validateCidr:function(e,t,a){""===t||null==t||/^(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))\/(0|0?[1-9]|1[0-9]|2[0-9]|3[0-1])$/.test(t)?a():a(new Error(e.message))},validateNetworkName:function(e,t,a){""===t||null==t||/^[A-Za-z0-9_\-\u4E00-\u9FA5]*$/.test(t)?a():a(new Error(e.message))},validateDefaultName:function(e,t,a){""===t||null==t||/^[A-Za-z\u4E00-\u9FA5][A-Za-z0-9_\-\u4E00-\u9FA5]*$/.test(t)?a():a(new Error(e.message))},validatePhone:function(e,t,a){""===t||null==t||!0===/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(t)?a():a(new Error(e.message))},validateEmail:function(e,t,a){""===t||null==t||!0===/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/.test(t)?a():a(new Error(e.message))},validateserviceEmail:function(e,t,a){""===t||null==t||!0===/^([a-zA-Z0-9-_@]{1,63}\.){1,8}[a-zA-Z0-9]{1,63}$/.test(t)?a():a(new Error(e.message))},validateMac:function(e,t,a){!1===/^[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}:[A-Fa-f\d]{2}$/.test(t)?a(new Error("请输入正确的mac地址")):a()},validateNetMask:function(e,t,a){var s=[255,254,252,248,240,224,192,128,0],n=!0,o=255,i=t.split(".").map(function(e){return parseInt(e)});4!==i.length?n=!1:i.map(function(e){(255!==o&&0!==e||s.indexOf(e)<0)&&(n=!1),o=e}),!0===n?a():a(new Error(e.message))},validateDnsServers:function(e,t,a){""!==t&&null!=t||a();var s=!0,n=/^(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))$/;t.split("\n").map(function(e){!1===n.test(e)&&(s=!1)}),!0===s?a():a(new Error(e.message))},validateHostRoutes:function(e,t,a){""!==t&&null!=t||a();var s=!0,n=/^(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))$/,o=/^(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))\/(0?[1-9]|1[0-9]|2[0-9]|3[0-1])$/;t.split("\n").map(function(e){var t=e.split(",");!1!==o.test(t[0])&&!1!==n.test(t[1])||(s=!1)}),!0===s?a():a(new Error(e.message))},validateStorageName:function(e,t,a){""===t||null==t||/^[A-Za-z_][A-Za-z0-9_]*$/.test(t)?a():a(new Error(e.message))},getLargerIp:function(e,t){var a=/^(?=(\b|\D))(((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))\.){3}((\d{1,2})|(1\d{1,2})|(2[0-4]\d)|(25[0-5]))(?=(\b|\D))$/;a.test(e)&&a.test(t)||new Error("parameter is not a valid ip");var s=e,n=!1,o=e.split("."),i=t.split(".");return o.map(function(a,o){a!==i[o]&&!1===n&&(s=parseInt(a)>parseInt(i[o])?e:t,n=!0)}),s},deepCopyByJson:function(e){return JSON.parse(b()(e))},validateLinuxMask:function(e,t,a){null==t||""===t||!0===/^[0246]?[0-7]{3}$/.test(t)?a():a(new Error(e.message))},arrayMerge:function(e,t){t.map(function(t){-1===e.indexOf(t)&&e.push(t)})},getRangeInCidr:function(e){for(var t=e.split("/"),a=t[0],s=t[1],n=a.split("."),o=0,i=[],r=[];o<4;){if(0===s)3===o?(i[o]=1,r[o]=254):(i[o]=0,r[o]=255);else if(s<8){for(var l=0,c=[],d=parseInt(n[o]),p=[],u=[],m=[],h=0;l<8;)l<s?c.push(1):c.push(0),l++;for(p=this.switchSystem(d,2,"array");p.length<8;)p.splice(0,0,0);for(;h<8;)h<s?p[h]===c[h]?(u.push(p[h]),m.push(p[h])):(u.push(0),m.push(0)):(u.push(0),m.push(1)),h++;i[o]=this.switchtoDecimal(u.join(""),2),r[o]=this.switchtoDecimal(m.join(""),2),3===o&&(i[o]++,r[o]--),s=0}else i[o]=n[o],r[o]=n[o],s-=8;o++}return{start:i.join("."),end:r.join(".")}},switchSystem:function(e,t,a){var s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},n=[];for(t=!0===isNaN(t)||t>16||t<2?2:t,a=null==a||-1===["array","string"].indexOf(a)?"string":a;e>0;)n.unshift(s[e%t]),e=Math.floor(e/t);return"string"===a?n.join(""):n},switchtoDecimal:function(e,t){if(e=e.toLowerCase(),!1===/^[0-9a-f]*$/.test(e)||t<2||t>16)return!1;for(var a=e.split("").reverse(),s={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15},n=0,o=0;o<a.length;o++)n+=s[a[o]]*Math.pow(t,o);return n},getStringPixel:function(e){var t=["1","i","l","j","I"],a=["W","M","N","O","Q"],s=/^[\u4E00-\u9FA5]$/,n=0;return e.split("").map(function(e){!0===s.test(e)||a.indexOf(e)>-1?n+=15:t.indexOf(e)>-1?n+=4:n+=8}),n},is_system_admin:function(){var e=JSON.parse(sessionStorage.getItem("panaUser"));return!!e.hasOwnProperty("is_admin")&&parseInt(e.is_admin&&e.level)>0},permissionManage:function(e,t,a){var s=e.common.formatGetUrl({pool_id:0}),n=!1;e.checkError(e.$http({url:e.api.management.pool_user+s,method:"get"}),function(e){e.data.filter(function(e){if(e.pool==t)return n=e.is_admin,!0}),n||a()})},sort:function(e,t,a,s){var n="",o="";return this.isArray(a)||(a=[]),this.isArray(s)||(s=[]),t.sort(function(t,i){return-1!==a.indexOf(e.prop)?"ascending"===e.order?isNaN(t[e.prop])?parseFloat(t[e.prop])-parseFloat(i[e.prop]):t[e.prop]-i[e.prop]:isNaN(t[e.prop])?parseFloat(i[e.prop])-parseFloat(t[e.prop]):i[e.prop]-t[e.prop]:(-1!==s.indexOf(e.prop)?(n=t[e.prop][0]||"",o=i[e.prop][0]||""):(n=t[e.prop]||"",o=i[e.prop]||""),"ascending"===e.order?n<o?-1:n>o?1:0:n>o?-1:n<o?1:0)})},setRole:function(e){if("True"===e.is_start_admin)e.user_info.level>0||e.pool_id.length>0?e.user_info.role="super":e.user_info.role="normal";else switch(e.user_info.level){case 1:e.user_info.role="admin";break;case 2:e.user_info.role="security";break;case 3:e.user_info.role="audit";break;default:e.pool_id.length>0?e.user_info.role="admin":e.user_info.role="normal"}return e.user_info.pool_id=e.pool_id,e},hasDuplicate:function(e){return!e.every(function(t){return t=t.toString(),e.indexOf(t)===e.lastIndexOf(t)})},clearTimer:function(e){e.timer.map(function(e){clearInterval(e)}),e.timer=[]},validateCurrentTime:function(e,t,a){t?t<(new Date).getTime()?a(new Error(e.message)):a():a()},submitForm:function(e,t){"Enter"===e.code&&t()},decodeBitXor:function(e,t){var a="";return e.split("").map(function(e){var s=e.charCodeAt();s^=t,a+=String.fromCharCode(s)}),a}},V=a("84iU"),G=a.n(V),W=a("lOj6"),Y=a.n(W),J=a("MpgJ"),H=a.n(J),q=a("e9aj"),Q=a.n(q),X=a("KPSb"),K=a.n(X);s.default.config.productionTip=!1,s.default.prototype.$echarts=Q.a,s.default.prototype.lang=B,s.default.prototype.api=H.a,s.default.prototype.host=Y.a.baseURL,s.default.prototype.$http=G.a.create(Y.a),s.default.prototype.common=z,s.default.prototype.$md5=K.a,s.default.prototype.STATIC_URL="../static/",s.default.use(T.a),new s.default({el:"#app",router:F,components:{App:n.default},template:"<App/>"})},PYwY:function(e,t){},Pt1F:function(e,t){},PvZD:function(e,t){},Sssm:function(e,t){},Urip:function(e,t){},Vgrq:function(e,t){},XrrZ:function(e,t){},Xvun:function(e,t){},ZVvc:function(e,t,a){"use strict";var s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};t.a=s},i2hE:function(e,t){},l42E:function(e,t){},lOj6:function(e,t){e.exports={baseURL:"http://"+window.location.host}},sEFh:function(e,t){},"t+Gu":function(e,t){},xWyL:function(e,t){},zlkP:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.c7ea41057592d4e3203d.js.map