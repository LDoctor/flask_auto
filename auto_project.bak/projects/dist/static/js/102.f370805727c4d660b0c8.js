webpackJsonp([102],{FcJD:function(t,e){},sjQS:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"auditManage",components:{"pana-breadcrumb":a("1JPr").a},data:function(){return{pageSize:10,auditSearch:"",auditTable:[],auditSelectionIds:[],auditPage:1,auditTotal:0,auditType:{1:this.lang.auditManage.user,2:this.lang.auditManage.department,3:this.lang.auditManage.role},loading:!1}},methods:{switchAuditPage:function(t){this.auditPage=t,this.getAuditList()},getAuditList:function(){var t=this;this.loading=!0;var e={search:this.auditSearch,page:this.auditPage};this.checkError(this.$http({url:this.api.management.get_approvals+this.common.formatGetUrl(e),method:"get"}),function(e){t.loading=!1,t.auditTable=e.data,t.auditTotal=e.total},function(){t.loading=!1})},searchAudit:function(){this.auditPage=1,this.getAuditList()},audit:function(t,e){var a=this;this.checkError(this.$http({url:this.common.formatMsg(this.api.management.put_approvals_detail,{id:t.id})+"?type="+e,method:"put",data:{cover_operator_id:t.cover_operator_id,audit_type:t.audit_type}}),function(){a.$notify({title:a.lang.common.success,type:"success",message:a.lang.auditManage.auditSuccess}),a.getAuditList()})}},mounted:function(){this.getAuditList()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{attrs:{type:"flex",direction:"vertical"}},[a("pana-breadcrumb"),t._v(" "),a("el-main",[a("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"end"}},[a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:t.lang.common.search,"suffix-icon":"el-icon-search"},on:{change:t.searchAudit},model:{value:t.auditSearch,callback:function(e){t.auditSearch=e},expression:"auditSearch"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:t.getAuditList}})],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:t.auditTable,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{type:"selection"}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.auditManage.username,prop:"cover_operator_name"}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.common.type},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.auditType[e.row.audit_type])+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.auditManage.operator,prop:"username"}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.common.description,prop:"description"}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.auditManage.applyTime,prop:"create_time"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("utc2beijing")(e.row.create_time))+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.common.operation},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.audit(e.row,"agree")}}},[t._v("\n                        "+t._s(t.lang.auditManage.agree)+"\n                    ")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.audit(e.row,"refuse")}}},[t._v("\n                        "+t._s(t.lang.auditManage.reject)+"\n                    ")])]}}])})],1),t._v(" "),a("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[t.auditTotal/t.pageSize>1?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":t.lang.common.prevPage,"next-text":t.lang.common.nextPage,"page-count":t.currentTotal/t.pageSize%t.pageSize==0?t.currentTotal/t.pageSize:t.currentTotal/t.pageSize+1},on:{"current-change":t.switchAuditPage}}):t._e()],1)],1)],1)},staticRenderFns:[]};var o=a("C7Lr")(n,i,!1,function(t){a("FcJD")},"data-v-45350b38",null);e.default=o.exports}});