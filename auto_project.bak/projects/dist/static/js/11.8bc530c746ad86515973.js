webpackJsonp([11],{"52R2":function(t,e){},"9MN4":function(t,e){},PF0I:function(t,e){},PYq2:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("3cXf"),r=o.n(a),n=o("1JPr"),l=o("aA9S"),i=o.n(l),s={name:"pana-attach-subnet",props:{show:Boolean,routerId:String},methods:{closeModal:function(t){i()(this.$data,this.$options.data.call(this)),t=t||!1,this.$emit("closeModal",t)},attachSubnet:function(){this.disable=!0;var t=this,e=this.form;this.$refs.form.validate(function(o){o?(e=t.common.dropEmptyParameter(e),t.checkError(t.$http({url:t.common.formatMsg(t.api.cloud.post_routers_detail_add_router_interfaces,{id:t.routerId}),method:"post",data:e}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.router.attachSubnetSuccess}),t.closeModal(!0)},function(){t.closeModal(!1)})):t.disable=!1})},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.getSubnetList()},getSubnetList:function(){var t=this;t.subnetLoading=!0,this.checkError(this.$http({url:this.api.cloud.get_router_subnets,method:"get"}),function(e){t.subnetLoading=!1;for(var o=[],a=e.data,r=0;r<a.length;r++)for(var n=a[r].name,l=a[r].id,i=a[r].allocation_pools,s=0;s<i.length;s++)o.push({name:n+" : "+i[s].start+" ~ "+i[s].end,id:l});t.subnets=o,t.subnets.length>0&&(t.form.subnet_id=t.subnets[0].id)},function(){t.subnetLoading=!1})}},data:function(){return{labelWidth:"100px",form:{subnet_id:""},rules:{subnet_id:[{required:!0,message:this.lang.router.subnetRequireRule,trigger:"blur"}]},subnets:[],subnetLoading:!1,disable:!1}}},c={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.lang.router.attachSubnet,width:"25%",visible:t.show,modal:!0},on:{open:t.initForm,close:t.closeModal}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.subnetLoading,expression:"subnetLoading"}],ref:"form",attrs:{"label-position":"right",model:t.form,rules:t.rules,"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.subnet,"label-width":t.labelWidth,prop:"subnet_id"}},[o("el-select",{attrs:{filterable:"",placeholder:t.lang.router.attachPlaceholder,width:"100%"},model:{value:t.form.subnet_id,callback:function(e){t.$set(t.form,"subnet_id",e)},expression:"form.subnet_id"}},t._l(t.subnets,function(t,e){return o("el-option",{key:e,attrs:{label:t.name,value:t.id}})}),1)],1)],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.disable},on:{click:t.attachSubnet}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var u=o("C7Lr")(s,c,!1,function(t){o("nKaY")},"data-v-25a2faaf",null).exports,d={name:"pana-untie-subnet",props:{show:Boolean},methods:{closeModal:function(t){t=t||!1,this.$emit("closeModal",t)},untieSubnet:function(){this.$emit("closeModal",!0)}}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.lang.common.info,visible:t.show,width:"30%",modal:!0},on:{close:t.closeModal}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:10}},[t._v(t._s(t.lang.router.untieSubnetInfo))])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.closeModal(!0)}}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]},m=o("C7Lr")(d,p,!1,null,null,null).exports,g=o("yRx0"),h={name:"pana-create-static",components:{"cloud-info":g.a},props:{show:Boolean,routerId:String,origin:Array},methods:{closeModal:function(t){t=t||!1,i()(this.$data,this.$options.data.call(this)),this.$emit("closeModal",t)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.staticLoading=!1},createStaticRouter:function(){this.disable=!0;var t=this;this.$refs.form.validate(function(e){if(e){var o={routes:JSON.parse(r()(t.origin))};o.routes.push(t.form),t.checkError(t.$http({url:t.common.formatMsg(t.api.cloud.post_routers_detail_static_routers,{id:t.routerId}),method:"post",data:o}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.router.createStaticSuccess}),t.closeModal(!0)},function(){t.closeModal(!1)})}else t.disable=!1})}},data:function(){return{labelWidth:"100px",form:{destination:"",nexthop:""},rules:{destination:[{required:!0,message:this.lang.router.destinationRequiredRule,trigger:"blur"},{validator:this.common.validateCidr,message:this.lang.router.destinationFormatRule,trigger:"blur"}],nexthop:[{required:!0,message:this.lang.router.nexthopRequiredRule,trigger:"blur"},{validator:this.common.validateIpAddress,message:this.lang.router.nexthopFormatRule,trigger:"blur"}]},staticLoading:!0,disable:!1}}},f={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.staticLoading,expression:"staticLoading"}],staticClass:"static-router",attrs:{title:t.lang.router.createStaticRouter,width:"40%",visible:t.show,modal:!0},on:{open:t.initForm,close:t.closeModal}},[o("el-row",[o("cloud-info",{staticClass:"pana-info",attrs:{content:t.lang.router.addStaticInfo}})],1),t._v(" "),o("el-form",{ref:"form",attrs:{"label-position":"right",model:t.form,rules:t.rules}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.cidrDestination,"label-width":t.labelWidth,prop:"destination"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{required:"",placeholder:t.lang.router.destinationPlaceholder},model:{value:t.form.destination,callback:function(e){t.$set(t.form,"destination",e)},expression:"form.destination"}})],1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.nexthop,"label-width":t.labelWidth,prop:"nexthop"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:t.lang.router.nexthopPlaceholder},model:{value:t.form.nexthop,callback:function(e){t.$set(t.form,"nexthop",e)},expression:"form.nexthop"}})],1)],1)],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.disable},on:{click:t.createStaticRouter}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var b=o("C7Lr")(h,f,!1,function(t){o("tAff"),o("PF0I")},"data-v-74ea96ca",null).exports,_={name:"pana-delete-static",props:{show:Boolean},methods:{closeModal:function(t){t=t||!1,this.$emit("closeModal",t)},deleteStatic:function(){this.closeModal(!0)}}},v={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.lang.common.info,visible:t.show,width:"30%",modal:!0},on:{close:t.closeModal}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:10}},[t._v(t._s(t.lang.router.deleteStaticInfo))])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.deleteStatic}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]},w=o("C7Lr")(_,v,!1,null,null,null).exports,S={name:"pana-create-port",props:{show:Boolean,routerId:String,gateway:String},methods:{closeModal:function(t){t=t||!1,i()(this.$data,this.$options.data.call(this)),this.$emit("closeModal",t)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.getServerIp()},createPort:function(){this.disable=!0;var t=this;this.$refs.form.validate(function(e){if(e){t.form=t.common.dropEmptyParameter(t.form);var o={portforwarding:[t.form]};t.checkError(t.$http({url:t.common.formatMsg(t.api.cloud.post_routers_detail_port_forward,{id:t.routerId}),method:"post",data:o}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.router.createPortSuccess}),t.closeModal(!0)},function(){t.closeModal(!1)})}else t.disable=!1})},getServerIp:function(){var t=this;this.portLoading=!0,this.checkError(this.$http({url:this.common.formatMsg(this.api.cloud.get_routers_detail_server_ports,{router_id:this.routerId}),method:"get"}),function(e){e.data.map(function(t){t.name=t.name+" ip: "+t.ip}),t.serverIps=e.data,t.serverIps.length>0&&(t.form.inAddr=t.serverIps[0].ip),t.portLoading=!1},function(){t.portLoading=!1})}},data:function(){return{labelWidth:"100px",protocols:["TCP","UDP"],serverIps:[],form:{action:"add",protocol:"TCP",inAddr:"",inPort:"",outPort:""},rules:{protocol:[{required:!0,message:this.lang.router.protocolRequiredRule,trigger:"blur"}],outPort:[{required:!0,message:this.lang.router.outPortRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:65535,message:this.lang.router.outPortRangeRule,trigger:"blur"},{validator:this.common.validateNumberType,message:this.lang.router.outPortNumberRule,trigger:"blur"}],inAddr:[{required:!0,message:this.lang.router.inAddrRequiredRule,trigger:"blur"}],inPort:[{required:!0,message:this.lang.router.inPortRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:65535,message:this.lang.router.inPortRangeRule,trigger:"blur"},{validator:this.common.validateNumberType,message:this.lang.router.inPortNumberRule,trigger:"blur"}]},portLoading:!1,disable:!1}}},y={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.lang.router.createPortTransmit,width:"40%",visible:t.show,modal:!0},on:{open:t.initForm,close:t.closeModal}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.portLoading,expression:"portLoading"}],ref:"form",attrs:{"label-position":"right",model:t.form,rules:t.rules,"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.protocol,"label-width":t.labelWidth,prop:"protocol"}},[o("el-select",{attrs:{filterable:"",placeholder:t.lang.router.protocolPlaceholder,width:"100%"},model:{value:t.form.protocol,callback:function(e){t.$set(t.form,"protocol",e)},expression:"form.protocol"}},t._l(t.protocols,function(t,e){return o("el-option",{key:e,attrs:{label:t,value:t}})}),1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.outAddr,"label-width":t.labelWidth}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{value:t.gateway,disabled:""}})],1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.outPort,"label-width":t.labelWidth,prop:"outPort"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:t.lang.router.outPortPlaceholder},model:{value:t.form.outPort,callback:function(e){t.$set(t.form,"outPort",e)},expression:"form.outPort"}})],1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.inAddr,"label-width":t.labelWidth,prop:"inAddr"}},[o("el-select",{attrs:{filterable:"",placeholder:0===t.serverIps.length?t.lang.router.inAddrEmptyPlaceholder:t.lang.router.inAddrPlaceholder,width:"100%"},model:{value:t.form.inAddr,callback:function(e){t.$set(t.form,"inAddr",e)},expression:"form.inAddr"}},t._l(t.serverIps,function(t,e){return o("el-option",{key:e,attrs:{label:t.name,value:t.ip}})}),1)],1)],1)],1),t._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.inPort,"label-width":t.labelWidth,prop:"inPort"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:t.lang.router.inPortPlaceholder},model:{value:t.form.inPort,callback:function(e){t.$set(t.form,"inPort",e)},expression:"form.inPort"}})],1)],1)],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.disable},on:{click:t.createPort}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var P=o("C7Lr")(S,y,!1,function(t){o("lT01"),o("52R2")},"data-v-9c7b6f5e",null).exports,x={name:"pana-delete-port",props:{show:Boolean},methods:{closeModal:function(t){t=t||!1,this.$emit("closeModal",t)},deleteStatic:function(){this.closeModal(!0)}}},k={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.lang.common.info,visible:t.show,width:"30%",modal:!0},on:{close:t.closeModal}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:10}},[t._v(t._s(t.lang.router.deletePortInfo))])],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.deleteStatic}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]},M=o("C7Lr")(x,k,!1,null,null,null).exports,R={name:"pana-edit-router",props:{show:Boolean,routerId:String,editPortObj:Object},methods:{closeModal:function(t){i()(this.$data,this.$options.data.call(this)),t=t||!1,this.$emit("closeModal",t)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.form.name=this.editPortObj.name},editPort:function(){this.disable=!0;var t=this;this.$refs.form.validate(function(e){e?t.checkError(t.$http({url:t.common.formatMsg(t.api.cloud.put_routers_detail_subnets_port_detail,{id:t.routerId,port_id:t.editPortObj.id}),method:"put",data:t.form}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.router.editPortSuccess}),t.closeModal(!0)},function(){t.closeModal(!1)}):t.disable=!1})}},data:function(){return{labelWidth:"120px",form:{name:null},rules:{name:[{required:!0,message:this.lang.router.nameRequiredRule,trigger:"blur"},{min:1,max:32,message:this.lang.router.nameLengthRule,trigger:"blur"},{validator:this.common.validateNetworkName,message:this.lang.router.nameFormatRule,trigger:"blur"}]},disable:!1}}},C={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:t.lang.router.editPort,width:"45%",visible:t.show,modal:!0},on:{open:t.initForm,close:t.closeModal}},[o("el-form",{ref:"form",attrs:{"label-position":"right",model:t.form,rules:t.rules}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:t.lang.router.portName,"label-width":t.labelWidth,prop:"name"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:t.lang.router.namePlaceholder,required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1)],1)],1)],1),t._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),o("el-button",{attrs:{type:"primary",disabled:t.disable},on:{click:t.editPort}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var $=o("C7Lr")(R,C,!1,function(t){o("fcCA")},"data-v-03928efe",null).exports,I={name:"cloudDisk",components:{"pana-breadcrumb":n.a,"pana-attach-subnet":u,"pana-untie-subnet":m,"pana-create-static":b,"pana-delete-static":w,"pana-create-port":P,"pana-delete-port":M,"pana-edit-port":$,"cloud-info":g.a},watch:{detailSearch:function(){this.detailPage=1},staticSearch:function(){this.staticPage=1},portSearch:function(){this.portPage=1}},computed:{routerId:function(){return this.$route.params.routerId},detailFilter:function(){var t=this;return this.detailOrigin.filter(function(e){return""===t.detailSearch||-1!==r()(e).search(t.detailSearch)})},detailTable:function(){return this.detailFilter.length>this.pageSize?this.detailFilter.slice((this.detailPage-1)*this.pageSize,this.detailPage*this.pageSize):this.detailFilter},staticFilter:function(){var t=this;return this.staticOrigin.filter(function(e){return""===t.staticSearch||-1!==r()(e).search(t.staticSearch)})},staticTable:function(){return this.staticFilter.length>this.pageSize?this.staticFilter.slice((this.staticPage-1)*this.pageSize,this.staticPage*this.pageSize):this.staticFilter},portFilter:function(){var t=this;return this.portOrigin.filter(function(e){return""===t.portSearch||-1!==r()(e).search(t.portSearch)})},portTable:function(){return this.portFilter.length>this.pageSize?this.portFilter.slice((this.portPage-1)*this.pageSize,this.portPage*this.pageSize):this.portFilter}},data:function(){return{config:{active:{class:"cloud-success",content:this.lang.common.running},down:{class:"cloud-error",content:this.lang.common.stop}},activeName:"subnet",pageSize:10,detailSearch:"",detailOrigin:[],detailPage:1,detailSelectionIds:[],untieSubnetId:"",showAttachSubnet:!1,showUntieSubnet:!1,showCreateStaticRouter:!1,showDeleteStaticRouter:!1,showCreatePort:!1,showDeletePort:!1,showEditPort:!1,staticOrigin:[],staticSelections:[],staticSearch:"",staticPage:1,portOrigin:[],portSelections:[],portSearch:"",portPage:1,canPort:!0,gatewayIp:"",editPortObj:null,subnetLoading:!1,staticLoading:!1}},methods:{editPort:function(t){this.editPortObj=t,this.showEditPort=!0},sortChangeDetail:function(t){var e=null==t.order?0:"ascending"===t.order?1:-1;this.detailOrigin=this.detailOrigin.sort(function(o,a){return o[t.prop]=null==o[t.prop]?"":o[t.prop],a[t.prop]=null==a[t.prop]?"":a[t.prop],(o[t.prop]>a[t.prop]?1:-1)*e})},sortChangeStatic:function(t){var e=null==t.order?0:"ascending"===t.order?1:-1;this.staticOrigin=this.detailOrigin.sort(function(o,a){return o[t.prop]=null==o[t.prop]?"":o[t.prop],a[t.prop]=null==a[t.prop]?"":a[t.prop],(o[t.prop]>a[t.prop]?1:-1)*e})},sortChangePort:function(t){var e=null==t.order?0:"ascending"===t.order?1:-1;this.portOrigin=this.portOrigin.sort(function(o,a){return o[t.prop]=null==o[t.prop]?"":o[t.prop],a[t.prop]=null==a[t.prop]?"":a[t.prop],(o[t.prop]>a[t.prop]?1:-1)*e})},switchActive:function(){switch(this.activeName){case"subnet":this.getSubnetDetail();break;case"staticRouter":this.getStaticRouter(!1);break;case"portTransmit":this.getStaticRouter(!0)}},switchDetailPage:function(t){this.detailPage=t},switchStaticPage:function(t){this.staticPage=t},switchPortPage:function(t){this.portPage=t},closeAttachSubnet:function(t){!0===t&&this.getSubnetDetail(),this.showAttachSubnet=!1},closeCreateStatic:function(t){!0===t&&this.getStaticRouter(!1),this.showCreateStaticRouter=!1},untieSubnet:function(t){var e=this;this.showUntieSubnet=!1,!0===t&&this.checkError(this.$http({url:this.common.formatMsg(this.api.cloud.post_routers_detail_remove_router_interfaces,{id:this.routerId}),method:"post",data:{id:[this.untieSubnetId]}}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.router.untieSubnetSuccess}),e.getSubnetDetail(),e.untieSubnetId=null})},getSubnetDetail:function(){var t=this;this.subnetLoading=!0,this.checkError(this.$http({url:this.common.formatMsg(this.api.cloud.get_routers_detail,{id:this.routerId}),method:"get"}),function(e){t.subnetLoading=!1,t.detailOrigin=e.data},function(){t.subnetLoading=!1})},showUntieSubnetModal:function(t){this.untieSubnetId=t.id,this.showUntieSubnet=!0},selectRouters:function(t){var e=[];t.forEach(function(t){e.push(t.id)}),this.detailSelectionIds=e},selectStaticRouter:function(t){this.staticSelections=t},selectPorts:function(t){this.portSelections=t},getStaticRouter:function(t){var e=this;this.staticLoading=!0,t=null!=t&&t,this.checkError(this.$http({url:this.common.formatMsg(this.api.cloud.get_routers_detail_static_routers,{id:this.routerId})+"?detail="+t,method:"get"}),function(o){e.staticLoading=!1,t?(e.portOrigin=o.data.portforwarding,null!=o.data.gateway_ip&&""!==o.data.gateway_ip&&(e.portOrigin.map(function(t){t.out_addr=o.data.gateway_ip}),e.gatewayIp=o.data.gateway_ip,e.canPort=!1)):e.staticOrigin=o.data},function(){e.staticLoading=!1})},deleteStatic:function(t){var e=this,o=[];if(this.showDeleteStaticRouter=!1,!0===t){for(var a=0;a<this.staticOrigin.length;a++){for(var n=!0,l=0;l<this.staticSelections.length;l++)if(this.staticSelections[l].destination===this.staticOrigin[a].destination&&this.staticSelections[l].nexthop===this.staticOrigin[a].nexthop){n=!1;break}n&&o.push(this.staticOrigin[a])}var i={routes:JSON.parse(r()(o))};this.checkError(this.$http({url:this.common.formatMsg(this.api.cloud.post_routers_detail_static_routers,{id:this.routerId}),method:"post",data:i}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.router.deleteStaticSuccess}),e.getStaticRouter(!1),e.showDeleteStaticRouter=!1})}},deletePort:function(t){var e=this;if(this.showDeletePort=!1,!0===t){var o=[];this.portSelections.map(function(t){var e={action:"del"};e.inAddr=t.in_addr,e.inPort=t.in_port,e.outAddr=t.out_addr,e.outPort=t.out_port,e.protocol=t.protocol,o.push(e)});var a={portforwarding:o};this.checkError(this.$http({url:this.common.formatMsg(this.api.cloud.post_routers_detail_port_forward,{id:this.routerId}),method:"post",data:a}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.router.deletePortSuccess}),e.getStaticRouter(!0)})}},closeCreatePort:function(t){!0===t&&this.getStaticRouter(!0),this.showCreatePort=!1},closeEditPort:function(t){!0===t&&this.getSubnetDetail(),this.showEditPort=!1}},mounted:function(){this.getSubnetDetail()}},L={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{attrs:{type:"flex",direction:"vertical"}},[o("pana-breadcrumb",{attrs:{back:!0}}),t._v(" "),o("el-main",[o("el-tabs",{staticClass:"router-tab",on:{"tab-click":t.switchActive},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:t.lang.router.attachSubnet,name:"subnet"}},[o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showAttachSubnet=!0}}},[t._v("\n                            "+t._s(t.lang.router.attachSubnet)+"\n                        ")])],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{placeholder:t.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:t.detailSearch,callback:function(e){t.detailSearch=e},expression:"detailSearch"}})],1),t._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:t.getSubnetDetail}})],1)],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.subnetLoading,expression:"subnetLoading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:t.detailTable,"tooltip-effect":"dark"},on:{"selection-change":t.selectRouters,"sort-change":t.sortChangeDetail}},[o("el-table-column",{attrs:{type:"selection"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.portName,sortable:"custom",prop:"name"},scopedSlots:t._u([{key:"default",fn:function(e){return[""===e.row.name||null==e.row.name?o("span",[t._v("\n                                "+t._s(t.lang.router.nothing)+"\n                            ")]):o("span",[t._v("\n                                "+t._s(e.row.name)+"\n                            ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.portIp,sortable:"custom",prop:"ip"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.ip,function(e,a){return o("div",{key:a},[t._v(t._s(e))])})}}])}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.attachSubnet,sortable:"custom",prop:"subnet_ip"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.subnet_ip,function(e,a){return o("div",{key:a},[t._v(t._s(e))])})}}])}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.common.status,sortable:"custom",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("span",{class:["status",t.config[e.row.status.toLowerCase()].class]},[t._v("\n                                "+t._s(t.config[e.row.status.toLowerCase()].content)+"\n                            ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.managerStatus,sortable:"custom",prop:"admin_state_up"},scopedSlots:t._u([{key:"default",fn:function(e){return[!0===t.common.forceBoolean(e.row.admin_state_up)?o("span",[t._v("\n                                "+t._s(t.lang.common.yes)+"\n                            ")]):o("span",[t._v("\n                                "+t._s(t.lang.common.no)+"\n                            ")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.deviceOwner,sortable:"custom",prop:"device_owner"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.common.operation},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-tooltip",{staticClass:"item",attrs:{disabled:"network:router_gateway"!==e.row.device_owner,effect:"dark",content:t.lang.router.gatewayOwnerEditInfo,placement:"top-start"}},[o("span",[o("el-button",{attrs:{type:"text",disabled:"network:router_gateway"===e.row.device_owner},on:{click:function(o){return t.editPort(e.row)}}},[t._v("\n                                        "+t._s(t.lang.common.update)+"\n                                    ")])],1)]),t._v(" "),o("el-tooltip",{staticClass:"item",attrs:{disabled:"network:router_gateway"!==e.row.device_owner,effect:"dark",content:t.lang.router.gatewayOwnerUntieInfo,placement:"top-start"}},[o("span",[o("el-button",{attrs:{type:"text",disabled:"network:router_gateway"===e.row.device_owner},on:{click:function(o){return t.showUntieSubnetModal(e.row)}}},[t._v("\n                                        "+t._s(t.lang.router.untie)+"\n                                    ")])],1)])]}}])})],1),t._v(" "),o("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[t.detailFilter.length>t.pageSize?o("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":t.lang.common.prevPage,"next-text":t.lang.common.nextPage,total:t.detailFilter.length,"page-size":t.pageSize},on:{"current-change":t.switchDetailPage}},[t._t("default",[o("span",{staticClass:"pagination-slot"},[t._v("\n                                "+t._s(t.common.formatMsg(t.lang.common.paginationMsg,{current:this.detailPage,total:this.detailFilter.length}))+"\n                            ")])])],2):t._e()],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:t.lang.router.staticRouterTable,name:"staticRouter"}},[o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.showCreateStaticRouter=!0}}},[t._v("\n                            "+t._s(t.lang.router.createStaticRouter)+"\n                        ")]),t._v(" "),o("el-button",{attrs:{disabled:0===t.staticSelections.length},on:{click:function(e){t.showDeleteStaticRouter=!0}}},[t._v("\n                            "+t._s(t.lang.common.delete)+"\n                        ")])],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{placeholder:t.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:t.staticSearch,callback:function(e){t.staticSearch=e},expression:"staticSearch"}})],1),t._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:function(e){return t.getStaticRouter(!1)}}})],1)],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.staticLoading,expression:"staticLoading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:t.staticTable,"tooltip-effect":"dark"},on:{"selection-change":t.selectStaticRouter,"sort-change":t.sortChangeStatic}},[o("el-table-column",{attrs:{type:"selection"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.cidrDestination,sortable:"custom",prop:"destination"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.nexthop,sortable:"custom",prop:"nexthop"}})],1),t._v(" "),o("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[t.staticFilter.length>t.pageSize?o("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":t.lang.common.prevPage,"next-text":t.lang.common.nextPage,total:t.staticFilter.length,"page-size":t.pageSize},on:{"current-change":t.switchStaticPage}},[t._t("default",[o("span",{staticClass:"pagination-slot"},[t._v("\n                                "+t._s(t.common.formatMsg(t.lang.common.paginationMsg,{current:this.staticPage,total:this.staticFilter.length}))+"\n                            ")])])],2):t._e()],1)],1),t._v(" "),o("el-tab-pane",{attrs:{label:t.lang.router.portTransmit,name:"portTransmit"}},[o("el-row",[o("cloud-info",{staticClass:"pana-info",attrs:{content:t.lang.router.portTransmitInfo}})],1),t._v(" "),o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary",disabled:t.canPort},on:{click:function(e){t.showCreatePort=!0}}},[t._v("\n                            "+t._s(t.lang.common.create)+"\n                        ")]),t._v(" "),o("el-button",{attrs:{disabled:0===t.portSelections.length},on:{click:function(e){t.showDeletePort=!0}}},[t._v("\n                            "+t._s(t.lang.common.delete)+"\n                        ")])],1),t._v(" "),o("el-col",{attrs:{span:6}},[o("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{placeholder:t.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:t.portSearch,callback:function(e){t.portSearch=e},expression:"portSearch"}})],1),t._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:function(e){return t.getStaticRouter(!0)}}})],1)],1)],1)],1),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.staticLoading,expression:"staticLoading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:t.portTable,"tooltip-effect":"dark"},on:{"selection-change":t.selectPorts,"sort-change":t.sortChangePort}},[o("el-table-column",{attrs:{type:"selection"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.protocol,sortable:"custom",prop:"protocol"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.outAddr,sortable:"custom",prop:"out_addr"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.outPort,sortable:"custom",prop:"out_port"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.inAddr,sortable:"custom",prop:"in_addr"}}),t._v(" "),o("el-table-column",{attrs:{label:t.lang.router.inPort,sortable:"custom",prop:"in_port"}})],1),t._v(" "),o("el-row",[t.canPort?o("cloud-info",{staticClass:"pana-info",attrs:{bgStyle:"warning",content:t.lang.router.emptyPort}}):t._e()],1),t._v(" "),o("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[t.portFilter.length>t.pageSize?o("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":t.lang.common.prevPage,"next-text":t.lang.common.nextPage,total:t.portFilter.length,"page-size":t.pageSize},on:{"current-change":t.switchPortPage}},[t._t("default",[o("span",{staticClass:"pagination-slot"},[t._v("\n                                "+t._s(t.common.formatMsg(t.lang.common.paginationMsg,{current:this.portPage,total:this.portFilter.length}))+"\n                            ")])])],2):t._e()],1)],1)],1),t._v(" "),o("pana-attach-subnet",{attrs:{show:t.showAttachSubnet,routerId:t.routerId},on:{closeModal:t.closeAttachSubnet}}),t._v(" "),o("pana-untie-subnet",{attrs:{show:t.showUntieSubnet},on:{closeModal:t.untieSubnet}}),t._v(" "),o("pana-create-static",{attrs:{show:t.showCreateStaticRouter,routerId:t.routerId,origin:t.staticOrigin},on:{closeModal:t.closeCreateStatic}}),t._v(" "),o("pana-delete-static",{attrs:{show:t.showDeleteStaticRouter},on:{closeModal:t.deleteStatic}}),t._v(" "),o("pana-create-port",{attrs:{show:t.showCreatePort,routerId:t.routerId,gateway:t.gatewayIp},on:{closeModal:t.closeCreatePort}}),t._v(" "),o("pana-delete-port",{attrs:{show:t.showDeletePort},on:{closeModal:t.deletePort}}),t._v(" "),o("pana-edit-port",{attrs:{show:t.showEditPort,routerId:t.routerId,editPortObj:t.editPortObj},on:{closeModal:t.closeEditPort}})],1)],1)},staticRenderFns:[]};var F=o("C7Lr")(I,L,!1,function(t){o("TSx8"),o("9MN4")},"data-v-0510841e",null);e.default=F.exports},TSx8:function(t,e){},fcCA:function(t,e){},lT01:function(t,e){},nKaY:function(t,e){},tAff:function(t,e){}});