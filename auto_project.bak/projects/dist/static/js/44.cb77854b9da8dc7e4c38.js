webpackJsonp([44],{LRXd:function(e,t){},WVdO:function(e,t){},"deg/":function(e,t){},oJZo:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("1JPr"),c=s("aA9S"),r=s.n(c),o=s("yRx0"),l={name:"pana-create-set",props:{show:Boolean,specObj:Object,setObj:Object},components:{"cloud-info":o.a},computed:{showCpuTopoError:function(){var e=this.form.cpu_sockets||this.setObj["hw:cpu_sockets"],t=this.form.cpu_cores||this.setObj["hw:cpu_cores"],s=this.form.cpu_threads||this.setObj["hw:cpu_threads"],a=!1;return e&&t&&s&&e*t*s>this.specObj.vcpus&&(a=!0),a}},methods:{closeModal:function(e){r()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate();var e=[],t=!1;for(var s in this.setTitle)this.setTitle.hasOwnProperty(s)&&!1===this.setObj.hasOwnProperty(s)&&("hw:cpu_cores"===s||"hw:cpu_sockets"===s||"hw:cpu_threads"===s?t=!0:"hw:cpu_thread_policy"!==s&&e.push({key:s,value:this.setTitle[s]}));!0===t&&e.push({key:"cpu_topo",value:this.lang.spec.cpuTopo}),this.setSelection=e,this.currentName=e[0].key},createSet:function(){this.disable=!0;var e=this;if(!0===this.showCpuTopoError)return this.disable=!1,!1;this.$refs.form.validate(function(t){if(t){var s={};switch(e.currentName){case"resource:cpu_max":s["resource:cpu_max"]=e.form.cpu_max;break;case"resource:mem_max":s["resource:mem_max"]=e.common.switchCapacity(e.form.mem_max,"gb","mb");break;case"hw:cpu_policy":s["hw:cpu_policy"]=e.form.cpu_policy,"dedicated"===e.form.cpu_policy&&(s["hw:cpu_thread_policy"]=e.form.cpu_thread_policy);break;case"cpu_topo":!1===e.setObj.hasOwnProperty("hw:cpu_sockets")&&(s["hw:cpu_sockets"]=e.form.cpu_sockets),!1===e.setObj.hasOwnProperty("hw:cpu_cores")&&(s["hw:cpu_cores"]=e.form.cpu_cores),!1===e.setObj.hasOwnProperty("hw:cpu_threads")&&(s["hw:cpu_threads"]=e.form.cpu_threads)}e.checkError(e.$http({url:e.common.formatMsg(e.api.management.post_flavors_detail_extra,{flavors_id:e.specObj.id}),method:"post",data:s}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.spec.createSetSuccess}),e.closeModal(!0)},function(){e.disable=!1})}else e.disable=!1})},validateCpu:function(e,t,s){1===parseInt(t)||t%2==0?s():s(new Error(e.message))},changeName:function(){this.$refs.form.clearValidate()}},data:function(){return{labelWidth:"120px",form:{cpu_cores:"",cpu_policy:"shared",cpu_sockets:"",cpu_threads:"",cpu_max:"",mem_max:"",cpu_thread_policy:"prefer"},rules:{},setTitle:{"hw:cpu_cores":this.lang.spec.cpuCores,"hw:cpu_sockets":this.lang.spec.cpuSockets,"hw:cpu_threads":this.lang.spec.cpuThreads,"resource:cpu_max":this.lang.spec.cpuMax,"resource:mem_max":this.lang.spec.memMax,"hw:cpu_thread_policy":this.lang.spec.cpuThreadPolicy,"hw:cpu_policy":this.lang.spec.cpuPolicy},setSelection:[],currentName:null,cpuPolicy:"shared",cpuPolicyConfigs:["prefer","isolate","require"],disable:!1}}},i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.lang.spec.createSet,width:"30%",visible:e.show,modal:!0},on:{open:e.initForm,close:e.closeModal}},[s("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form}},[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.common.name,"label-width":e.labelWidth}},[s("el-select",{attrs:{filterable:"",placeholder:e.setSelection.length>0?e.lang.spec.setOptionPlaceholder:e.lang.spec.noneSetOptionPlaceholder,width:"100%"},on:{change:e.changeName},model:{value:e.currentName,callback:function(t){e.currentName=t},expression:"currentName"}},e._l(e.setSelection,function(e,t){return s("el-option",{key:t,attrs:{label:e.value,value:e.key}})}),1)],1)],1)],1),e._v(" "),"hw:cpu_policy"===e.currentName?s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuPolicy,"label-width":e.labelWidth}},[s("el-radio-group",{model:{value:e.form.cpu_policy,callback:function(t){e.$set(e.form,"cpu_policy",t)},expression:"form.cpu_policy"}},[s("el-radio",{attrs:{label:"shared"}},[e._v(e._s(e.lang.spec.shared))]),e._v(" "),s("el-radio",{attrs:{label:"dedicated"}},[e._v(e._s(e.lang.spec.dedicated))])],1)],1)],1)],1),e._v(" "),"dedicated"===e.form.cpu_policy?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{"label-width":e.labelWidth}},[s("el-select",{attrs:{filterable:""},model:{value:e.form.cpu_thread_policy,callback:function(t){e.$set(e.form,"cpu_thread_policy",t)},expression:"form.cpu_thread_policy"}},e._l(e.cpuPolicyConfigs,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),"prefer"===e.form.cpu_thread_policy?s("div",{staticClass:"cpu-policy-info"},[e._v(e._s(e.lang.spec.perferInfo))]):e._e(),e._v(" "),"isolate"===e.form.cpu_thread_policy?s("div",{staticClass:"cpu-policy-info"},[e._v(e._s(e.lang.spec.isolateInfo))]):e._e(),e._v(" "),"require"===e.form.cpu_thread_policy?s("div",{staticClass:"cpu-policy-info"},[e._v(e._s(e.lang.spec.requireInfo))]):e._e()],1)],1):e._e()],1):e._e(),e._v(" "),"resource:mem_max"===e.currentName?s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.value,"label-width":e.labelWidth,prop:"mem_max",rules:[{required:!0,message:e.lang.spec.ramRequiredRule,trigger:"change"},{validator:e.common.validateNumberRange,min:e.common.switchCapacity(e.specObj.ram,"mb","gb"),max:4e3,message:e.common.formatMsg(e.lang.spec.maxMemRangeRule,{mems:e.common.switchCapacity(e.specObj.ram,"mb","gb")}),trigger:"change"},{validator:e.common.validateIntegerType,message:e.lang.spec.ramNumberRule,trigger:"change"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.mem_max,callback:function(t){e.$set(e.form,"mem_max",t)},expression:"form.mem_max"}})],1)],1)],1)],1)],1):e._e(),e._v(" "),"resource:cpu_max"===e.currentName?s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.value,"label-width":e.labelWidth,prop:"cpu_max",rules:[{required:!0,message:e.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:e.common.validateNumberRange,min:e.specObj.vcpus||1,max:240,message:e.common.formatMsg(e.lang.spec.maxCpuRangeRule,{cores:e.specObj.vcpus}),trigger:"blur"},{validator:e.validateCpu,message:e.lang.spec.cpuFormatRule,trigger:"blur"},{validator:this.common.validateIntegerType,message:this.lang.spec.ramNumberRule,trigger:"change"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_max,callback:function(t){e.$set(e.form,"cpu_max",t)},expression:"form.cpu_max"}})],1)],1)],1)],1)],1):e._e(),e._v(" "),"cpu_topo"===e.currentName?s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("cloud-info",{staticClass:"cpu-info",attrs:{content:e.common.formatMsg(e.lang.spec.cpuSetWarning,{cores:e.specObj.vcpus})}})],1),e._v(" "),!1===e.setObj.hasOwnProperty("hw:cpu_sockets")?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuSockets,"label-width":e.labelWidth,prop:"cpu_sockets",rules:[{required:!0,message:this.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:e.specObj.vcpus||240,message:this.common.formatMsg(this.lang.spec.cpuRangeRule,{cores:this.specObj.vcpus}),trigger:"blur"},{validator:this.validateCpu,message:this.lang.spec.cpuFormatRule,trigger:"blur"},{validator:this.common.validateIntegerType,message:this.lang.spec.ramNumberRule,trigger:"change"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_sockets,callback:function(t){e.$set(e.form,"cpu_sockets",t)},expression:"form.cpu_sockets"}})],1)],1)],1)],1):e._e(),e._v(" "),!1===e.setObj.hasOwnProperty("hw:cpu_cores")?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuCores,"label-width":e.labelWidth,prop:"cpu_cores",rules:[{required:!0,message:this.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:e.specObj.vcpus||240,message:this.common.formatMsg(this.lang.spec.cpuRangeRule,{cores:this.specObj.vcpus}),trigger:"blur"},{validator:this.validateCpu,message:this.lang.spec.cpuFormatRule,trigger:"blur"},{validator:this.common.validateIntegerType,message:this.lang.spec.ramNumberRule,trigger:"change"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_cores,callback:function(t){e.$set(e.form,"cpu_cores",t)},expression:"form.cpu_cores"}})],1)],1)],1)],1):e._e(),e._v(" "),!1===e.setObj.hasOwnProperty("hw:cpu_threads")?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuThreads,"label-width":e.labelWidth,prop:"cpu_threads",rules:[{required:!0,message:this.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:this.specObj.vcpus||240,message:this.common.formatMsg(this.lang.spec.cpuRangeRule,{cores:this.specObj.vcpus}),trigger:"blur"},{validator:this.validateCpu,message:this.lang.spec.cpuFormatRule,trigger:"blur"},{validator:this.common.validateIntegerType,message:this.lang.spec.ramNumberRule,trigger:"change"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_threads,callback:function(t){e.$set(e.form,"cpu_threads",t)},expression:"form.cpu_threads"}})],1)],1)],1)],1):e._e(),e._v(" "),e.showCpuTopoError?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{staticClass:"cpu-topo-error",attrs:{span:20}},[e._v("\n                    "+e._s(e.common.formatMsg(e.lang.spec.cpuTopoError,{cores:e.specObj.vcpus}))+"\n                ")])],1):e._e()],1):e._e()],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.createSet}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var p=s("C7Lr")(l,i,!1,function(e){s("LRXd")},"data-v-7c4c66fa",null).exports,n={name:"pana-delete-set",props:{show:Boolean},methods:{closeModal:function(e){e=e||!1,this.$emit("closeModal",e)},deleteSet:function(){this.closeModal(!0)}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.lang.common.info,visible:e.show,width:"30%",modal:!0},on:{close:e.closeModal}},[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:10}},[e._v(e._s(e.lang.spec.deleteSetInfo))])],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.deleteSet}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},m=s("C7Lr")(n,u,!1,null,null,null).exports,h=s("ZLEe"),d=s.n(h),_={name:"pana-create-set",props:{show:Boolean,specObj:Object,setObj:Object,currentName:String},components:{"cloud-info":o.a},computed:{showCpuTopoError:function(){var e=this.form.cpu_sockets||this.setObj["hw:cpu_sockets"]||1,t=this.form.cpu_cores||this.setObj["hw:cpu_cores"]||1,s=this.form.cpu_threads||this.setObj["hw:cpu_threads"]||1,a=!1;return e&&t&&s&&e*t*s>this.specObj.vcpus&&(a=!0),a&&("hw:cpu_sockets"===this.currentName||"hw:cpu_cores"===this.currentName||"hw:cpu_threads"===this.currentName)}},methods:{closeModal:function(e){r()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){switch(null!=this.$refs.form&&this.$refs.form.clearValidate(),this.currentName){case"resource:cpu_max":this.form.cpu_max=this.setObj["resource:cpu_max"];break;case"resource:mem_max":this.form.mem_max=this.setObj["resource:mem_max"];break;case"hw:cpu_policy":this.form.cpu_policy=this.setObj["hw:cpu_policy"],"dedicated"===this.form.cpu_policy&&(this.form.cpu_thread_policy=this.setObj["hw:cpu_thread_policy"]);break;case"hw:cpu_sockets":this.form.cpu_sockets=this.setObj["hw:cpu_sockets"];break;case"hw:cpu_cores":this.form.cpu_cores=this.setObj["hw:cpu_cores"];break;case"hw:cpu_threads":this.form.cpu_threads=this.setObj["hw:cpu_threads"];break;case"hw:cpu_thread_policy":this.form.cpu_thread_policy=this.setObj["hw:cpu_thread_policy"]}},editSet:function(){this.disable=!0;var e=this;this.$refs.form.validate(function(t){if(t&&!1===e.showCpuTopoError){var s={};switch(e.currentName){case"resource:cpu_max":s["resource:cpu_max"]=e.form.cpu_max;break;case"resource:mem_max":s["resource:mem_max"]=e.common.switchCapacity(e.form.mem_max,"gb","mb");break;case"hw:cpu_policy":s["hw:cpu_policy"]=e.form.cpu_policy,"dedicated"===e.form.cpu_policy&&(s["hw:cpu_thread_policy"]=e.form.cpu_thread_policy);break;case"hw:cpu_sockets":s["hw:cpu_sockets"]=e.form.cpu_sockets;break;case"hw:cpu_cores":s["hw:cpu_cores"]=e.form.cpu_cores;break;case"hw:cpu_threads":s["hw:cpu_threads"]=e.form.cpu_threads;break;case"hw:cpu_thread_policy":s["hw:cpu_thread_policy"]=e.form.cpu_thread_policy}var a=d()(s);a.indexOf("hw:cpu_policy")>-1&&(null!=e.setObj["hw:cpu_thread_policy"]?-1===a.indexOf("hw:cpu_thread_policy")&&a.push("hw:cpu_thread_policy"):a.splice(a.indexOf("hw:cpu_thread_policy"),1)),e.checkError(e.$http({url:e.common.formatMsg(e.api.management.delete_flavors_detail_extra,{flavors_id:e.specObj.id}),method:"delete",data:{key:a}}),function(){e.checkError(e.$http({url:e.common.formatMsg(e.api.management.post_flavors_detail_extra,{flavors_id:e.specObj.id}),method:"post",data:s}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.spec.editSetSuccess}),e.closeModal(!0)})},function(){e.disable=!1})}else e.disable=!1})},validateCpu:function(e,t,s){1===parseInt(t)||t%2==0?s():s(new Error(e.message))},changeName:function(){this.$refs.form.clearValidate()}},data:function(){return{labelWidth:"120px",form:{cpu_cores:"",cpu_policy:"shared",cpu_sockets:"",cpu_threads:"",cpu_max:"",mem_max:"",cpu_thread_policy:"prefer"},rules:{cpu_cores:[{required:!0,message:this.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:this.specObj.vcpus||240,message:this.common.formatMsg(this.lang.spec.cpuRangeRule,{cores:this.specObj.vcpus}),trigger:"blur"},{validator:this.validateCpu,message:this.lang.spec.cpuFormatRule,trigger:"blur"}],cpu_sockets:[{required:!0,message:this.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:this.specObj.vcpus||240,message:this.common.formatMsg(this.lang.spec.cpuRangeRule,{cores:this.specObj.vcpus}),trigger:"blur"},{validator:this.validateCpu,message:this.lang.spec.cpuFormatRule,trigger:"blur"}],cpu_threads:[{required:!0,message:this.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1,max:this.specObj.vcpus||240,message:this.common.formatMsg(this.lang.spec.cpuRangeRule,{cores:this.specObj.vcpus}),trigger:"blur"},{validator:this.validateCpu,message:this.lang.spec.cpuFormatRule,trigger:"blur"}]},setTitle:{"hw:cpu_cores":this.lang.spec.cpuCores,"hw:cpu_sockets":this.lang.spec.cpuSockets,"hw:cpu_threads":this.lang.spec.cpuThreads,"resource:cpu_max":this.lang.spec.cpuMax,"resource:mem_max":this.lang.spec.memMax,"hw:cpu_thread_policy":this.lang.spec.cpuThreadPolicy,"hw:cpu_policy":this.lang.spec.cpuPolicy},setSelection:[],cpuPolicy:"shared",cpuPolicyConfigs:["prefer","isolate","require"],disable:!1}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{title:e.lang.spec.editSet,width:"30%",visible:e.show,modal:!0},on:{open:e.initForm,close:e.closeModal}},[s("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.common.name,"label-width":e.labelWidth}},[e._v("\n                    "+e._s(e.setTitle[e.currentName])+"\n                ")])],1)],1),e._v(" "),s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.key,"label-width":e.labelWidth}},[e._v("\n                    "+e._s(e.currentName)+"\n                ")])],1)],1),e._v(" "),"hw:cpu_policy"===e.currentName||"hw:cpu_thread_policy"===e.currentName?s("div",["hw:cpu_policy"===e.currentName?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuPolicy,"label-width":e.labelWidth}},[s("el-radio-group",{model:{value:e.form.cpu_policy,callback:function(t){e.$set(e.form,"cpu_policy",t)},expression:"form.cpu_policy"}},[s("el-radio",{attrs:{label:"shared"}},[e._v(e._s(e.lang.spec.shared))]),e._v(" "),s("el-radio",{attrs:{label:"dedicated"}},[e._v(e._s(e.lang.spec.dedicated))])],1)],1)],1)],1):e._e(),e._v(" "),"dedicated"===e.form.cpu_policy||"hw:cpu_thread_policy"===e.currentName?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:"hw:cpu_thread_policy"===e.currentName?e.lang.spec.cpuThreadPolicy:"","label-width":e.labelWidth}},[s("el-select",{attrs:{filterable:""},model:{value:e.form.cpu_thread_policy,callback:function(t){e.$set(e.form,"cpu_thread_policy",t)},expression:"form.cpu_thread_policy"}},e._l(e.cpuPolicyConfigs,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1),e._v(" "),"prefer"===e.form.cpu_thread_policy?s("div",{staticClass:"cpu-policy-info"},[e._v(e._s(e.lang.spec.perferInfo))]):e._e(),e._v(" "),"isolate"===e.form.cpu_thread_policy?s("div",{staticClass:"cpu-policy-info"},[e._v(e._s(e.lang.spec.isolateInfo))]):e._e(),e._v(" "),"require"===e.form.cpu_thread_policy?s("div",{staticClass:"cpu-policy-info"},[e._v(e._s(e.lang.spec.requireInfo))]):e._e()],1)],1):e._e()],1):e._e(),e._v(" "),"resource:mem_max"===e.currentName?s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.value,"label-width":e.labelWidth,prop:"mem_max",rules:[{required:!0,message:e.lang.spec.ramRequiredRule,trigger:"change"},{validator:e.common.validateNumberRange,min:e.common.switchCapacity(e.specObj.ram,"mb","gb"),max:4e3,message:e.common.formatMsg(e.lang.spec.maxMemRangeRule,{mems:e.common.switchCapacity(e.specObj.ram,"mb","gb")}),trigger:"change"},{validator:e.common.validateIntegerType,message:e.lang.spec.ramNumberRule,trigger:"change"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.mem_max,callback:function(t){e.$set(e.form,"mem_max",t)},expression:"form.mem_max"}})],1)],1)],1)],1)],1):e._e(),e._v(" "),"resource:cpu_max"===e.currentName?s("div",[s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.value,"label-width":e.labelWidth,prop:"cpu_max",rules:[{required:!0,message:e.lang.spec.cpuRequiredRule,trigger:"blur"},{validator:e.common.validateNumberRange,min:e.specObj.vcpus||1,max:240,message:e.common.formatMsg(e.lang.spec.maxCpuRangeRule,{cores:e.specObj.vcpus}),trigger:"blur"},{validator:e.validateCpu,message:e.lang.spec.cpuFormatRule,trigger:"blur"}]}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_max,callback:function(t){e.$set(e.form,"cpu_max",t)},expression:"form.cpu_max"}})],1)],1)],1)],1)],1):e._e(),e._v(" "),"hw:cpu_sockets"===e.currentName||"hw:cpu_sockets"===e.currentName||"hw:cpu_threads"===e.currentName?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("cloud-info",{staticClass:"cpu-info",attrs:{content:e.common.formatMsg(e.lang.spec.cpuSetWarning,{cores:e.specObj.vcpus})}})],1):e._e(),e._v(" "),"hw:cpu_sockets"===e.currentName?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuSockets,"label-width":e.labelWidth,prop:"cpu_sockets"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_sockets,callback:function(t){e.$set(e.form,"cpu_sockets",t)},expression:"form.cpu_sockets"}})],1)],1)],1)],1):e._e(),e._v(" "),"hw:cpu_cores"===e.currentName?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuCores,"label-width":e.labelWidth,prop:"cpu_cores"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_cores,callback:function(t){e.$set(e.form,"cpu_cores",t)},expression:"form.cpu_cores"}})],1)],1)],1)],1):e._e(),e._v(" "),"hw:cpu_threads"===e.currentName?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{attrs:{span:20}},[s("el-form-item",{attrs:{label:e.lang.spec.cpuThreads,"label-width":e.labelWidth,prop:"cpu_threads"}},[s("el-col",{attrs:{span:16}},[s("el-input",{attrs:{placeholder:e.lang.spec.integerPlaceholder},model:{value:e.form.cpu_threads,callback:function(t){e.$set(e.form,"cpu_threads",t)},expression:"form.cpu_threads"}})],1)],1)],1)],1):e._e(),e._v(" "),e.showCpuTopoError?s("el-row",{attrs:{type:"flex",justify:"center"}},[s("el-col",{staticClass:"cpu-topo-error",attrs:{span:20}},[e._v("\n                "+e._s(e.common.formatMsg(e.lang.spec.cpuTopoError,{cores:e.specObj.vcpus}))+"\n            ")])],1):e._e()],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),s("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.editSet}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var f=s("C7Lr")(_,g,!1,function(e){s("WVdO")},"data-v-48d77b46",null).exports,b={name:"pana-spec-detail",components:{"pana-breadcrumb":a.a,"pana-create-set":p,"pana-delete-set":m,"pana-edit-set":f},computed:{specId:function(){return this.$route.params.specId},setOrigin:function(){var e=[];for(var t in this.setObj)this.setObj.hasOwnProperty(t)&&this.setTitle.hasOwnProperty(t)&&e.push({name:this.setTitle[t],key:t,value:this.setObj[t]});return e}},data:function(){return{pageSize:10,setObj:{},restItem:[],setTitle:{"hw:cpu_cores":this.lang.spec.cpuCores,"hw:cpu_policy":this.lang.spec.cpuPolicy,"hw:cpu_sockets":this.lang.spec.cpuSockets,"hw:cpu_threads":this.lang.spec.cpuThreads,"resource:cpu_max":this.lang.spec.cpuMax,"resource:mem_max":this.lang.spec.memMax,"hw:cpu_thread_policy":this.lang.spec.cpuThreadPolicy},setSelectionKeys:[],showCreateSet:!1,showDeleteSet:!1,showEditSet:!1,specDetail:{},loading:!1}},methods:{sortChange:function(e){var t=null==e.order?0:"ascending"===e.order?1:-1;this.setOrigin=this.setOrigin.sort(function(s,a){return s[e.prop]=null==s[e.prop]?"":s[e.prop],a[e.prop]=null==a[e.prop]?"":a[e.prop],(s[e.prop]>a[e.prop]?1:-1)*t})},closeCreateSet:function(e){!0===e&&this.getSetList(),this.showCreateSet=!1},closeEditSet:function(e){!0===e&&this.getSetList(),this.showEditSet=!1},closeDeleteSet:function(e){var t=this;this.showDeleteSet=!1,!0===e&&(this.setSelectionKeys.indexOf("hw:cpu_thread_policy")>-1&&-1===this.setSelectionKeys.indexOf("hw:cpu_policy")&&this.setSelectionKeys.push("hw:cpu_policy"),this.setSelectionKeys.indexOf("hw:cpu_policy")>-1&&"dedicated"===this.setObj["hw:cpu_policy"]&&-1===this.setSelectionKeys.indexOf("hw:cpu_thread_policy")&&this.setSelectionKeys.push("hw:cpu_thread_policy"),this.checkError(this.$http({url:this.common.formatMsg(this.api.management.delete_flavors_detail_extra,{flavors_id:this.specId}),method:"delete",data:{key:this.setSelectionKeys}}),function(){t.setSelectionKeys=[],t.$notify({title:t.lang.common.success,type:"success",message:t.lang.spec.deleteSetSuccess}),t.getSetList()}))},getSetList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.common.formatMsg(this.api.management.get_flavors_detail_extra,{flavors_id:this.specId}),method:"get"}),function(t){e.loading=!1,e.setObj=t.data,e.setObj.hasOwnProperty("resource:mem_max")&&(e.setObj["resource:mem_max"]=e.common.switchCapacity(e.setObj["resource:mem_max"],"mb","gb"))},function(){e.loading=!1})},getSpecDetail:function(){var e=this;this.checkError(this.$http({url:this.common.formatMsg(this.api.management.get_flavors_detail,{id:this.specId}),method:"get"}),function(t){e.specDetail=t.data})},selectSetKeys:function(e){var t=[];e.forEach(function(e){t.push(e.key)}),this.setSelectionKeys=t}},mounted:function(){this.getSetList(),this.getSpecDetail()}},v={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{attrs:{type:"flex",direction:"vertical"}},[s("pana-breadcrumb",{attrs:{back:!0}}),e._v(" "),s("el-main",[s("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[s("el-col",{attrs:{span:12}},[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreateSet=!0}}},[e._v("\n                    "+e._s(e.lang.common.create)+"\n                ")]),e._v(" "),s("el-button",{attrs:{disabled:1!==e.setSelectionKeys.length},on:{click:function(t){e.showEditSet=!0}}},[e._v("\n                    "+e._s(e.lang.common.edit)+"\n                ")]),e._v(" "),s("el-button",{attrs:{disabled:0===e.setSelectionKeys.length},on:{click:function(t){e.showDeleteSet=!0}}},[e._v("\n                    "+e._s(e.lang.common.delete)+"\n                ")])],1),e._v(" "),s("el-col",{attrs:{span:6}})],1),e._v(" "),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:e.setOrigin,"tooltip-effect":"dark"},on:{"selection-change":e.selectSetKeys,"sort-change":e.sortChange}},[s("el-table-column",{attrs:{type:"selection"}}),e._v(" "),s("el-table-column",{attrs:{label:e.lang.common.name,prop:"name"}}),e._v(" "),s("el-table-column",{attrs:{label:e.lang.spec.key,prop:"key"}}),e._v(" "),s("el-table-column",{attrs:{label:e.lang.spec.value,prop:"value"}})],1),e._v(" "),s("pana-create-set",{attrs:{show:e.showCreateSet,specObj:e.specDetail,setObj:e.setObj},on:{closeModal:e.closeCreateSet}}),e._v(" "),s("pana-create-set",{attrs:{show:e.showCreateSet,specObj:e.specDetail,setObj:e.setObj},on:{closeModal:e.closeCreateSet}}),e._v(" "),s("pana-delete-set",{attrs:{show:e.showDeleteSet},on:{closeModal:e.closeDeleteSet}}),e._v(" "),s("pana-edit-set",{attrs:{show:e.showEditSet,specObj:e.specDetail,setObj:e.setObj,currentName:e.setSelectionKeys[0]},on:{closeModal:e.closeEditSet}})],1)],1)},staticRenderFns:[]};var y=s("C7Lr")(b,v,!1,function(e){s("deg/")},"data-v-cc0f58e4",null);t.default=y.exports}});