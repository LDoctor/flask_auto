webpackJsonp([45],{"1lOW":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("1JPr"),n=o("aA9S"),i=o.n(n),r={data:function(){return{labelWidth:"100px",form:{companyName:"",companyShortName:"",desc:"",companyLogo:""},file:"",rules:{companyName:[{required:!0,message:this.lang.common.required_item,trigger:"blur"},{min:1,max:32,message:this.lang.common.validateLength32,trigger:"blur"}],companyShortName:[{required:!0,message:this.lang.common.required_item,trigger:"blur"},{min:1,max:32,message:this.lang.common.validateLength32,trigger:"blur"}],desc:[{max:100,message:this.lang.common.validateLength100,trigger:"blur"}],companyLogo:[{required:!0,message:this.lang.common.required_item,trigger:"blur"},{validator:this.validateFiletype,trigger:"change"},{validator:this.validateFileSize,trigger:"change"}]},disable:!1}},computed:{},props:{show:Boolean,enterpriseInfo:Object},methods:{validateFiletype:function(e,t,o){var a=this.form.companyLogo,n=a.lastIndexOf("."),i=a.substring(n+1);-1===["jpg","jpeg","png"].indexOf(i)?o(new Error(this.lang.companyManage.validLogoType)):o()},validateFileSize:function(e,t,o){this.file.size>this.common.switchCapacity(1,"MB","B")?o(new Error(this.lang.companyManage.validLogoSize)):o()},reupload:function(){this.$refs.uploadLogo.clearFiles(),this.removeFile()},handleChange:function(e){var t=this;this.file=e,this.form.companyLogo=e.name,this.$refs.form.validateField("companyLogo",function(e){if(e)return t.reupload(),!1;document.querySelector("#edit-company #upload-logo .el-upload").style.display="none"})},uploadFile:function(e){},removeFile:function(){this.form.companyLogo="",this.file="",document.querySelector("#edit-company #upload-logo .el-upload").style.display="block"},closeModal:function(){i()(this.$data,this.$options.data.call(this)),this.$emit("closeModal")},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.form.companyName=this.enterpriseInfo.name,this.form.companyShortName=this.enterpriseInfo.abbreviation,this.form.desc=this.enterpriseInfo.description},confirm:function(){var e=this,t=this;this.$refs.form.validate(function(o){if(o){var a={name:t.form.companyName,abbreviation:t.form.companyShortName,description:t.form.desc,logo_path:""};t.closeModal(!1),e.checkError(e.$http({url:e.api.management.enterprise,method:"put",data:a}),function(e){t.$emit("refresh"),t.$notify({title:t.lang.common.success,type:"success",message:t.lang.companyManage.editCompanySuccess})})}})}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{staticClass:"body-dialog",attrs:{id:"edit-company",title:e.lang.companyManage.editCompany,visible:e.show,width:"35%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[o("el-form-item",{attrs:{label:e.lang.companyManage.companyName,"label-width":e.labelWidth,prop:"companyName"}},[o("el-input",{model:{value:e.form.companyName,callback:function(t){e.$set(e.form,"companyName",t)},expression:"form.companyName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.lang.companyManage.companyShortName,"label-width":e.labelWidth,prop:"companyShortName"}},[o("el-input",{model:{value:e.form.companyShortName,callback:function(t){e.$set(e.form,"companyShortName",t)},expression:"form.companyShortName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:e.lang.companyManage.decription,"label-width":e.labelWidth,prop:"desc"}},[o("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var l=o("C7Lr")(r,s,!1,function(e){o("JWzG"),o("A56/")},"data-v-2b995df1",null).exports,c={components:{"pana-breadcrumb":a.a,panaEdit:l},data:function(){return{enterpriseInfo:{},showEdit:!1}},mounted:function(){this.getEnterpriseInfo()},computed:{},methods:{getEnterpriseInfo:function(){var e=this;this.checkError(this.$http({url:this.api.management.enterprise,method:"get"}),function(t){e.enterpriseInfo=t.data})},closeEdit:function(){this.showEdit=!1},refresh:function(){this.getEnterpriseInfo()}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{type:"flex",direction:"vertical"}},[o("pana-breadcrumb"),e._v(" "),o("el-main",[o("el-row",{attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:3}},[o("img",{staticClass:"logo",attrs:{src:"static/image/companyLogo.png",alt:""}})]),e._v(" "),o("el-col",{staticStyle:{padding:"10px 0"},attrs:{span:21}},[o("h4",[e._v(e._s(e.enterpriseInfo.name)+"\n                    "),o("img",{attrs:{src:"static/image/edit.png",alt:""},on:{click:function(t){e.showEdit=!0}}})]),e._v(" "),o("el-row",[e._v(e._s(e.lang.companyManage.companyShortName)+": "+e._s(e.enterpriseInfo.abbreviation))]),e._v(" "),o("el-row",[e._v(e._s(e.lang.companyManage.decription)+": "+e._s(e.enterpriseInfo.description)+" ")])],1)],1)],1),e._v(" "),o("pana-edit",{attrs:{show:e.showEdit,enterpriseInfo:e.enterpriseInfo},on:{closeModal:e.closeEdit,refresh:e.refresh}})],1)},staticRenderFns:[]};var p=o("C7Lr")(c,m,!1,function(e){o("JY9V")},"data-v-758e6507",null);t.default=p.exports},"A56/":function(e,t){},JWzG:function(e,t){},JY9V:function(e,t){}});