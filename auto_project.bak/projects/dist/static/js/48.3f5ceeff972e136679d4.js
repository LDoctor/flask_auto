webpackJsonp([48],{"0lCY":function(e,t){},GSiE:function(e,t){},"N+nZ":function(e,t){},ngGD:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("1JPr"),i={props:{show:Boolean},data:function(){return{labelWidth:"100px",file:"",fileSize:"",form:{fileName:""},rules:{fileName:[{required:!0,message:this.lang.softwareAuthorization.placeselectfile,trigger:"blur"},{validator:this.validateFileSize,trigger:"change"},{validator:this.validateFiletype,trigger:"change"}]}}},methods:{closeModal:function(e){e=e||!1,this.$emit("closeModal",e)},handleChange:function(e){this.form.fileName=e.name,this.fileSize=e.size},uploadFile:function(e){this.file=e.file},validateFileSize:function(e,t,o){this.fileSize>this.common.switchCapacity(1,"MB","B")?o(new Error("文件大小不能超过1MB")):o()},validateFiletype:function(e,t,o){".pem"==this.form.fileName.substr(-4,4)?o():o(new Error("请选择格式为.pem格式的文件"))},ensureUpload:function(){var e=this,t=this,o=new FormData;o.append("file",this.file),this.$refs.form.validate(function(a){a&&e.checkError(e.$http({url:e.api.softwareAuthorization.importfile,method:"post",data:o,headers:{"Content-Type":"multipart/form-data"}}),function(e){t.$notify({title:t.lang.common.success,type:"success",message:"上传成功！"}),t.closeModal(!0)})})},initForm:function(){null!=this.$refs.form&&this.$refs.form.resetFields()}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.regularSetup.improtsort,width:"45%",visible:e.show,modal:!0},on:{open:e.initForm,close:e.closeModal}},[o("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.softwareAuthorization.uploadfile,prop:"fileName"}},[o("el-upload",{attrs:{action:"","on-change":e.handleChange,"http-request":e.uploadFile,"show-file-list":!1}},[o("el-input",{model:{value:e.form.fileName,callback:function(t){e.$set(e.form,"fileName",t)},expression:"form.fileName"}},[o("template",{slot:"append"},[e._v(e._s(e.lang.softwareAuthorization.selectfile))])],2)],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.ensureUpload}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var r=o("C7Lr")(i,s,!1,function(e){o("0lCY")},"data-v-e8c3a3ca",null).exports,n={props:{show:Boolean,softCode:String},data:function(){return{labelWidth:"100px",alerttext:"copy"}},methods:{closeModal:function(e){e=e||!1,this.$emit("closeModal",e)},onCopy:function(e){this.$refs.copy_texts.select(),this.alerttext="copied"},onError:function(e){},initForm:function(){null!=this.$refs.form&&this.$refs.form.resetFields()}}},l={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.softwareAuthorization.getmachineCode,width:"45%",visible:e.show,modal:!0},on:{open:e.initForm,close:e.closeModal}},[o("el-form",{ref:"form",attrs:{"label-position":"right"}},[o("el-row",{attrs:{type:"flex",justify:"left"}},[o("el-col",{staticStyle:{"margin-right":"5px"},attrs:{span:20}},[o("el-form-item",{staticClass:"copycontent",attrs:{label:e.lang.softwareAuthorization.machineCode,"label-width":e.labelWidth}},[o("el-input",{ref:"copy_texts",staticClass:"copytext",staticStyle:{width:"100%"},attrs:{id:"copy_text",type:"textarea",autosize:"",readonly:!0},model:{value:e.softCode,callback:function(t){e.softCode=t},expression:"softCode"}}),e._v(" "),o("span",[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.alerttext,placement:"bottom"}},[o("i",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:e.softCode,expression:"softCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:e.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:e.onError,expression:"onError",arg:"error"}],staticClass:"fa fa-copy"})])],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))])],1)],1)},staticRenderFns:[]};var c=o("C7Lr")(n,l,!1,function(e){o("GSiE")},"data-v-1cb11051",null).exports,f={components:{"pana-breadcrumb":a.a,panaimport:r,panacode:c},data:function(){return{showimport:!1,showcode:!1,softwaredetail:"",version:{standard:"标准版",enterprise:"企业版",enterprisehigh:"企业增强版"}}},methods:{closeImprot:function(e){!0===e&&this.getlicenseInfo(),this.showimport=!1},closeCode:function(){this.showcode=!1},getlicenseInfo:function(){var e=this;this.checkError(this.$http({url:this.api.softwareAuthorization.getlicenseInfo,method:"get"}),function(t){null!==t.data&&(e.softwaredetail=t.data)})}},mounted:function(){this.getlicenseInfo()}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{staticClass:"softdiv",attrs:{type:"flex",direction:"vertical"}},[o("pana-breadcrumb"),e._v(" "),o("el-main",[o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:14}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showimport=!0}}},[e._v(e._s(e.lang.softwareAuthorization.importLicense))]),e._v(" "),o("el-button",{on:{click:function(t){e.showcode=!0}}},[e._v(e._s(e.lang.softwareAuthorization.getmachineCode))])],1)],1),e._v(" "),o("p",[e._v(e._s(e.lang.softwareAuthorization.authInfo))]),e._v(" "),o("ul",{staticClass:"softInfo"},[o("li",[o("span",[e._v(e._s(e.lang.softwareAuthorization.versionType)+":")]),e._v(" "),o("i",[e._v(e._s(e.softwaredetail.version))])]),e._v(" "),o("li",[o("span",[e._v(e._s(e.lang.softwareAuthorization.availNode)+":")]),e._v(" "),0!==e.softwaredetail.available_node?o("i",[e._v(e._s(e.softwaredetail.available_node))]):e._e(),e._v(" "),0===e.softwaredetail.available_node?o("i",[e._v("N/A")]):e._e()]),e._v(" "),o("li",[o("span",[e._v(e._s(e.lang.softwareAuthorization.currentNode)+":")]),e._v(" "),o("i",[e._v(e._s(e.softwaredetail.current_node))])]),e._v(" "),o("li",[o("span",[e._v(e._s(e.lang.softwareAuthorization.endTime)+":")]),e._v(" "),e.softwaredetail&&e.softwaredetail.end_time?o("i",[e._v(e._s(e.moment(e.softwaredetail.end_time).format("YYYY-MM-DD")))]):e._e()]),e._v(" "),o("li",[o("span",[e._v(e._s(e.lang.softwareAuthorization.serviceTime)+":")]),e._v(" "),e.softwaredetail&&e.softwaredetail.end_service_time?o("i",[e._v(e._s(e.moment(e.softwaredetail.end_service_time).format("YYYY-MM-DD")))]):e._e()]),e._v(" "),o("li",[o("span",[e._v(e._s(e.lang.softwareAuthorization.snNumber)+":")]),e._v(" "),o("i",[e._v("\n                    "+e._s(e.softwaredetail.snArray)+"\n                ")])])])],1),e._v(" "),o("panaimport",{attrs:{show:e.showimport},on:{closeModal:e.closeImprot}}),e._v(" "),o("panacode",{attrs:{show:e.showcode,softCode:e.softwaredetail.cluster_fingerprint},on:{closeModal:e.closeCode}})],1)},staticRenderFns:[]};var p=o("C7Lr")(f,d,!1,function(e){o("N+nZ")},"data-v-4be409b8",null);t.default=p.exports}});