webpackJsonp([5],{"1o0s":function(e,t){},"5BR7":function(e,t){},"5ziM":function(e,t){},"87CJ":function(e,t){},"8HiS":function(e,t){},FSDC:function(e,t){},hESZ:function(e,t,o){"use strict";var r=o("3cXf"),a=o.n(r),s=o("aA9S"),l=o.n(s),n={name:"createUser",data:function(){return{labelWidth:"120px",loading:!1,form:{name:"",password:"",confirmPassword:"",groups:[]},rules:{name:[{required:!0,message:this.lang.poolStorageUser.userRequiredRule,trigger:"blur"},{min:1,max:18,message:this.lang.poolStorageUser.userRangeRule,trigger:"blur"},{validator:this.common.validateStorageName,message:this.lang.poolStorageUser.userFormatRule,trigger:"blur"}],password:[{required:!0,message:this.lang.userManage.passwordRequiredRule,trigger:"blur"},{min:6,max:16,message:this.lang.userManage.passwordRangeRule,trigger:"blur"}]},groupList:[],disable:!1}},props:{show:Boolean},methods:{closeModal:function(e){l()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.getGroupList()},createUser:function(){var e=this;this.disable=!0,this.$refs.form.validate(function(t){t?(delete e.form.confirmPassword,e.form=e.common.dropEmptyParameter(e.form),null==e.form.group&&(e.form.group=[]),e.checkError(e.$http({url:e.api.user.user,method:"post",data:e.form}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.poolStorageUser.createUserSuccess}),e.closeModal(!0)},function(){e.disable=!1})):e.disable=!1})},getGroupList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.group.group,method:"get"}),function(t){e.loading=!1,e.groupList=t.data},function(){e.loading=!1})},confirmPassword:function(e,t,o){t===e.password?o():o(Error(e.message))}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageUser.createUser,visible:e.show,width:"40%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules,"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.user,"label-width":e.labelWidth,prop:"name"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.userPlaceholder},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.password,"label-width":e.labelWidth,prop:"password"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.passwordPlaceholder,type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.cfmPassword,"label-width":e.labelWidth,prop:"confirmPassword",rules:[{validator:this.confirmPassword,message:this.lang.poolStorageUser.cfmPasswordNotSameRule,password:this.form.password,trigger:"blur"},{required:!0,message:this.lang.poolStorageUser.cfmPasswordRequiredRule,trigger:"blur"}]}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.cfmPasswordPlaceholder,type:"password"},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.selectGroup,"label-width":e.labelWidth}},[o("el-select",{attrs:{filterable:"",multiple:"",placeholder:e.lang.poolStorageUser.groupSelectPlaceyholder,width:"100%"},model:{value:e.form.groups,callback:function(t){e.$set(e.form,"groups",t)},expression:"form.groups"}},e._l(e.groupList,function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.createUser}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var c=o("C7Lr")(n,i,!1,function(e){o("vlkZ")},"data-v-6278ab9c",null).exports,u={name:"pana-delete-user",props:{show:Boolean},methods:{closeModal:function(e){e=e||!1,this.$emit("closeModal",e)},deleteUser:function(){this.closeModal(!0)}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.common.info,visible:e.show,width:"30%",modal:!0},on:{close:e.closeModal}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:10}},[e._v(e._s(e.lang.userManage.deleteUserInfo))])],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},p=o("C7Lr")(u,m,!1,null,null,null).exports,g={name:"createUser",data:function(){return{labelWidth:"120px",loading:!1,form:{name:"",user_id:"",groups:[]},rules:{name:[{required:!0,message:this.lang.poolStorageUser.userRequiredRule,trigger:"blur"},{min:1,max:18,message:this.lang.poolStorageUser.userRangeRule,trigger:"blur"},{validator:this.common.validateStorageName,message:this.lang.poolStorageUser.userFormatRule,trigger:"blur"}],user_id:[{required:!0,message:this.lang.poolStorageUser.userIdRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1e3,max:65532,message:this.lang.poolStorageUser.userIdNumberRange,trigger:"blur"},{validator:this.common.validateNumberType,message:this.lang.poolStorageUser.userIdNumberType,trigger:"blur"}]},groupList:[],disable:!1,originUserName:null}},props:{show:Boolean,user:Object},methods:{closeModal:function(e){l()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.getGroupList(),this.form=this.user,delete this.form.password,this.originUserName=this.user.name},editUser:function(){var e=this;this.disable=!0,this.$refs.form.validate(function(t){t?(e.form=e.common.dropEmptyParameter(e.form),delete e.form.password,null==e.form.groups&&(e.form.groups=[]),e.checkError(e.$http({url:e.common.formatMsg(e.api.user.user_detail,{user_name:e.originUserName}),method:"put",data:e.form}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.poolStorageUser.editUserSuccess}),e.closeModal(!0)},function(){e.disable=!1})):e.disable=!1})},getGroupList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.group.group,method:"get"}),function(t){e.loading=!1,e.groupList=t.data},function(){e.loading=!1})}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageUser.editUser,visible:e.show,width:"40%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules,"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.user,"label-width":e.labelWidth,prop:"name"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.userPlaceholder},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.userId,"label-width":e.labelWidth,prop:"user_id"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.userIdPlaceholder},model:{value:e.form.user_id,callback:function(t){e.$set(e.form,"user_id",t)},expression:"form.user_id"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.selectGroup,"label-width":e.labelWidth}},[o("el-select",{attrs:{filterable:"",multiple:"",placeholder:e.lang.poolStorageUser.groupSelectPlaceyholder,width:"100%"},model:{value:e.form.groups,callback:function(t){e.$set(e.form,"groups",t)},expression:"form.groups"}},e._l(e.groupList,function(e,t){return o("el-option",{key:t,attrs:{label:e.name,value:e.name}})}),1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.editUser}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var f=o("C7Lr")(g,d,!1,function(e){o("5BR7")},"data-v-4235ed59",null).exports,h={name:"createUser",data:function(){return{labelWidth:"120px",form:{name:"",password:"",confirmPassword:null,user_id:"",groups:[]},rules:{password:[{required:!0,message:this.lang.userManage.passwordRequiredRule,trigger:"blur"},{min:6,max:16,message:this.lang.userManage.passwordRangeRule,trigger:"blur"}]},groupList:[],disable:!1,originUserName:null}},props:{show:Boolean,user:Object},methods:{closeModal:function(e){l()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.form=this.user},resetPassword:function(){var e=this;this.disable=!0,this.$refs.form.validate(function(t){t?(e.form=e.common.dropEmptyParameter(e.form),delete e.form.confirmPassword,null==e.form.groups&&(e.form.groups=[]),e.checkError(e.$http({url:e.common.formatMsg(e.api.user.user_detail,{user_name:e.form.name}),method:"put",data:e.form}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.poolStorageUser.resetPasswordSuccess}),e.closeModal(!0)},function(){e.disable=!1})):e.disable=!1})},validateConfirmPassword:function(e,t,o){t===this.form.password?o():o(Error(e.message))}}},b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageUser.resetPassword,visible:e.show,width:"40%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.password,"label-width":e.labelWidth,prop:"password"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.passwordPlaceholder,type:"password"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageUser.cfmPassword,"label-width":e.labelWidth,prop:"confirmPassword",rules:[{required:!0,message:this.lang.poolStorageUser.cfmPasswordRequiredRule,trigger:"blur"},{validator:e.validateConfirmPassword,message:e.lang.poolStorageUser.cfmPasswordNotSameRule,trigger:"blur"}]}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.cfmPasswordPlaceholder,type:"password"},model:{value:e.form.confirmPassword,callback:function(t){e.$set(e.form,"confirmPassword",t)},expression:"form.confirmPassword"}})],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.resetPassword}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var v=o("C7Lr")(h,b,!1,function(e){o("1o0s")},"data-v-07a13d5e",null).exports,w=o("zsLt"),_=o.n(w),S={name:"pana-add-staff",props:{show:Boolean},methods:{closeModal:function(e){e=e||!1,l()(this.$data,this.$options.data.call(this)),this.$emit("closeModal",e)},initForm:function(){this.messageSuccess=!0,null!=this.$refs.form&&this.$refs.form.clearValidate();var e=sessionStorage.getItem("panaCurrentPool");this.poolList=null==e?[]:JSON.parse(e),this.getShowUserList()},getShowUserList:function(){var e=this;this.checkError(this.$http({url:this.api.user.user,method:"get"}),function(t){e.getUserList(t)})},getUserList:function(e){var t=this;this.checkError(this.$http({url:this.api.management.get_users_state+"?size=0",method:"get"}),function(o){var r=new _.a(o.data.map(function(e){return e.name||e.username}));e.data.filter(function(e){return!r.delete(e.name||e.username)});o.data.filter(function(e){return r.has(e.name||e.username)}).map(function(e){e.user_name_department=e.username+(e.department?" - "+e.department.department_name:""),t.allUsers.push(e)})})},addUser:function(){var e=this;0!=this.selectedUsers.length?this.checkError(this.$http({url:this.common.formatMsg(this.api.storage.post_storage_pool_gateway_users,{pool_id:this.poolList.id}),method:"post",data:{users:e.selectedUsers}}),function(t){e.messageSuccess=!1,e.importPrompt=t.message}):e.$notify({title:e.lang.common.error,type:"error",message:e.lang.poolStorageUser.errorNoUser})}},data:function(){return{labelWidth:"100px",departments:[],form:{},allUsers:[],selectedUsers:[],departmentLoading:!1,poolList:[],messageSuccess:!0,importPrompt:""}}},y={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageUser.importUser,width:"30%",visible:e.show,modal:!0},on:{open:e.initForm,close:e.closeModal}},[1==e.messageSuccess?o("el-row",{attrs:{justify:"center"}},[o("el-col",{attrs:{span:24}},[o("span",{staticClass:"initial-import-user"},[e._v(e._s(e.lang.departmentManage.initialImportUser))])])],1):e._e(),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[1==e.messageSuccess?o("el-transfer",{attrs:{filterable:"",titles:[e.lang.departmentManage.availableStaff,e.lang.departmentManage.selectedStaff],props:{label:"user_name_department",key:"id"},format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},data:e.allUsers},model:{value:e.selectedUsers,callback:function(t){e.selectedUsers=t},expression:"selectedUsers"}}):e._e(),e._v(" "),0==e.messageSuccess?o("span",[e._v(e._s(e.importPrompt))]):e._e()],1),e._v(" "),1==e.messageSuccess?o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v(e._s(e.lang.common.confirm))])],1):e._e(),e._v(" "),0==e.messageSuccess?o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeModal(!0)}}},[e._v(e._s(e.lang.common.confirm))])],1):e._e()],1)},staticRenderFns:[]};var U={name:"cloudDisk",components:{"pana-create-user":c,"pana-delete-user":p,"pana-edit-user":f,"pana-reset-password":v,"pana-import-user":o("C7Lr")(S,y,!1,function(e){o("5ziM"),o("xcf8")},"data-v-4520213a",null).exports},data:function(){return{pageSize:10,userSearch:"",userOrigin:[],userSelectionNames:[],userPage:1,showCreateUser:!1,showDeleteUser:!1,showEditUser:!1,showResetPassword:!1,showImportUser:!1,loading:!1,editObj:null,showImportPrompt:!1}},computed:{userFilter:function(){var e=this;return this.userOrigin.filter(function(t){return""===e.userSearch||-1!==a()(t).search(e.userSearch)})},userTable:function(){return this.userFilter.length>this.pageSize?this.userFilter.slice((this.userPage-1)*this.pageSize,this.userPage*this.pageSize):this.userFilter}},methods:{switchUserPage:function(e){this.userPage=e},sortChange:function(e){var t=null==e.order?0:"ascending"===e.order?1:-1;this.userOrigin=this.userOrigin.sort(function(o,r){switch(e.prop){case"user_id":return(o[e.prop]-r[e.prop])*t;default:return o[e.prop]=null==o[e.prop]?"":o[e.prop],r[e.prop]=null==r[e.prop]?"":r[e.prop],(o[e.prop]>r[e.prop]?1:-1)*t}})},closeCreateUser:function(e){!0===e&&this.getUserList(),this.showCreateUser=!1},closeEditUser:function(e){!0===e&&this.getUserList(),this.showEditUser=!1},closeDeleteUser:function(e){var t=this;this.showDeleteUser=!1,!0===e&&(this.checkError(this.$http({url:this.api.user.user_action,method:"post",data:{names:this.userSelectionNames}}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.poolStorageUser.deleteUserSuccess}),t.getUserList()}),t.userSelectionNames=[])},getUserList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.user.user,method:"get"}),function(t){e.loading=!1,e.userOrigin=t.data},function(){e.loading=!1})},selectUserNames:function(e){var t=[];e.forEach(function(e){t.push(e.name)}),this.userSelectionNames=t},editUser:function(e){this.editObj=this.common.deepCopyByJson(e),this.showEditUser=!0},resetPassword:function(e){this.editObj=this.common.deepCopyByJson(e),this.showResetPassword=!0},closeImportUser:function(e){console.log(e,"isImport");this.showImportUser=!1,!0===e&&this.getUserList()}},mounted:function(){this.getUserList()}},x={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{type:"flex",direction:"vertical"}},[o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreateUser=!0}}},[e._v(e._s(e.lang.common.create))]),e._v(" "),o("el-button",{attrs:{disabled:0===e.userSelectionNames.length},on:{click:function(t){e.showDeleteUser=!0}}},[e._v(e._s(e.lang.common.delete))])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{placeholder:e.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:e.userSearch,callback:function(t){e.userSearch=t},expression:"userSearch"}})],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:e.getUserList}})],1)],1)],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:e.userTable,"tooltip-effect":"dark"},on:{"selection-change":e.selectUserNames,"sort-change":e.sortChange}},[o("el-table-column",{attrs:{type:"selection"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.poolStorageUser.user,sortable:"custom",prop:"name"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.poolStorageUser.userId,sortable:"custom",prop:"user_id"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.poolStorageUser.groupName},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.groups,function(t,r){return o("div",{key:r},[e._v(e._s(t))])})}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.common.operation},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.editUser(t.row)}}},[e._v(e._s(e.lang.common.update))]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.resetPassword(t.row)}}},[e._v(e._s(e.lang.poolStorageUser.resetPassword))])]}}])})],1),e._v(" "),o("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[e.userFilter.length>e.pageSize?o("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":e.lang.common.prevPage,"next-text":e.lang.common.nextPage,total:e.userFilter.length,"page-size":e.pageSize},on:{"current-change":e.switchUserPage}},[e._t("default",[o("span",{staticClass:"pagination-slot"},[e._v(e._s(e.common.formatMsg(e.lang.common.paginationMsg,{current:this.userPage,total:this.userFilter.length})))])])],2):e._e()],1),e._v(" "),o("pana-create-user",{attrs:{show:e.showCreateUser},on:{closeModal:e.closeCreateUser}}),e._v(" "),o("pana-delete-user",{attrs:{show:e.showDeleteUser},on:{closeModal:e.closeDeleteUser}}),e._v(" "),o("pana-edit-user",{attrs:{show:e.showEditUser,user:e.editObj},on:{closeModal:e.closeEditUser}}),e._v(" "),o("pana-reset-password",{attrs:{show:e.showResetPassword,user:e.editObj},on:{closeModal:function(t){e.showResetPassword=!1}}}),e._v(" "),o("pana-import-user",{attrs:{show:e.showImportUser},on:{closeModal:e.closeImportUser}})],1)},staticRenderFns:[]};var k=o("C7Lr")(U,x,!1,function(e){o("8HiS")},"data-v-3e4e2ec0",null);t.a=k.exports},iQcf:function(e,t){},"jeg/":function(e,t){},vlkZ:function(e,t){},wEst:function(e,t,o){"use strict";var r=o("3cXf"),a=o.n(r),s=o("aA9S"),l=o.n(s),n={name:"createGroup",data:function(){return{labelWidth:"60px",loading:!1,form:{name:"",members:[]},rules:{name:[{required:!0,message:this.lang.poolStorageGroup.groupRequiredRule,trigger:"blur"},{min:1,max:18,message:this.lang.poolStorageGroup.groupRangeRule,trigger:"blur"},{validator:this.common.validateStorageName,message:this.lang.poolStorageGroup.groupFormatRule,trigger:"blur"}]},userList:[],disable:!1}},props:{show:Boolean},methods:{closeModal:function(e){l()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.getUserList()},createGroup:function(){var e=this;this.disable=!0,this.form=this.common.dropEmptyParameter(this.form),this.$refs.form.validate(function(t){t?e.checkError(e.$http({url:e.api.group.group,method:"post",data:e.form}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.poolStorageGroup.createGroupSuccess}),e.closeModal(!0)},function(){e.disable=!1}):e.disable=!1})},getUserList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.user.user,method:"get"}),function(t){e.loading=!1,e.userList=t.data},function(){e.loading=!1})}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{staticClass:"transfer-dialog",attrs:{title:e.lang.poolStorageGroup.createGroup,visible:e.show,width:"45%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules,"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageGroup.group,"label-width":e.labelWidth,prop:"name"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageGroup.groupPlaceholder},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageGroup.member,"label-width":e.labelWidth}},[o("el-col",{attrs:{span:24}},[o("el-transfer",{attrs:{filterable:"",titles:[e.lang.poolStorageGroup.availableMember,e.lang.poolStorageGroup.selectedMember],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},props:{label:"name",key:"name"},data:e.userList},model:{value:e.form.members,callback:function(t){e.$set(e.form,"members",t)},expression:"form.members"}})],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.createGroup}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var c=o("C7Lr")(n,i,!1,function(e){o("jeg/")},null,null).exports,u={name:"pana-delete-user",props:{show:Boolean},methods:{closeModal:function(e){e=e||!1,this.$emit("closeModal",e)},deleteUser:function(){this.closeModal(!0)}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.common.info,visible:e.show,width:"30%",modal:!0},on:{close:e.closeModal}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:10}},[e._v(e._s(e.lang.poolStorageGroup.confirmDeleteGroup))])],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},p=o("C7Lr")(u,m,!1,null,null,null).exports,g={name:"createGroup",data:function(){return{labelWidth:"120px",form:{name:"",group_id:"",members:[]},rules:{name:[{required:!0,message:this.lang.poolStorageGroup.groupRequiredRule,trigger:"blur"},{min:1,max:18,message:this.lang.poolStorageGroup.groupRangeRule,trigger:"blur"},{validator:this.common.validateStorageName,message:this.lang.poolStorageGroup.groupFormatRule,trigger:"blur"}],group_id:[{required:!0,message:this.lang.poolStorageGroup.groupIdRequiredRule,trigger:"blur"},{validator:this.common.validateNumberRange,min:1e3,max:65532,message:this.lang.poolStorageGroup.groupIdNumberRange,trigger:"blur"},{validator:this.common.validateNumberType,message:this.lang.poolStorageGroup.groupIdNumberType,trigger:"blur"}]},disable:!1,originGroupName:null}},props:{show:Boolean,group:Object},methods:{closeModal:function(e){l()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.form=this.group,this.originGroupName=this.group.name},editGroup:function(){var e=this;this.disable=!0,this.$refs.form.validate(function(t){t?(e.form=e.common.dropEmptyParameter(e.form),null==e.form.members&&(e.form.members=[]),e.checkError(e.$http({url:e.common.formatMsg(e.api.group.group_detail,{group_name:e.originGroupName}),method:"put",data:e.form}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.poolStorageGroup.editGroupSuccess}),e.closeModal(!0)},function(){e.disable=!1})):e.disable=!1})}}},d={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageGroup.editGroup,visible:e.show,width:"40%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageGroup.group,"label-width":e.labelWidth,prop:"name"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageUser.groupPlaceholder},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageGroup.groupId,"label-width":e.labelWidth,prop:"group_id"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{placeholder:e.lang.poolStorageGroup.groupIdPlaceholder},model:{value:e.form.group_id,callback:function(t){e.$set(e.form,"group_id",t)},expression:"form.group_id"}})],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.editGroup}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},f=o("C7Lr")(g,d,!1,null,null,null).exports,h={name:"createGroup",data:function(){return{labelWidth:"60px",loading:!1,form:{name:"",group_id:"",members:[]},rules:{name:[{required:!0,message:this.lang.poolStorageGroup.groupRequiredRule,trigger:"blur"},{min:1,max:18,message:this.lang.poolStorageGroup.groupRangeRule,trigger:"blur"},{validator:this.common.validateStorageName,message:this.lang.poolStorageGroup.groupFormatRule,trigger:"blur"}]},userList:[],disable:!1}},props:{show:Boolean,group:Object},methods:{closeModal:function(e){l()(this.$data,this.$options.data.call(this)),e=e||!1,this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate(),this.form=this.group,this.getUserList()},manageMember:function(){var e=this;this.disable=!0,this.$refs.form.validate(function(t){t?(e.form=e.common.dropEmptyParameter(e.form),null==e.form.members&&(e.form.members=[]),e.checkError(e.$http({url:e.common.formatMsg(e.api.group.group_detail,{group_name:e.form.name}),method:"put",data:e.form}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.poolStorageGroup.manageMemberSuccess}),e.closeModal(!0)},function(){e.disable=!1})):e.disable=!1})},getUserList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.user.user,method:"get"}),function(t){e.userList=t.data,e.loading=!1},function(){e.loading=!1})}}},b={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageGroup.manageMember,visible:e.show,width:"45%"},on:{close:e.closeModal,open:e.initForm}},[o("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"80px",model:e.form,rules:e.rules,"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.poolStorageGroup.member,"label-width":e.labelWidth}},[o("el-col",{attrs:{span:24}},[o("el-transfer",{attrs:{filterable:"",titles:[e.lang.poolStorageGroup.availableMember,e.lang.poolStorageGroup.selectedMember],format:{noChecked:"${total}",hasChecked:"${checked}/${total}"},props:{label:"name",key:"name"},data:e.userList},model:{value:e.form.members,callback:function(t){e.$set(e.form,"members",t)},expression:"form.members"}})],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.manageMember}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},v=o("C7Lr")(h,b,!1,null,null,null).exports,w={name:"createUser",props:{show:Boolean,members:{type:Array,default:function(){return[]}}},computed:{memberCount:function(){return null==this.members?0:this.members.length}},methods:{closeModal:function(){this.$emit("closeModal",!1)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate()}}},_={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.poolStorageGroup.checkMember,visible:e.show,width:"40%"},on:{close:e.closeModal,open:e.initForm}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:23}},[o("el-table",{ref:"singleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{data:e.members,"tooltip-effect":"dark"}},[o("el-table-column",{attrs:{label:e.lang.poolStorageGroup.username},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                        "+e._s(t.row)+"\n                    ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:e.common.formatMsg(e.lang.poolStorageGroup.memberCount,{count:this.memberCount}),align:"right"}})],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.close))])],1)],1)},staticRenderFns:[]};var S={name:"cloudDisk",components:{"pana-create-group":c,"pana-delete-group":p,"pana-edit-group":f,"pana-manage-member":v,"pana-check-member":o("C7Lr")(w,_,!1,function(e){o("FSDC")},"data-v-b8f368b0",null).exports},data:function(){return{pageSize:10,groupSearch:"",groupOrigin:[],groupSelectionNames:[],groupPage:1,showCreateGroup:!1,showDeleteGroup:!1,showEditGroup:!1,showManageMember:!1,showCheckMember:!1,editObj:null,members:null,loading:!1}},computed:{groupFilter:function(){var e=this;return this.groupOrigin.filter(function(t){return""===e.groupSearch||-1!==a()(t).search(e.groupSearch)})},groupTable:function(){return this.groupFilter.length>this.pageSize?this.groupFilter.slice((this.groupPage-1)*this.pageSize,this.groupPage*this.pageSize):this.groupFilter}},methods:{switchGroupPage:function(e){this.groupPage=e},closeCreateGroup:function(e){!0===e&&this.getGroupList(),this.showCreateGroup=!1},closeEditGroup:function(e){!0===e&&this.getGroupList(),this.showEditGroup=!1},closeManageGroup:function(e){!0===e&&this.getGroupList(),this.showManageMember=!1},sortChange:function(e){var t=null==e.order?0:"ascending"===e.order?1:-1;this.groupOrigin=this.groupOrigin.sort(function(o,r){switch(e.prop){case"group_id":return(o[e.prop]-r[e.prop])*t;default:return o[e.prop]=null==o[e.prop]?"":o[e.prop],r[e.prop]=null==r[e.prop]?"":r[e.prop],(o[e.prop]>r[e.prop]?1:-1)*t}})},closeDeleteGroup:function(e){var t=this;this.showDeleteGroup=!1,!0===e&&this.checkError(this.$http({url:this.api.group.group_action,method:"post",data:{names:this.groupSelectionNames}}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.poolStorageGroup.deleteGroupSuccess}),t.getGroupList()})},getGroupList:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.group.group,method:"get"}),function(t){e.loading=!1,e.groupOrigin=t.data},function(){e.loading=!1})},selectGroupNames:function(e){var t=[];e.forEach(function(e){t.push(e.name)}),this.groupSelectionNames=t},editGroup:function(e){this.editObj=this.common.deepCopyByJson(e),this.showEditGroup=!0},manageMember:function(e){this.editObj=this.common.deepCopyByJson(e),this.showManageMember=!0},checkMember:function(e){this.members=this.common.deepCopyByJson(e),this.showCheckMember=!0}},mounted:function(){this.getGroupList()}},y={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{type:"flex",direction:"vertical"}},[o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreateGroup=!0}}},[e._v("\n                "+e._s(e.lang.common.create)+"\n            ")]),e._v(" "),o("el-button",{attrs:{disabled:0===e.groupSelectionNames.length},on:{click:function(t){e.showDeleteGroup=!0}}},[e._v("\n                "+e._s(e.lang.common.delete)+"\n            ")])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{placeholder:e.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:e.groupSearch,callback:function(t){e.groupSearch=t},expression:"groupSearch"}})],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:e.getGroupList}})],1)],1)],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:e.groupTable,"tooltip-effect":"dark"},on:{"selection-change":e.selectGroupNames,"sort-change":e.sortChange}},[o("el-table-column",{attrs:{type:"selection"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.poolStorageGroup.group,sortable:"custom",prop:"name"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.poolStorageGroup.groupId,sortable:"custom",prop:"group_id"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.common.operation},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.editGroup(t.row)}}},[e._v("\n                    "+e._s(e.lang.common.update)+"\n                ")]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.manageMember(t.row)}}},[e._v("\n                    "+e._s(e.lang.poolStorageGroup.manageMember)+"\n                ")]),e._v(" "),o("el-button",{attrs:{type:"text"},on:{click:function(o){return e.checkMember(t.row.members)}}},[e._v("\n                    "+e._s(e.lang.poolStorageGroup.checkMember)+"\n                ")])]}}])})],1),e._v(" "),o("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[e.groupFilter.length>e.pageSize?o("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":e.lang.common.prevPage,"next-text":e.lang.common.nextPage,total:e.groupFilter.length,"page-size":e.pageSize},on:{"current-change":e.switchGroupPage}},[e._t("default",[o("span",{staticClass:"pagination-slot"},[e._v("\n                    "+e._s(e.common.formatMsg(e.lang.common.paginationMsg,{current:this.groupPage,total:this.groupFilter.length}))+"\n                ")])])],2):e._e()],1),e._v(" "),o("pana-create-group",{attrs:{show:e.showCreateGroup},on:{closeModal:e.closeCreateGroup}}),e._v(" "),o("pana-delete-group",{attrs:{show:e.showDeleteGroup},on:{closeModal:e.closeDeleteGroup}}),e._v(" "),o("pana-edit-group",{attrs:{show:e.showEditGroup,group:e.editObj},on:{closeModal:e.closeEditGroup}}),e._v(" "),o("pana-manage-member",{attrs:{show:e.showManageMember,group:e.editObj},on:{closeModal:e.closeManageGroup}}),e._v(" "),o("pana-check-member",{attrs:{show:e.showCheckMember,members:e.members},on:{closeModal:function(t){e.showCheckMember=!1}}})],1)},staticRenderFns:[]};var U=o("C7Lr")(S,y,!1,function(e){o("87CJ")},"data-v-3c4dc5d8",null);t.a=U.exports},xYTR:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("1JPr"),a=o("hESZ"),s=o("wEst"),l={name:"pool-storage-detail",components:{"pana-breadcrumb":r.a,"pana-user-manage":a.a,"pana-group-manage":s.a},props:{id:String},data:function(){return{activeName:"user"}},computed:{poolId:function(){return this.$route.params.id}},watch:{activeName:function(){this.getActiveList()}},methods:{getActiveList:function(){"user"===this.activeName?this.$refs.user.getUserList():this.$refs.group.getGroupList()}}},n={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{type:"flex",direction:"vertical"}},[o("pana-breadcrumb",{attrs:{changePool:!0,callback:e.getActiveList}}),e._v(" "),o("el-main",[o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:e.lang.storagePool.user,name:"user"}},[o("pana-user-manage",{ref:"user"})],1),e._v(" "),o("el-tab-pane",{attrs:{label:e.lang.storagePool.group,name:"group"}},[o("pana-group-manage",{ref:"group"})],1)],1)],1)],1)},staticRenderFns:[]};var i=o("C7Lr")(l,n,!1,function(e){o("iQcf")},"data-v-0b2a272a",null);t.default=i.exports},xcf8:function(e,t){}});