webpackJsonp([52],{"3Nye":function(e,t,o){"use strict";var r=o("aA9S"),a=o.n(r),n={name:"pana-create-qos",props:{show:Boolean},methods:{closeModal:function(e){e=e||!1,a()(this.$data,this.$options.data.call(this)),this.$emit("closeModal",e)},initForm:function(){null!=this.$refs.form&&this.$refs.form.clearValidate()},createSafeGroup:function(){var e=this;this.disable=!0;var t=this.form;this.$refs.form.validate(function(o){o?(t=e.common.dropEmptyParameter(t),e.checkError(e.$http({url:e.api.cloud.post_security_groups,method:"post",data:t}),function(){e.$notify({title:e.lang.common.success,type:"success",message:e.lang.safeGroup.createGroupSuccess}),e.closeModal(!0)},function(){e.disable=!1})):e.disable=!1})}},data:function(){return{labelWidth:"100px",form:{name:"",description:""},rules:{name:[{required:!0,message:this.lang.safeGroup.nameRequiredRule,trigger:"blur"},{min:1,max:32,message:this.lang.safeGroup.nameLengthRule,trigger:"blur"},{validator:this.common.validateNetworkName,message:this.lang.safeGroup.nameFormatRule,trigger:"blur"}],description:[{min:1,max:80,message:this.lang.safeGroup.descriptionLengthRule,trigger:"blur"}]},groupLoading:!0,disable:!1}}},s={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.groupLoading,expression:"groupLoading"}],attrs:{title:e.lang.safeGroup.createGroup,width:"40%",visible:e.show,modal:!0},on:{open:e.initForm,close:e.closeModal}},[o("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.rules}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.common.name,"label-width":e.labelWidth,prop:"name"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{required:"",placeholder:e.lang.safeGroup.groupNamePlaceholder},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1)],1)],1),e._v(" "),o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:20}},[o("el-form-item",{attrs:{label:e.lang.common.description,"label-width":e.labelWidth,prop:"description"}},[o("el-col",{attrs:{span:16}},[o("el-input",{attrs:{type:"textarea",rows:3,required:"",placeholder:e.lang.safeGroup.groupDescPlaceholder},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1)],1)],1)],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary",disabled:e.disable},on:{click:e.createSafeGroup}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]};var l=o("C7Lr")(n,s,!1,function(e){o("dM8T")},"data-v-0f802745",null);t.a=l.exports},"Mah+":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("3cXf"),a=o.n(r),n=o("1JPr"),s=o("3Nye"),l={name:"pana-delete-group",props:{show:Boolean},methods:{closeModal:function(e){e=e||!1,this.$emit("closeModal",e)},deleteQos:function(){this.closeModal(!0)}}},i={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:e.lang.common.info,visible:e.show,width:"30%",modal:!0},on:{close:e.closeModal}},[o("el-row",{attrs:{type:"flex",justify:"center"}},[o("el-col",{attrs:{span:10}},[e._v(e._s(e.lang.safeGroup.deleteGroupInfo))])],1),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.deleteQos}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},c=o("C7Lr")(l,i,!1,null,null,null).exports,p={name:"cloudDisk",components:{"pana-breadcrumb":n.a,"pana-create-group":s.a,"pana-delete-group":c},data:function(){return{sortOrder:0,sortProp:"",pageSize:10,groupSearch:"",groupOrigin:[],groupSelectionIds:[],groupPage:1,showCreateGroup:!1,showDeleteGroup:!1,loading:!1}},watch:{groupSearch:function(){this.groupPage=1}},computed:{groupFilter:function(){var e=this;return this.groupOrigin.filter(function(t){return""===e.groupSearch||-1!==a()(t).search(e.groupSearch)}).sort(function(t,o){return t[e.sortProp]=null==t[e.sortProp]?"":t[e.sortProp],o[e.sortProp]=null==o[e.sortProp]?"":o[e.sortProp],(t[e.sortProp]>o[e.sortProp]?1:-1)*e.sortOrder})},groupTable:function(){return this.groupFilter.length>this.pageSize?this.groupFilter.slice((this.groupPage-1)*this.pageSize,this.groupPage*this.pageSize):this.groupFilter}},methods:{switchGroupPage:function(e){this.groupPage=e},sortChange:function(e){var t=null==e.order?0:"ascending"===e.order?1:-1;this.sortProp=e.prop,this.sortOrder=t,this.groupOrigin=this.groupOrigin.sort(function(o,r){return o[e.prop]=null==o[e.prop]?"":o[e.prop],r[e.prop]=null==r[e.prop]?"":r[e.prop],(o[e.prop]>r[e.prop]?1:-1)*t})},closeCreateGroup:function(e){!0===e&&this.getSafeGroup(),this.showCreateGroup=!1},closeDeleteGroup:function(e){var t=this;this.showDeleteGroup=!1,!0===e&&this.checkError(this.$http({url:this.api.cloud.post_security_groups_batch_delete,method:"post",data:{ids:this.groupSelectionIds}}),function(){t.$notify({title:t.lang.common.success,type:"success",message:t.lang.safeGroup.deleteGroupSuccess}),t.getSafeGroup()})},getSafeGroup:function(){var e=this;this.loading=!0,this.checkError(this.$http({url:this.api.cloud.get_security_groups,method:"get"}),function(t){e.loading=!1,e.groupOrigin=t.data},function(){e.loading=!1})},selectGroupIds:function(e){var t=[];e.forEach(function(e){t.push(e.id)}),this.groupSelectionIds=t}},mounted:function(){this.getSafeGroup()}},u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-container",{attrs:{type:"flex",direction:"vertical"}},[o("pana-breadcrumb",{attrs:{changePool:!0,callback:e.getSafeGroup}}),e._v(" "),o("el-main",[o("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[o("el-col",{attrs:{span:12}},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showCreateGroup=!0}}},[e._v("\n                    "+e._s(e.lang.common.create)+"\n                ")]),e._v(" "),o("el-button",{attrs:{disabled:0===e.groupSelectionIds.length},on:{click:function(t){e.showDeleteGroup=!0}}},[e._v("\n                    "+e._s(e.lang.common.delete)+"\n                ")])],1),e._v(" "),o("el-col",{attrs:{span:6}},[o("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[o("el-col",{attrs:{span:22}},[o("el-input",{attrs:{placeholder:e.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:e.groupSearch,callback:function(t){e.groupSearch=t},expression:"groupSearch"}})],1),e._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:e.getSafeGroup}})],1)],1)],1)],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:e.groupTable,"tooltip-effect":"dark"},on:{"selection-change":e.selectGroupIds,"sort-change":e.sortChange}},[o("el-table-column",{attrs:{type:"selection",selectable:function(e){return"default"!==e.name}}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.common.name,sortable:"custom",prop:"name"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.common.description,sortable:"custom",prop:"description"}}),e._v(" "),o("el-table-column",{attrs:{label:e.lang.common.operation},scopedSlots:e._u([{key:"default",fn:function(t){return[o("router-link",{attrs:{to:"/cloudCenter/safeGroup/detail/"+t.row.id}},[e._v("\n                        "+e._s(e.lang.common.check)+"\n                    ")])]}}])})],1),e._v(" "),o("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[e.groupFilter.length>e.pageSize?o("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":e.lang.common.prevPage,"next-text":e.lang.common.nextPage,total:e.groupFilter.length,"page-size":e.pageSize},on:{"current-change":e.switchGroupPage}},[e._t("default",[o("span",{staticClass:"pagination-slot"},[e._v("\n                        "+e._s(e.common.formatMsg(e.lang.common.paginationMsg,{current:this.groupPage,total:this.groupFilter.length}))+"\n                    ")])])],2):e._e()],1),e._v(" "),o("pana-create-group",{attrs:{show:e.showCreateGroup},on:{closeModal:e.closeCreateGroup}}),e._v(" "),o("pana-delete-group",{attrs:{show:e.showDeleteGroup},on:{closeModal:e.closeDeleteGroup}})],1)],1)},staticRenderFns:[]};var g=o("C7Lr")(p,u,!1,function(e){o("t9yp")},"data-v-8aa9eb94",null);t.default=g.exports},dM8T:function(e,t){},t9yp:function(e,t){}});