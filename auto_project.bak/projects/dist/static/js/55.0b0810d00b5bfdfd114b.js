webpackJsonp([55],{"0QBt":function(t,e){},"2F89":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("1JPr"),o=a("aA9S"),s=a.n(o),n={props:{show:Boolean,pool_name:String},data:function(){return{loading:!1,zpool_data:{},statusClass:{ONLINE:{class:"cloud-success-color",content:this.lang.ZFS.online},DEGRADED:{class:"cloud-warning-color",content:this.lang.ZFS.degraded},FAULTED:{class:"cloud-warning-color",content:this.lang.ZFS.faulted},OFFLINE:{class:"cloud-warning-color",content:this.lang.ZFS.offline},UNAVAIL:{class:"cloud-error-color",content:this.lang.ZFS.unavail},AVAIL:{class:"cloud-success-color",content:this.lang.ZFS.available},REMOVED:{class:"cloud-warning-color",content:this.lang.ZFS.removed}}}},methods:{innerTableData:function(t){var e=[],a=this.zpool_data.disk_config;for(var l in a)if(l===t){(e=s()([],a[l])).shift();break}return e},pageSelect:function(t){this.pageNum=t},closeModal:function(t){s()(this.$data,this.$options.data.call(this)),t=t||!1,this.$emit("closeModal",t)},initForm:function(){this.$refs.form&&this.$refs.form.resetFields(),this.getPoolDetail()},getPoolDetail:function(){var t=this,e=this.common.formatMsg(this.api.storage.zpool_detail,{pool_name:t.pool_name});this.loading=!0,this.checkError(this.$http({url:e,method:"get"}),function(e){t.zpool_data=e.data,t.loading=!1},function(){t.loading=!1})}},computed:{tableData:function(){var t=[],e=this.zpool_data.disk_config,a=this.zpool_data.spares;if("stripe"!==this.zpool_data.pool_type){for(var l in e)"disk"!==l&&t.push(e[l][0]);t=t.concat(a)}else t=e.disk;return t}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{id:"zpoolDisplayStatus",title:t.lang.ZFS.zpool+t.lang.ZFS.displayStatus,visible:t.show,modal:!0,top:"8vh",width:"45%"},on:{"update:visible":function(e){t.show=e},open:t.initForm,close:t.closeModal}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{"label-width":"60px","element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)"}},[a("el-form-item",{attrs:{label:t.lang.common.name}},[a("span",[t._v(t._s(t.zpool_data.name))])]),t._v(" "),a("el-form-item",{attrs:{label:t.lang.common.status}},[a("span",[t._v(t._s(t.zpool_data.state?t.statusClass[t.zpool_data.state].content:""))])]),t._v(" "),a("el-form-item",{attrs:{label:t.lang.ZFS.error}},[a("span",[t._v(t._s(t.zpool_data.errors))])]),t._v(" "),a("el-table",{staticClass:"cloud-table list",staticStyle:{width:"100%"},attrs:{data:t.tableData}},["stripe"!==t.zpool_data.pool_type?a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-table",{staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"show-header":!1,data:t.innerTableData(e.row.name)}},[a("el-table-column",{attrs:{width:"50"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name"}}),t._v(" "),a("el-table-column",{attrs:{prop:"state"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:t.statusClass[e.row.state].class},[t._v("\n                                    "+t._s(t.statusClass[e.row.state].content)+"\n                                ")])]}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"read"}}),t._v(" "),a("el-table-column",{attrs:{prop:"write"}}),t._v(" "),a("el-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                                "+t._s(e.row.cksum+" "+(e.row.errors?e.row.errors:""))+"\n                            ")]}}],null,!0)})],1)]}}],null,!1,89292694)}):t._e(),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:t.lang.common.name}}),t._v(" "),a("el-table-column",{attrs:{prop:"state",label:t.lang.common.status},scopedSlots:t._u([{key:"default",fn:function(e){return["stripe"===t.zpool_data.pool_type?a("span",{class:t.statusClass[e.row.state].class},[t._v("\n                        "+t._s(t.statusClass[e.row.state].content)+"\n                    ")]):a("span",[t._v(t._s(t.statusClass[e.row.state].content))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"read",label:t.lang.ZFS.read}}),t._v(" "),a("el-table-column",{attrs:{prop:"write",label:t.lang.ZFS.write}}),t._v(" "),a("el-table-column",{attrs:{label:t.lang.ZFS.checksum},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.cksum?e.row.cksum+" "+(e.row.errors?e.row.errors:""):"")+"\n                ")]}}])})],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.back))])],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(n,r,!1,function(t){a("HUsr"),a("kbEo")},"data-v-01bd3580",null).exports,c={data:function(){return{loading:!0,showDisplayStatus:!1,dialogVisible:!1,tipDialogMsg:"",tableData:[],multipleSelection:[],search:"",pageNum:1,pageSize:10,operateOptions:[{value:"displayStatus",label:this.lang.ZFS.displayStatus}],operateValue:""}},created:function(){this.getList()},components:{"pana-breadcrumb":l.a,displayStatus:i},methods:{sort:function(t){this.tableData=this.common.sort(t,this.tableData,["free","used"])},selectNotOne:function(){return 1!==this.multipleSelection.length},moreOperateDisabled:function(t){if(this.selectNotOne())return!0},operateValueChange:function(){switch(this.operateValue){case"displayStatus":this.showDisplayStatus=!0,this.operateValue=""}},closeDisplayStatus:function(){this.showDisplayStatus=!1},notSelect:function(){return this.multipleSelection.length<=0},getList:function(){var t=this;this.checkError(this.$http({url:this.api.storage.zpool,method:"get"}),function(e){t.loading=!1,t.tableData=e.data})},pageSelect:function(t){this.pageNum=t},handleSelectionChange:function(t){this.multipleSelection=t}},computed:{clearDisabled:function(){if(this.notSelect())return!0},filterData:function(){var t=this.search,e=[];return e=""===t?this.tableData:this.common.cloudFilter(this.tableData,t),e},pagedData:function(){return this.filterData.length<=this.pageSize?this.filterData:this.common.pagination(this.filterData,this.pageSize,this.pageNum)}},watch:{search:function(){this.pageNum=1}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"mainDiv",attrs:{type:"flex",direction:"vertical"}},[a("pana-breadcrumb",{attrs:{changePool:!0,callback:t.getList}}),t._v(" "),a("el-main",[a("el-row",{staticClass:"cloud-btn-row",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{span:18}},[a("el-select",{staticClass:"more-operation",attrs:{disabled:t.notSelect(),placeholder:t.lang.common.moreOperation},on:{change:t.operateValueChange},model:{value:t.operateValue,callback:function(e){t.operateValue=e},expression:"operateValue"}},t._l(t.operateOptions,function(e){return a("el-option",{key:e.value,attrs:{disabled:t.moreOperateDisabled(e.value),label:e.label,value:e.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:t.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:t.getList}})],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rga(255, 255, 255)",data:t.pagedData},on:{"sort-change":t.sort,"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"45"}}),t._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"name",label:t.lang.common.name}}),t._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"pool_type",label:t.lang.ZFS.diskStructure},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.lang.ZFS.diskStructureValue[e.row.pool_type])+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"state",label:t.lang.common.status},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.lang.ZFS.statusValue[e.row.state])+"\n                ")]}}])}),t._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"used",label:t.lang.ZFS.usedSpace}}),t._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"free",label:t.lang.ZFS.availableSpace}})],1),t._v(" "),a("el-row",{staticClass:"row-bg pana-pagination-row",attrs:{type:"flex",justify:"end"}},[t.filterData.length>t.pageSize?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":t.lang.common.prevPage,"next-text":t.lang.common.nextPage,total:t.filterData.length,"current-page":t.pageNum},on:{"current-change":t.pageSelect}}):t._e()],1)],1),t._v(" "),a("display-status",{attrs:{pool_name:t.multipleSelection[0]&&t.multipleSelection[0].name,show:t.showDisplayStatus},on:{closeModal:t.closeDisplayStatus}})],1)},staticRenderFns:[]};var p=a("C7Lr")(c,u,!1,function(t){a("0QBt")},"data-v-421dfa77",null);e.default=p.exports},HUsr:function(t,e){},kbEo:function(t,e){}});