webpackJsonp([66],{OIVs:function(t,e){},"sRz/":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Cz8s"),r=a("34jS"),n=a("P918"),o={render:function(){var t=this.$createElement;return(this._self._c||t)("el-alert",{staticStyle:{position:"fixed",width:"360px",bottom:"20px",right:"20px","z-index":"9999","background-color":"#f6cfc8",color:"#e74c3c"},attrs:{title:"",type:"warning","show-icon":""}},[this._t("cpu"),this._v(" "),this._t("ram")],2)},staticRenderFns:[]};var i=a("C7Lr")({data:function(){return{}}},o,!1,function(t){a("OIVs")},null,null).exports,c={name:"pana-main",components:{"cloud-header":s.a,"cloud-nav":r.a,alarm:i},data:function(){return{headerData:n.a.header,centerNavData:[],moduleName:"",activeNavIndex:"",role:"normal",auth:["super","admin","audit","security"],showAuth:!1,cpu:!1,ram:!1,storage:!1}},beforeRouteUpdate:function(t,e,a){this.activeNavIndex=t.path.split("/")[1],a()},watch:{$route:function(t){this.$route.path.split("/")[1]!==this.activeNavIndex&&(this.activeNavIndex=this.$route.path.split("/")[1],this.moduleName=this.$route.path.split("/")[1])}},mounted:function(){var t=this.$route.path.split("/")[1],e=this.common.is_system_admin();switch(this.centerNavData=JSON.parse(sessionStorage.getItem("panaMenus"))||[],this.alarmFn(),e||(this.centerNavData=this.centerNavData.filter(function(t){return"bigData"!==t.moduleName&&"survey"!==t.moduleName})),this.activeNavIndex=t,this.role=JSON.parse(sessionStorage.getItem("panaUser")).role,this.role){case"security":case"audit":this.$router.push({path:"/systemManage"})}window.addEventListener("message",function(t){"3.0"===t.data.flag&&sessionStorage.getItem("panaToken")&&(e?(window.open(t.data.targetAddress),event.source.postMessage({meg:"登录成功!",status:"ok"},event.origin)):(window.open(t.data.targetAddress+"/#/cloudCenter/resource/"),event.source.postMessage({meg:"登录成功!",status:"ok"},event.origin)))},!1)},methods:{changeHeaderNav:function(t){this.activeNavIndex=t,this.moduleName=t},alarmFn:function(){var t=this;t.checkError(t.$http({url:t.api.alarm.getAlarmMsg,method:"get"}),function(e){var a=e.data;t.cpu=Number(a.cpu_rate)>.7,t.ram=Number(a.memory_rate)>.7,t.storage=Number(a.ceph_rate)>.7},function(t){})}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid px-0",attrs:{id:"panaMain"}},[t.ram||t.cpu||t.storage?a("alarm",[t.ram?a("span",{staticClass:"tmpl",staticStyle:{color:"#e74c3c"},attrs:{slot:"ram"},slot:"ram"},[t._v(t._s(t.lang.common.ramAlarm))]):t._e(),t._v(" "),t.cpu?a("span",{staticClass:"tmpl",staticStyle:{color:"#e74c3c"},attrs:{slot:"cpu"},slot:"cpu"},[t._v(t._s(t.lang.common.cpuAlarm))]):t._e(),t._v(" "),t.storage?a("span",{staticClass:"tmpl",staticStyle:{color:"#e74c3c"},attrs:{slot:"cpu"},slot:"cpu"},[t._v(t._s(t.lang.common.storageAlarm))]):t._e()]):t._e(),t._v(" "),a("el-header",[a("cloud-header",{attrs:{centerNavData:t.centerNavData,userData:t.headerData.userData,activeNavIndex:t.activeNavIndex},on:{changeHeaderNav:t.changeHeaderNav}})],1),t._v(" "),t.auth.indexOf(t.role)>-1?a("router-view"):t._e(),t._v(" "),t.$store.store.state.is_authorization_expire&&"softwareAuthorization"!==t.$router.currentRoute.name?a("div",{staticClass:"none-auth"},[a("div",{staticClass:"info"},[t._v("\n      "+t._s(t.lang.common.authorizationExpire)+"\n      "),a("router-link",{attrs:{to:{path:"/systemManage/softwareAuthorization"}}},[t._v(t._s(t.lang.common.gotoAuthExpire))])],1)]):t._e(),t._v(" "),t.$store.store.state.is_no_license&&"softwareAuthorization"!==t.$router.currentRoute.name?a("div",{staticClass:"none-auth"},[a("div",{staticClass:"info"},[t._v("\n      "+t._s(t.lang.common.noLicense)+"\n      "),a("router-link",{attrs:{to:{path:"/systemManage/softwareAuthorization"}}},[t._v(t._s(t.lang.common.gotoAuthExpire))])],1)]):t._e()],1)},staticRenderFns:[]};var l=a("C7Lr")(c,u,!1,function(t){a("zKNX")},"data-v-e4c74ea6",null);e.default=l.exports},zKNX:function(t,e){}});