webpackJsonp([80],{"RRt/":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("1JPr"),l=r("Cj+A"),s={props:{show:Boolean,logClearTime:String},methods:{closeModal:function(){this.$emit("closeModal")},confirm:function(){this.$emit("confirm")}},computed:{logClearTimeTip:function(){var e=this,t="";return this.lang.regularSetup.logClearTimeOptions.some(function(r){if(r.value===e.logClearTime)return t=r.label,!0}),this.common.formatMsg(this.lang.regularSetup.logClearTimeTip,{clearInterval:t})}}},i={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{title:e.lang.common.info,visible:e.show,width:"30%",modal:!0},on:{close:e.closeModal}},[r("el-row",{attrs:{type:"flex",justify:"center"}},[e._v("\n       "+e._s(e.logClearTimeTip)+"\n    ")]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeModal}},[e._v(e._s(e.lang.common.cancel))]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.confirm}},[e._v(e._s(e.lang.common.confirm))])],1)],1)},staticRenderFns:[]},o=r("C7Lr")(s,i,!1,null,null,null).exports,n={components:{"pana-breadcrumb":a.a,"pana-ip-input":l.a,"pana-log-clear":o},data:function(){return{options:[{value:"APC",label:"施耐德"},{value:"GCCALLIANCE",label:"联方云天"}],value:"",platformoptions:[{value:1,label:"3-8"},{value:2,label:"9-12"},{value:3,label:"13-24"},{value:4,label:"25-48"},{value:5,label:"49-60"}],values:"",firstform:{reclaim_instance_interval:"",nova_reserved_memory_size:"",cpu_allocation_ratio:"",block_device_allocate_retries:"",block_device_allocate_retries_interval:""},secondform:{scheduler_max_attempts:""},threeform:{action_retries:"",check_interval:"",ups_type:""},fourform:{platform_scale:""},fiveform:{npt_address:"",ntp_servers:""},sixform:{logClearTime:""},rules:{reclaim_instance_interval:[{required:!0,message:"必填项",trigger:"blur"},{min:1,max:30,type:"integer",message:"请输入1-30的整数",trigger:"blur"}],nova_reserved_memory_size:[{required:!0,message:"必填项",trigger:"blur"},{min:8,max:32,type:"integer",message:"请输入8-32的整数",trigger:"blur"}],cpu_allocation_ratio:[{required:!0,message:"必填项",trigger:"blur"},{min:1,max:16,type:"integer",message:"请输入1-16的整数",trigger:"blur"}],block_device_allocate_retries:[{required:!0,message:"必填项",trigger:"blur"},{min:30,max:360,type:"integer",message:"请输入30-360的整数",trigger:"blur"}],block_device_allocate_retries_interval:[{required:!0,message:"必填项",trigger:"blur"},{min:1,max:10,type:"integer",message:"请输入1-10的整数",trigger:"blur"}]},secondrules:{scheduler_max_attempts:[{required:!0,message:"必填项",trigger:"blur"},{min:1,max:10,type:"integer",message:"请输入1-10的整数",trigger:"blur"}]},threerules:{action_retries:[{required:!0,message:"必填项",trigger:"blur"},{min:1,max:10,type:"integer",message:"请输入1-10的整数",trigger:"blur"}],check_interval:[{required:!0,message:"必填项",trigger:"blur"},{min:1,max:10,type:"integer",message:"请输入1-10的整数",trigger:"blur"}]},fiverules:{npt_address:[{required:!0,message:"必填项",trigger:"blur"}]},submitInValid1:!0,submitInValid2:!0,submitInValid3:!0,submitInValid4:!0,submitInValid5:!0,ntpservers:[],logClearDisable:!0,showLogClearTime:!1}},methods:{closeLogClearTime:function(){this.showLogClearTime=!1},getgeneralSettings:function(){var e=this;this.checkError(this.$http({url:this.api.general.getgeneralSetting,method:"get"}),function(t){e.firstform=t.data,e.firstform.reclaim_instance_interval=t.data.reclaim_instance_interval/86400,e.firstform.nova_reserved_memory_size=e.common.switchCapacity(t.data.nova_reserved_memory_size,"MB","GB",2),e.secondform.scheduler_max_attempts=t.data.scheduler_max_attempts,e.threeform.action_retries=t.data.action_retries,e.threeform.check_interval=t.data.check_interval,e.threeform.ups_type=t.data.ups_type,e.fourform.platform_scale=t.data.platform_scale,e.fiveform.npt_address=t.data.npt_address,e.fiveform.ntp_servers=t.data.ntp_servers[0];for(var r=[],a=0;a<t.data.ntp_servers.length;a++)r.push({value:t.data.ntp_servers[a],label:t.data.ntp_servers[a]});e.ntpservers=r})},changeIp:function(){this.submitInValid5=!1},confSet:function(){var e=this,t=this;this.$refs.fiveform.validate(function(r){r&&e.checkError(e.$http({url:e.api.general.confntp,method:"post",data:{ntp_address:e.fiveform.npt_address}}),function(e){t.$notify({title:t.lang.common.success,type:"success",message:"修改成功"}),t.getgeneralSettings()})})},logClearTime:function(){this.sixform.logClearTime?this.showLogClearTime=!0:this.logClearTimeSet()},logClearTimeSet:function(){var e,t=this,r=0,a=new Date,l=a.getFullYear(),s=a.getMonth()+1,i=l%4==0&&l%100!=0||l%400==0?366:365;switch(this.closeLogClearTime(),t.sixform.logClearTime){case"day":r=1;break;case"week":r=7;break;case"month":r=new Date(l,s,0).getDate();break;case"quarter":r=s>=1&&s<=3?366===i?91:90:s>=4&&s<=6?91:92;break;case"year":r=i}e=this.common.formatMsg(this.api.management.put_clear_logs,{days:r}),this.checkError(this.$http({url:e,method:"put"}),function(e){t.logClearDisable=!0,t.$notify({title:t.lang.common.success,type:"success",message:t.lang.regularSetup.logClearTimeSuccess}),t.getLogClearTime()})},getLogClearTime:function(){var e=this,t=0;this.checkError(this.$http({url:this.api.management.get_clear_logs,method:"get"}),function(r){0==(t=r.data.clear_interval)?e.sixform.logClearTime="":1==t?e.sixform.logClearTime="day":7==t?e.sixform.logClearTime="week":t>=28&&t<=31?e.sixform.logClearTime="month":t>=90&&t<=92?e.sixform.logClearTime="quarter":t>=365&&t<=366&&(e.sixform.logClearTime="year")})}},mounted:function(){this.getgeneralSettings(),this.getLogClearTime()}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-container",{staticClass:"quoseting",attrs:{type:"flex",direction:"vertical"}},[r("pana-breadcrumb"),e._v(" "),r("el-main",[r("el-form",{ref:"firstform",attrs:{model:e.firstform,"label-width":"120px",rules:e.rules}},[r("table",[r("tr",{staticClass:"quotitle"},[r("th",[e._v(e._s(e.lang.regularSetup.setcontent))]),e._v(" "),r("th",[e._v(e._s(e.lang.common.description))]),e._v(" "),r("th",[e._v(e._s(e.lang.common.operation))]),e._v(" "),r("th")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.recycleSettings))]),e._v(" "),r("td",[e._v(e._s(e.lang.regularSetup.recycledesc))]),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"reclaim_instance_interval"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.firstform.reclaim_instance_interval,callback:function(t){e.$set(e.firstform,"reclaim_instance_interval",e._n(t))},expression:"firstform.reclaim_instance_interval"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(天)")])])],1)],1),e._v(" "),r("td")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.nodesave))]),e._v(" "),r("td",[e._v(e._s(e.lang.regularSetup.nodedesc))]),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"nova_reserved_memory_size"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.firstform.nova_reserved_memory_size,callback:function(t){e.$set(e.firstform,"nova_reserved_memory_size",e._n(t))},expression:"firstform.nova_reserved_memory_size"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(GB)")])])],1)],1),e._v(" "),r("td")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.cpuprecent))]),e._v(" "),r("td",[e._v(e._s(e.lang.regularSetup.cpudesc))]),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"cpu_allocation_ratio"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.firstform.cpu_allocation_ratio,callback:function(t){e.$set(e.firstform,"cpu_allocation_ratio",e._n(t))},expression:"firstform.cpu_allocation_ratio"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span")])],1)],1),e._v(" "),r("td")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.creatfailnum))]),e._v(" "),r("td"),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"block_device_allocate_retries"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.firstform.block_device_allocate_retries,callback:function(t){e.$set(e.firstform,"block_device_allocate_retries",e._n(t))},expression:"firstform.block_device_allocate_retries"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(次)")])])],1)],1),e._v(" "),r("td")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.creatinterval))]),e._v(" "),r("td"),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"block_device_allocate_retries_interval"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.firstform.block_device_allocate_retries_interval,callback:function(t){e.$set(e.firstform,"block_device_allocate_retries_interval",e._n(t))},expression:"firstform.block_device_allocate_retries_interval"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(秒)")])])],1)],1),e._v(" "),r("td")])])]),e._v(" "),r("el-form",{ref:"secondform",attrs:{model:e.secondform,"label-width":"120px",rules:e.secondrules}},[r("table",[r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.creatdiskNum))]),e._v(" "),r("td"),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"scheduler_max_attempts"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.secondform.scheduler_max_attempts,callback:function(t){e.$set(e.secondform,"scheduler_max_attempts",e._n(t))},expression:"secondform.scheduler_max_attempts"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(次)")])])],1)],1),e._v(" "),r("td")])])]),e._v(" "),r("el-form",{ref:"threeform",attrs:{model:e.threeform,"label-width":"120px",rules:e.threerules}},[r("table",[r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.highAvailability))]),e._v(" "),r("td"),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"action_retries"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.threeform.action_retries,callback:function(t){e.$set(e.threeform,"action_retries",e._n(t))},expression:"threeform.action_retries"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(次)")])])],1)],1),e._v(" "),r("td")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.highAvailinterval))]),e._v(" "),r("td"),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:10}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"check_interval"}},[r("el-input",{directives:[{name:"disbledScroll",rawName:"v-disbledScroll"}],attrs:{type:"number",disabled:""},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:e.threeform.check_interval,callback:function(t){e.$set(e.threeform,"check_interval",e._n(t))},expression:"threeform.check_interval"}})],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}},[r("span",[e._v("(秒)")])])],1)],1),e._v(" "),r("td")]),e._v(" "),r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.upstype))]),e._v(" "),r("td"),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:16}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"ups_type"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:""},model:{value:e.threeform.ups_type,callback:function(t){e.$set(e.threeform,"ups_type",t)},expression:"threeform.ups_type"}},e._l(e.options,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}})],1)],1),e._v(" "),r("td")])])]),e._v(" "),r("el-form",{ref:"fourform",attrs:{model:e.fourform,"label-width":"120px"}},[r("table",[r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.platformScale))]),e._v(" "),r("td",[e._v(e._s(e.lang.regularSetup.platdesc))]),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:16}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"platform_scale"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:""},model:{value:e.fourform.platform_scale,callback:function(t){e.$set(e.fourform,"platform_scale",t)},expression:"fourform.platform_scale"}},e._l(e.platformoptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}})],1)],1),e._v(" "),r("td")])])]),e._v(" "),r("el-form",{ref:"fiveform",attrs:{model:e.fiveform,"label-width":"120px",rules:e.fiverules}},[r("table",[r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.ntpservice))]),e._v(" "),r("td",[e._v(e._s(e.lang.regularSetup.ntpdesc))]),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:16}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"ntp_servers"}},[r("el-select",{attrs:{filterable:"",placeholder:"请选择",disabled:""},model:{value:e.fiveform.ntp_servers,callback:function(t){e.$set(e.fiveform,"ntp_servers",t)},expression:"fiveform.ntp_servers"}},e._l(e.ntpservers,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)],1),e._v(" "),r("td")])])]),e._v(" "),r("el-form",{ref:"sixform",attrs:{model:e.sixform,"label-width":"120px"}},[r("table",[r("tr",{staticClass:"setinglist"},[r("td",[e._v(e._s(e.lang.regularSetup.logClearTime))]),e._v(" "),r("td",[e._v(e._s(e.lang.regularSetup.logClearTimeDes))]),e._v(" "),r("td",[r("el-row",[r("el-col",{attrs:{span:16}},[r("el-form-item",{staticStyle:{"margin-top":"10px","margin-bottom":"10px!important","margin-left":"-120px"},attrs:{prop:"logClearTime"}},[r("el-select",{attrs:{filterable:""},on:{change:function(t){e.logClearDisable=!1}},model:{value:e.sixform.logClearTime,callback:function(t){e.$set(e.sixform,"logClearTime",t)},expression:"sixform.logClearTime"}},e._l(e.lang.regularSetup.logClearTimeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1),e._v(" "),r("el-col",{staticStyle:{"margin-left":"10px","margin-top":"12px"},attrs:{span:1}})],1)],1),e._v(" "),r("td",[r("el-button",{attrs:{type:"primary",disabled:e.logClearDisable},on:{click:e.logClearTime}},[e._v("保存")])],1)])])]),e._v(" "),r("pana-log-clear",{attrs:{show:e.showLogClearTime,logClearTime:e.sixform.logClearTime},on:{closeModal:e.closeLogClearTime,confirm:e.logClearTimeSet}})],1)],1)},staticRenderFns:[]};var c=r("C7Lr")(n,m,!1,function(e){r("uDUM")},"data-v-ee03b2c0",null);t.default=c.exports},uDUM:function(e,t){}});