webpackJsonp([90],{Asrk:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("34jS"),i=e("P918"),n={name:"survey",inject:["routerRefresh"],components:{"cloud-nav":s.a},props:{moduleName:String},computed:{nav:function(){return i.a.nav[this.moduleName]}},data:function(){return{assemblydata:"",getenginedata:"",panaocsdata:"",alarmdata:"",cpudata:"",totalnum:"",memdata:"",storagedata:"",floatingipdata:""}},methods:{changeHeaderNav:function(t){this.headerData.activeNavIndex=t},toresourceList:function(){this.$router.push({name:"resourceList"}),this.routerRefresh()},tospaceList:function(){this.$router.push({name:"storagepoolIndex"}),this.routerRefresh()},bigdataList:function(){this.$router.push({name:"bigDataPoolIndex"}),this.routerRefresh()},alarmList:function(){this.$router.push({name:"alarmEvent"}),this.routerRefresh()},utc2beijing:function(t){var a=new Date(t).toJSON(),e=new Date(+new Date(a)+288e5).toISOString().replace(/T/g," ").replace(/\.[\d]{3}Z/,"");return this.moment(e).format("M/D")},gettotalnum:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.gettotalnum,method:"get"}),function(a){t.totalnum=a.data})},getbusinessPoolData:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getcloudComponents,method:"get"}),function(a){t.assemblydata=a.data,setTimeout(function(){t.initEcharts({elementId:"assemblyechart",data:t.assemblydata})},0)})},getengineData:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getengine,method:"get"}),function(a){t.getenginedata=a.data,setTimeout(function(){t.initEcharts({elementId:"engineechart",data:t.getenginedata})},0)})},getpanaocsData:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getpanaocs,method:"get"}),function(a){t.panaocsdata=a.data,setTimeout(function(){t.initEcharts({elementId:"panaocsechart",data:t.panaocsdata})},0)})},getalarmData:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getalarm,method:"get"}),function(a){t.alarmdata=a.data,t.echartsInit3(t.alarmdata)})},initEcharts:function(t){var a=this.$echarts.init(document.getElementById(t.elementId)),e=t.data,s={color:["#30C9AD","#EABE27"],tooltip:{trigger:"item",formatter:"{b}:({d}%)"},title:{text:e.total+"\n总数",left:"center",top:"40%",textStyle:{color:"#A2ACBA",align:"center"}},series:[{type:"pie",radius:["45%","60%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:e.success,name:"正常: "+e.success},{value:e.error,name:"异常: "+e.error}]}]};a.setOption(s,!0)},echartsInit3:function(t){var a=this.$echarts.init(document.getElementById("alarmechart")),e={tooltip:{trigger:"item",formatter:"{b}:({d}%)"},color:["#30C9AD","#EABE27"],title:{text:t.total+"\n总数",left:"center",top:"40%",textStyle:{color:"#A2ACBA",align:"center"}},series:[{type:"pie",radius:["45%","60%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"},emphasis:{show:!1,textStyle:{fontSize:"30",fontWeight:"bold"}}},labelLine:{normal:{show:!1}},data:[{value:t.processed,name:"已处理: "+t.processed},{value:t.unprocessed,name:"未处理: "+t.unprocessed}]}]};a.setOption(e,!0)},getcpuline:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getcpuline+this.common.formatGetUrl({resourceName:"cpu"}),method:"get"}),function(a){t.cpudata=a.data,setTimeout(function(){t.lineInit({elementId:"cpu-line",data:t.cpudata})},0)})},getmemline:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getcpuline+this.common.formatGetUrl({resourceName:"mem"}),method:"get"}),function(a){t.memdata=a.data,setTimeout(function(){t.lineInit({elementId:"memory-line",data:t.memdata})},0)})},getstorageline:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getcpuline+this.common.formatGetUrl({resourceName:"disk"}),method:"get"}),function(a){t.storagedata=a.data,setTimeout(function(){t.lineInit({elementId:"storage-line",data:t.storagedata})},0)})},getfloatingipline:function(){var t=this;this.checkError(this.$http({url:this.api.indexSurvey.getcpuline+this.common.formatGetUrl({resourceName:"floatingip"}),method:"get"}),function(a){t.floatingipdata=a.data,setTimeout(function(){t.lineInit({elementId:"floatingip-line",data:t.floatingipdata})},0)})},lineInit:function(t){var a=this,e=this.$echarts.init(document.getElementById(t.elementId)),s=t.data,i=[],n={},r=t.elementId,l=[];for(var o in s.values.forEach(function(t){i.push(a.utc2beijing(t[0])),s.columns.forEach(function(a,e){e>0&&(n.hasOwnProperty(a)||(n[a]=[]),null==t[e]&&(t[e]=0),n[a].push(t[e]))})}),n)l.push({showSymbol:!1,type:"line",smooth:!0,areaStyle:{},itemStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#a2e1d4"},{offset:.4,color:"#d8f3ed"},{offset:1,color:"#f4fbfa"}]),lineStyle:{width:1,type:"solid",color:"#31bda0"}}},data:n[o]}),i.push(n[o][0]);var c={xAxis:{type:"category",data:i,axisLabel:{interval:3}},tooltip:{trigger:"axis",formatter:function(a){var e;return"memory-line"==t.elementId?((e=[]).push('<span style="background:#b3e7dc;width:10px;height:10px;border-radius:5px;display:inline-block;line-height:10px;margin-right:5px"></span>'+a[0].axisValue+" : "+Math.round(a[0].value/1024)+"</br>"),e.join("")):((e=[]).push('<span style="background:#b3e7dc;width:10px;height:10px;border-radius:5px;display:inline-block;line-height:10px;margin-right:5px"></span>'+a[0].axisValue+" : "+a[0].value+"</br>"),e.join(""))}},grid:{left:"12%",top:20},yAxis:{type:"value",axisLabel:{formatter:function(t,a){return"memory-line"==r?t=Math.round(t/1024):t}}},series:l};e.setOption(c)},init:function(){var t=this;["cpu-line","memory-line","storage-line","floatingip-line","assemblyechart","engineechart","panaocsechart","alarmechart"].forEach(function(a){t.$echarts.init(t.$refs[a]).resize()})}},mounted:function(){this.getbusinessPoolData(),this.getengineData(),this.getpanaocsData(),this.getalarmData(),this.gettotalnum(),this.getcpuline(),this.getmemline(),this.getfloatingipline(),this.getstorageline(),window.addEventListener("resize",this.init,20)},destroyed:function(){window.removeEventListener("resize",this.init,20)}},r={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-container",[e("el-main",{staticClass:"surveyDiv"},[e("el-row",{staticClass:"firstrow",attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"surveylist",on:{click:t.toresourceList}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:"/static/image/survey1.png"}})]),t._v(" "),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t.totalnum.pool_total))]),t._v(" "),e("div",{staticClass:"modelname"},[t._v(t._s(t.lang.indexSurvey.businesspool))])])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"surveylist",on:{click:t.tospaceList}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:"/static/image/survey2.png"}})]),t._v(" "),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t.totalnum.intel_total))]),t._v(" "),e("div",{staticClass:"modelname"},[t._v(t._s(t.lang.indexSurvey.storageEngine))])])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"surveylist",on:{click:t.bigdataList}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:"/static/image/survey3.png"}})]),t._v(" "),e("div",{staticClass:"right"},[e("span",[t._v(t._s(t.totalnum.highper_total))]),t._v(" "),e("div",{staticClass:"modelname"},[t._v(t._s(t.lang.indexSurvey.bigdata))])])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"surveylist",on:{click:t.alarmList}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:"/static/image/survey4.png"}})]),t._v(" "),e("div",{staticClass:"right"},[e("span",{staticStyle:{color:"#d4961d"}},[t._v(t._s(t.totalnum.alarm_total))]),t._v(" "),e("div",{staticClass:"modelname"},[t._v(t._s(t.lang.indexSurvey.alarminfo))])])])])],1),t._v(" "),e("el-row",{staticClass:"secondrow",attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.assembly))])]),t._v(" "),e("div",{staticClass:"left"},[e("div",{ref:"assemblyechart",attrs:{id:"assemblyechart"}})]),t._v(" "),e("div",{staticClass:"right pie-legend"},[e("ul",[e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.active)+"："),e("span",[t._v(t._s(t.assemblydata.success))])])]),t._v(" "),e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.error)+"："),e("span",[t._v(t._s(t.assemblydata.error))])])])])])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.engine))])]),t._v(" "),e("div",{staticClass:"left"},[e("div",{ref:"engineechart",attrs:{id:"engineechart"}})]),t._v(" "),e("div",{staticClass:"right pie-legend"},[e("ul",[e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.active)+"："),e("span",[t._v(t._s(t.getenginedata.success))])])]),t._v(" "),e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.error)+"："),e("span",[t._v(t._s(t.getenginedata.error))])])])])])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v("PanaOCS组件")])]),t._v(" "),e("div",{staticClass:"left"},[e("div",{ref:"panaocsechart",attrs:{id:"panaocsechart"}})]),t._v(" "),e("div",{staticClass:"right pie-legend"},[e("ul",[e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.active)+"："),e("span",[t._v(t._s(t.panaocsdata.success))])])]),t._v(" "),e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.error)+"："),e("span",[t._v(t._s(t.panaocsdata.error))])])])])])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.alarmEvent))])]),t._v(" "),e("div",{staticClass:"left"},[e("div",{ref:"alarmechart",attrs:{id:"alarmechart"}})]),t._v(" "),e("div",{staticClass:"right pie-legend"},[e("ul",[e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.processed)+"："),e("span",[t._v(t._s(t.alarmdata.processed))])])]),t._v(" "),e("li",{staticClass:"li-horizontal"},[e("div",[e("i"),t._v(t._s(t.lang.indexSurvey.unprocessed)+"："),e("span",[t._v(t._s(t.alarmdata.unprocessed))])])])])])])])],1),t._v(" "),e("el-row",{staticClass:"threerow",attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.cpurate))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.cpudata.hasOwnProperty("values")&&0!==t.cpudata.values.length,expression:"cpudata.hasOwnProperty('values') && cpudata.values.length!==0"}],ref:"cpu-line",attrs:{id:"cpu-line"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.cpudata.hasOwnProperty("values")&&0==t.cpudata.values.length,expression:"cpudata.hasOwnProperty('values') && cpudata.values.length==0"}],staticClass:"no-data"},[t._v("\n                            "+t._s(t.lang.componentMonitor.noData)+"\n                        ")])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.memoryrate))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.memdata.hasOwnProperty("values")&&0!==t.memdata.values.length,expression:"memdata.hasOwnProperty('values') && memdata.values.length!==0"}],ref:"memory-line",attrs:{id:"memory-line"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.memdata.hasOwnProperty("values")&&0==t.memdata.values.length,expression:"memdata.hasOwnProperty('values') && memdata.values.length==0"}],staticClass:"no-data"},[t._v("\n                            "+t._s(t.lang.componentMonitor.noData)+"\n                        ")])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.storagerate))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.storagedata.hasOwnProperty("values")&&0!==t.storagedata.values.length,expression:"storagedata.hasOwnProperty('values') && storagedata.values.length!==0"}],ref:"storage-line",attrs:{id:"storage-line"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.storagedata.hasOwnProperty("values")&&0==t.storagedata.values.length,expression:"storagedata.hasOwnProperty('values') && storagedata.values.length==0"}],staticClass:"no-data"},[t._v("\n                            "+t._s(t.lang.componentMonitor.noData)+"\n                        ")])])]),t._v(" "),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"mointorlist"},[e("div",{staticClass:"echartstitle"},[e("span",[t._v(t._s(t.lang.indexSurvey.floatingiprate))])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.floatingipdata.hasOwnProperty("values")&&0!==t.floatingipdata.values.length,expression:"floatingipdata.hasOwnProperty('values') && floatingipdata.values.length!==0"}],ref:"floatingip-line",attrs:{id:"floatingip-line"}}),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.floatingipdata.hasOwnProperty("values")&&0==t.floatingipdata.values.length,expression:"floatingipdata.hasOwnProperty('values') && floatingipdata.values.length==0"}],staticClass:"no-data"},[t._v("\n                            "+t._s(t.lang.componentMonitor.noData)+"\n                        ")])])])],1)],1)],1)},staticRenderFns:[]};var l=e("C7Lr")(n,r,!1,function(t){e("M278")},"data-v-678a6edc",null);a.default=l.exports},M278:function(t,a){}});