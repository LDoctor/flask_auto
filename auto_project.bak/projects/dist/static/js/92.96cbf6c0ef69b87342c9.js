webpackJsonp([92],{"60st":function(e,t){},sPob:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("3cXf"),n=a.n(l),o={name:"pana-vlan-fix",components:{},data:function(){return{pageSize:10,currentPage:1,total:0,specSearch:"",sortOrder:0,sortProp:"",labelWidth:"80px",loading:!0,fixBtn:!1,form:{vlanName:"",vlanId:""},modeOptions:[{label:"Trunk",value:"2"},{label:"Access",value:"1"}],ifElse:[{label:"是",value:!0},{label:"否",value:!1}],tableData:[],selectName:[]}},directives:{focus:{inserted:function(e,t,a){e.children[0].focus(),a.context.common.fireFoxDisbliedScroll(e.children[0])}}},computed:{filterData:function(){var e=this;return e.tableData.filter(function(t,a){return""===e.specSearch||(e.currentPage=1,-1!==n()(t).search(e.specSearch))}).sort(function(t,a){return t[e.sortProp]=null==t[e.sortProp]?"":t[e.sortProp],a[e.sortProp]=null==a[e.sortProp]?"":a[e.sortProp],(t[e.sortProp]>a[e.sortProp]?1:-1)*e.sortOrder})},laterData:function(){return this.filterData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize)}},methods:{handleSizeChange:function(e){this.pageSize=e},handleCurrentChange:function(e){this.currentPage=e},changeNumber:function(e,t){t.vlan_conf>4094&&(t.vlan_conf=4094),t.vlan_conf<1&&(t.vlan_conf=1)},getList:function(){var e=this;this.checkError(this.$http({url:e.common.formatMsg(e.api.systemManage.get__vlan_port_detail,{id:e.form.vlanId}),method:"get"}),function(t){console.log(t);var a=[];t.data.map(function(e,t){a[t]={vlan_conf:e.vlan_conf,allow_label:e.allow_label,allow:e.allow,port_name:e.port_name,port_id:e.port_id,vlan_model:e.vlan_model,edit:!1}}),e.tableData=a,e.loading=!1},function(t){e.loading=!1})},submitForm:function(){var e=this,t=[];e.tableData.map(function(e,a){t[a]={vlan_conf:e.vlan_conf,allow_label:e.allow_label,allow:e.allow,port_id:Number(e.port_id),vlan_model:e.vlan_model}}),e.fixBtn=!0,this.checkError(this.$http({url:e.api.systemManage.put_switch_vlan_list,data:{vlan_name:e.form.vlanName,vlan_id:e.form.vlanId,port_info:t},method:"put"}),function(t){e.fixBtn=!1,e.loading=!1,e.$notify({title:e.lang.common.success,type:"success",message:e.lang.switchManage.fixedSuccess}),e.$router.go(-1)},function(t){e.fixBtn=!1,e.loading=!1})}},mounted:function(){this.form=JSON.parse(this.$route.params.obj),this.form.vlanName=this.form.vlanName.substr(0,this.form.vlanName.length-1),this.getList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{attrs:{type:"flex",direction:"vertical"}},[a("el-main",[a("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",gutter:40,justify:"space-between"}},[a("el-form",{attrs:{"label-position":"left"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.lang.switchManage.vlanid,"label-width":e.labelWidth,prop:"vlanId"}},[a("el-input",{attrs:{type:"text",disabled:!0,placeholder:e.lang.switchManage.plzEnter},model:{value:e.form.vlanId,callback:function(t){e.$set(e.form,"vlanId",t)},expression:"form.vlanId"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:e.lang.switchManage.vlanName,"label-width":e.labelWidth,prop:"vlanName"}},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"默认VLAN名称不可修改",disabled:"Default"!=e.form.vlanName,placement:"top-start"}},[a("el-input",{attrs:{type:"text",disabled:"Default"==e.form.vlanName,placeholder:e.lang.switchManage.plzEnter},model:{value:e.form.vlanName,callback:function(t){e.$set(e.form,"vlanName",t)},expression:"form.vlanName"}})],1)],1)],1)],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":e.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:e.laterData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{label:e.lang.switchManage.port,prop:"port_name"}}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.switchManage.defaultVlan},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[a("el-input",{directives:[{name:"focus",rawName:"v-focus"}],staticStyle:{width:"50%"},attrs:{type:"number"},on:{input:function(a){return e.changeNumber(a,t.row)},blur:function(e){t.row.edit=!1}},nativeOn:{mousewheel:function(e){e.preventDefault()}},model:{value:t.row.vlan_conf,callback:function(a){e.$set(t.row,"vlan_conf",e._n(a))},expression:"scope.row.vlan_conf"}}),e._v(" "),a("span",{domProps:{innerHTML:e._s("<1-4094>")}})]:a("span",{staticStyle:{display:"inline-block","min-height":"30px","min-width":"35px",cursor:"pointer"},on:{click:function(e){t.row.edit=!0}}},[e._v(e._s(t.row.vlan_conf))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.switchManage.mode,prop:"vlanName"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"60%"},attrs:{filterable:""},model:{value:t.row.vlan_model,callback:function(a){e.$set(t.row,"vlan_model",a)},expression:"scope.row.vlan_model"}},e._l(e.modeOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.switchManage.ifLabel},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"60%"},attrs:{filterable:"",disabled:!0},model:{value:t.row.allow_label,callback:function(a){e.$set(t.row,"allow_label",a)},expression:"scope.row.allow_label"}},e._l(e.ifElse,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.switchManage.ifAllow},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"60%"},attrs:{filterable:"",disabled:!0},model:{value:t.row.allow,callback:function(a){e.$set(t.row,"allow",a)},expression:"scope.row.allow"}},e._l(e.ifElse,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)]}}])})],1),e._v(" "),a("el-row",{staticClass:"row-bg pana-pagination-row",attrs:{type:"flex",justify:"end"}},[e.filterData.length>e.pageSize?a("el-pagination",{attrs:{"current-page":e.currentPage,background:"",layout:"slot, prev, pager, next","page-size":e.pageSize,"prev-text":e.lang.common.prevPage,"next-text":e.lang.common.nextPage,total:e.filterData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}},[e._t("default",[a("span",{staticClass:"pagination-slot"},[e._v("\n                            "+e._s(e.common.formatMsg(e.lang.common.paginationMsg,{current:this.currentPage,total:this.tableData.length}))+"\n                        ")])])],2):e._e()],1),e._v(" "),a("el-row",{staticClass:"pana-btn-group",staticStyle:{"margin-top":"50px"},attrs:{type:"flex",gutter:40,justify:"center"}},[a("el-button",{on:{click:function(t){return e.$router.go(-1)}}},[e._v(e._s(e.lang.switchManage.cancel))]),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:e.fixBtn},on:{click:e.submitForm}},[e._v(e._s(e.lang.switchManage.confirm))])],1)],1)],1)},staticRenderFns:[]};var i=a("C7Lr")(o,r,!1,function(e){a("60st")},"data-v-66d4d5ab",null);t.default=i.exports}});