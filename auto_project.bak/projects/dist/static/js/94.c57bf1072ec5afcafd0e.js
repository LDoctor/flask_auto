webpackJsonp([94],{PaJ1:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("3cXf"),o=n.n(a),s=n("1JPr"),r={name:"pana-shutdown-server",props:{show:Boolean},methods:{closeModal:function(t){t=t||!1,this.$emit("closeModal",t)}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.lang.common.info,visible:t.show,width:"30%",modal:!0},on:{close:t.closeModal}},[n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:21}},[t._v(t._s(t.lang.dataCenter.shutdownInfo))])],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.closeModal}},[t._v(t._s(t.lang.common.cancel))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.closeModal(!0)}}},[t._v(t._s(t.lang.common.confirm))])],1)],1)},staticRenderFns:[]},c=n("C7Lr")(r,l,!1,null,null,null).exports,i={name:"cloudDisk",components:{"pana-breadcrumb":s.a,"pana-shutdown-server":c},data:function(){return{pageSize:10,centerSearch:"",centerOrigin:[],centerSelections:[],centerPage:1,statusConf:{0:{class:"cloud-fault",content:this.lang.dataCenter.notDeployed},1:{class:"cloud-success",content:this.lang.dataCenter.startDeploy},2:{class:"cloud-success",content:this.lang.dataCenter.deploying},3:{class:"cloud-success",content:this.lang.dataCenter.deployed},4:{class:"cloud-success",content:this.lang.dataCenter.updating},5:{class:"cloud-error",content:this.lang.dataCenter.updateFailed}},showShutdown:!1,shutdownLoading:!1,loading:!1}},computed:{centerFilter:function(){var t=this;return this.centerOrigin.filter(function(e){return""===t.centerSearch||-1!==o()(e).search(t.centerSearch)})},centerTable:function(){return this.centerFilter.length>this.pageSize?this.centerFilter.slice((this.centerPage-1)*this.pageSize,this.centerPage*this.pageSize):this.centerFilter}},methods:{switchCenterPage:function(t){this.centerPage=t},sortChange:function(t){var e=null==t.order?0:"ascending"===t.order?1:-1;this.centerOrigin=this.centerOrigin.sort(function(n,a){switch(t.prop){case"ocs_num":case"instances":return(n[t.prop]-a[t.prop])*e;default:return n[t.prop]=null==n[t.prop]?"":n[t.prop],a[t.prop]=null==a[t.prop]?"":a[t.prop],(n[t.prop]>a[t.prop]?1:-1)*e}})},closeShutdown:function(t){var e=this;this.showShutdown=!1,!0===t&&this.checkError(this.$http({url:this.api.operation.post_regions_shutdown,method:"post"}),function(){e.$loading({lock:!0,text:e.lang.dataCenter.closingServer,spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.centerSelections=[]})},getCenterList:function(){var t=this;this.loading=!0,this.checkError(this.$http({url:this.api.operation.get_regions,method:"get"}),function(e){t.loading=!1,t.centerOrigin=e.data},function(){t.loading=!1})},selectCenters:function(t){this.centerSelections=t}},mounted:function(){this.getCenterList()}},u={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",{attrs:{type:"flex",direction:"vertical"}},[n("pana-breadcrumb"),t._v(" "),n("el-main",[n("el-row",{staticClass:"pana-btn-group",attrs:{type:"flex",justify:"space-between"}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{type:"primary",disabled:1!==t.centerSelections.length||3!==parseInt(t.centerSelections[0].status)},on:{click:function(e){t.showShutdown=!0}}},[t._v("\n                    "+t._s(t.lang.dataCenter.shutdown)+"\n                ")])],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-row",{staticClass:"search-row",attrs:{type:"flex",justify:"space-around"}},[n("el-col",{attrs:{span:22}},[n("el-input",{attrs:{placeholder:t.lang.common.search,"suffix-icon":"el-icon-search"},model:{value:t.centerSearch,callback:function(e){t.centerSearch=e},expression:"centerSearch"}})],1),t._v(" "),n("el-col",{attrs:{span:2}},[n("el-button",{staticClass:"fa fa-refresh",attrs:{type:"text",circle:""},on:{click:t.getCenterList}})],1)],1)],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{"element-loading-text":t.lang.common.loading,"element-loading-spinner":"el-icon-loading","element-loading-background":"rgb(255, 255, 255)",data:t.centerTable,"tooltip-effect":"dark"},on:{"selection-change":t.selectCenters,"sort-change":t.sortChange}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.common.name,sortable:"custom",prop:"regionName"}}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.common.status,sortable:"custom",prop:"status"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!=t.statusConf[e.row.status]?n("span",{class:["status",t.statusConf[e.row.status].class]},[t._v("\n                        "+t._s(t.statusConf[e.row.status].content)+"\n                    ")]):n("span",{staticClass:"status cloud-fault"},[t._v("\n                        "+t._s(t.lang.dataCenter.none)+"\n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.dataCenter.registerCode,sortable:"custom",prop:"regionKey"}}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.dataCenter.virtualNodeCount,sortable:"custom",prop:"instances"}}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.dataCenter.containerNodeCount,sortable:"custom",prop:"ocs_num"}}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.common.createTime,sortable:"custom",prop:"createTime"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("utc2beijing")(e.row.createTime))+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.lang.common.description,sortable:"custom",prop:"description"}})],1),t._v(" "),n("el-row",{staticClass:"pana-pagination-row",attrs:{type:"flex",justify:"end"}},[t.centerFilter.length>t.pageSize?n("el-pagination",{attrs:{background:"",layout:"slot, prev, pager, next","prev-text":t.lang.common.prevPage,"next-text":t.lang.common.nextPage,total:t.centerFilter.length,"page-size":t.pageSize},on:{"current-change":t.switchCenterPage}},[t._t("default",[n("span",{staticClass:"pagination-slot"},[t._v("\n                        "+t._s(t.common.formatMsg(t.lang.common.paginationMsg,{current:this.centerPage,total:this.centerFilter.length}))+"\n                    ")])])],2):t._e()],1),t._v(" "),n("pana-shutdown-server",{attrs:{show:t.showShutdown},on:{closeModal:t.closeShutdown}})],1)],1)},staticRenderFns:[]};var p=n("C7Lr")(i,u,!1,function(t){n("R3zb")},"data-v-604c1426",null);e.default=p.exports},R3zb:function(t,e){}});