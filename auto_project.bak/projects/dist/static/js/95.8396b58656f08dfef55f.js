webpackJsonp([95],{"5zdp":function(e,t){},"sU/f":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{tableData:[],pageNum:1,pageSize:10,options:[],value:"",serverDescription:{nomad:"Nomad集群调度服务","nomad-client":"Nomad集群调度服务",consul:"Consul集群调度服务",mysql:"Mysql数据库服务","neutron-vpn-agent":"网络VPN代理服务","ceph-mon":"ceph监控服务","ceph-osd":"ceph osd管理服务",awbob:"平台bob任务服务","computeha-monitor":"计算节点高可用监控服务","computeha-slave":"计算节点高可用从属服务",influxdb:"Influxdb数据库服务",docker:"docker容器服务",libvirt:"虚拟化平台平台管理服务",ovs:"OpenvSwitch服务","nova-compute":"nova 计算服务","neutron-openvswitch-agent":"OpenvSwitch网络代理服务","agent-proxy":"虚拟化平台代理服务","rabbitmq-common":"消息队列服务","rabbitmq-common-post-start":"消息队列服务","rabbitmq-common-health-check":"消息队列服务","rabbitmq-cinder":"消息队列服务","rabbitmq-cinder-post-start":"消息队列服务","rabbitmq-cinder-health-check":"消息队列服务","rabbitmq-neutron":"消息队列服务","rabbitmq-neutron-post-start":"消息队列服务","rabbitmq-neutron-health-check":"消息队列服务","rabbitmq-nova":"消息队列服务","rabbitmq-nova-post-start":"消息队列服务","rabbitmq-nova-health-check":"消息队列服务","rabbitmq-management":"消息队列服务","rabbitmq-managementmanagement-post-start":"消息队列服务","rabbitmq-management-health-check":"消息队列服务","ceilometer-notification-common":"监控计费服务","ceilometer-notification-cinder":"监控计费服务","ceilometer-notification-neutron":"监控计费服务","ceilometer-notification-nova":"监控计费服务",keystone:"认证服务","keystone-admin":"认证服务","keystone-public":"认证服务","neutron-dhcp-agent":"网络 dhcp代理服务","neutron-server":"网络服务","nova-api":"计算API接口服务","nova-consoleauth":"计算控制台认证服务","nova-novncproxy":"计算novnc代理服务","nova-scheduler":"计算调度服务","ceph-api":"ceph API接口服务","cinder-api":"存储API服务","cinder-scheduler":"存储调度服务","cinder-volume":"存储卷管理服务","glance-api":"镜像API接口服务","glance-registry":"镜像注册服务",haproxy:"负载均衡服务","haproxy-galera":"负载均衡服务",memcached:"Memcached内存数据库",telegraf:"集群状态收集服务","tunnel-connector":"通道连接器服务",clustercheck:"集群检测服务",kapacitor:"告警容器服务",saas:"容器","saas-container":"容器","cinder-backup":"备份","nova-quota-sync":"计算配额同步服务","nova-metadata":"计算元数据服务",topo:"网络拓扑和大屏展示","influxdb-relay":"","nova-conductor":"","pana-ocs":"pana-ocs服务"}}},components:{"pana-breadcrumb":a("1JPr").a},created:function(){this.getnodeList()},methods:{getnodeList:function(){var e=this;this.checkError(this.$http({url:this.api.monitoringManagement.getnodeList,method:"get"}),function(t){for(var a=[],n=0;n<t.data.length;n++)a.push({value:t.data[n].id,label:t.data[n].hostName});e.options=a,e.value=a[0].label,e.getList()})},getList:function(){var e=this;this.checkError(this.$http({url:this.api.monitoringManagement.getnodeserviceList+this.common.formatGetUrl({nodeName:e.value}),method:"get"}),function(t){var a=t.data.Services,n=[];for(var o in a)"pana-ocs"==a[o].Service?n.push({servicename:a[o].Service,servicedesc:a[o].Service,nodeName:e.value,status:a[o].status}):n.push({servicename:a[o].Service,servicedesc:a[o].Service,nodeName:e.value,status:""});for(var r=[],s={},i=0;i<n.length;i++)s[n[i].servicename]||(r.push(n[i]),s[n[i].servicename]=!0);e.tableData=r})},changenode:function(){this.getList(),this.pageNum=1},sortChange:function(e){var t=null==e.order?0:"ascending"===e.order?1:-1;this.tableData=this.tableData.sort(function(a,n){return(a[e.prop]>n[e.prop]?1:-1)*t})},pageSelect:function(e){this.pageNum=e}},computed:{pagedData:function(){return this.tableData.length<=this.pageSize?this.tableData:this.common.pagination(this.tableData,this.pageSize,this.pageNum)}},watch:{}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"mainDiv",attrs:{type:"flex",direction:"vertical"}},[a("pana-breadcrumb"),e._v(" "),a("el-main",[a("el-row",{staticClass:"cloud-btn-row",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{staticStyle:{"min-width":"74px"},attrs:{span:1}},[a("span",{staticStyle:{"line-height":"40px"}},[e._v("选择节点:")])]),e._v(" "),a("el-col",{attrs:{span:23}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:e.changenode},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.label}})}),1)],1)],1),e._v(" "),a("el-table",{ref:"multipleTable",staticClass:"cloud-table",staticStyle:{width:"100%"},attrs:{data:e.pagedData},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{label:e.lang.monitoringManagement.serviceName,prop:"servicename",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"nodeName",label:e.lang.monitoringManagement.nodeName,sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.monitoringManagement.status,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return["pana-ocs"!=t.row.servicename?a("span",{staticClass:"status activeservice"},[e._v("运行")]):e._e(),e._v(" "),"pana-ocs"==t.row.servicename&&"abnormal"==t.row.status?a("span",{staticClass:"status error"},[e._v("异常")]):e._e(),e._v(" "),"pana-ocs"==t.row.servicename&&"active"==t.row.status?a("span",{staticClass:"status activeservice"},[e._v("运行")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:e.lang.monitoringManagement.serviceDesc,sortable:"custom"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.serverDescription[t.row.servicedesc]))])]}}])})],1),e._v(" "),a("el-row",{staticClass:"row-bg pana-pagination-row",attrs:{type:"flex",justify:"end"}},[e.tableData.length>e.pageSize?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","prev-text":e.lang.common.prevPage,"next-text":e.lang.common.nextPage,total:e.tableData.length,"current-page":e.pageNum},on:{"current-change":e.pageSelect}}):e._e()],1)],1)],1)},staticRenderFns:[]};var r=a("C7Lr")(n,o,!1,function(e){a("5zdp")},"data-v-5fcb50ee",null);t.default=r.exports}});