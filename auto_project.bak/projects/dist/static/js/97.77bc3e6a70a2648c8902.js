webpackJsonp([97],{tGTD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={components:{"pana-breadcrumb":a("1JPr").a},data:function(){return{form:{cores:"",gigabytes:"",ram:""},memmin:"",cpumin:"",storagemin:"",rules:{cores:[{type:"integer",required:!0,message:"必填项,请输入正整数",trigger:"blur"},{validator:this.validateCpu,trigger:"blur"}],gigabytes:[{type:"integer",required:!0,message:"必填项,请输入正整数",trigger:"blur"},{validator:this.validateStorage,trigger:"blur"}],ram:[{type:"integer",required:!0,message:"必填项,请输入正整数",trigger:"blur"},{validator:this.validateRam,trigger:"blur"}]}}},methods:{getquo:function(){var t=this;this.checkError(this.$http({url:this.api.general.getquo,method:"get"}),function(e){t.form=e.data,t.form.ram=t.common.switchCapacity(e.data.ram,"MB","GB",2)})},getcheckList:function(){var t=this;this.checkError(this.$http({url:this.api.general.getcheckList,method:"get"}),function(e){t.cpumin=e.data.cores,t.memmin=e.data.ram/1024,t.storagemin=e.data.gigabytes})},editQuo:function(){var t=this;t.$refs.form.validate(function(e){e&&t.checkError(t.$http({url:t.api.general.getquo,method:"post",data:{domain:{},quotas:[{hardLimit:t.form.cores,name:"cores"},{hardLimit:t.common.switchCapacity(t.form.ram,"GB","MB",0),name:"ram"},{hardLimit:t.form.gigabytes,name:"gigabytes"}]}}),function(e){t.getquo(),t.$notify({title:t.lang.common.success,type:"success",message:"编辑成功"})})})},validateCpu:function(t,e,a){var r=this.cpumin;(""===e||null==e||isNaN(e))&&a(),e>=r?a():a(Error(this.common.formatMsg(this.lang.regularSetup.storageRange,{min:r})))},validateStorage:function(t,e,a){var r=this.storagemin;(""===e||null==e||isNaN(e))&&a(),e>=r?a():a(Error(this.common.formatMsg(this.lang.regularSetup.storageRange,{min:r})))},validateRam:function(t,e,a){var r=this.memmin;(""===e||null==e||isNaN(e))&&a(),e>=r?a():a(Error(this.common.formatMsg(this.lang.regularSetup.storageRange,{min:r})))}},mounted:function(){this.getquo(),this.getcheckList()}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-container",{staticClass:"quoseting",attrs:{type:"flex",direction:"vertical"}},[a("pana-breadcrumb"),t._v(" "),a("el-main",[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"120px",rules:t.rules}},[a("table",[a("tr",{staticClass:"quotitle"},[a("th",[t._v("资源名称")]),t._v(" "),a("th",[t._v("默认配额数")])]),t._v(" "),a("tr",{staticClass:"setinglist"},[a("td",[t._v("存储资源配额")]),t._v(" "),a("td",[a("el-row",{attrs:{type:"flex",direction:"vertical",align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"input-col",staticStyle:{"margin-left":"-120px","margin-bottom":"0","margin-top":"10px"},attrs:{prop:"gigabytes"}},[a("el-input",{attrs:{maxlength:"9"},model:{value:t.form.gigabytes,callback:function(e){t.$set(t.form,"gigabytes",t._n(e))},expression:"form.gigabytes"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:1}},[a("span",[t._v("GB")])])],1)],1)]),t._v(" "),a("tr",{staticClass:"setinglist"},[a("td",[t._v("内存资源配额")]),t._v(" "),a("td",[a("el-row",{attrs:{type:"flex",direction:"vertical",align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"input-col",staticStyle:{"margin-left":"-120px","margin-bottom":"0","margin-top":"10px"},attrs:{prop:"ram"}},[a("el-input",{attrs:{maxlength:"6"},model:{value:t.form.ram,callback:function(e){t.$set(t.form,"ram",t._n(e))},expression:"form.ram"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:1}},[a("span",[t._v("GB")])])],1)],1)]),t._v(" "),a("tr",{staticClass:"setinglist"},[a("td",[t._v("CPU资源配额")]),t._v(" "),a("td",[a("el-row",{attrs:{type:"flex",direction:"vertical",align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"input-col",staticStyle:{"margin-left":"-120px","margin-bottom":"0","margin-top":"10px"},attrs:{prop:"cores"}},[a("el-input",{attrs:{maxlength:"9"},model:{value:t.form.cores,callback:function(e){t.$set(t.form,"cores",t._n(e))},expression:"form.cores"}})],1)],1),t._v(" "),a("el-col",{staticStyle:{"margin-left":"10px"},attrs:{span:1}},[a("span",[t._v("核")])])],1)],1)]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td",[a("el-button",{staticClass:"savebtn",staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.editQuo}},[t._v("保存")])],1)])])])],1)],1)},staticRenderFns:[]};var s=a("C7Lr")(r,i,!1,function(t){a("uTLM")},"data-v-5ae66e1e",null);e.default=s.exports},uTLM:function(t,e){}});